(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{200:function(e,a,t){e.exports=t(311)},205:function(e,a,t){},311:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),c=t(49),l=t.n(c),o=(t(205),t(12)),i=t.n(o),s=t(18),m=t(6),u=t(24),d=t(341),f=(t(207),t(208),Object(u.a)(Object(u.a)({},d.a),{},{colors:{black:"#000",white:"#FFF",primary:{50:"#d9fffd",100:"#adfff8",200:"#7dfff1",300:"#4dffec",400:"#26ffe6",500:"#15e6cd",600:"#00b39f",700:"#008072",800:"#004e44",900:"#001c18"},secondary:{50:"#fafbe4",100:"#f0f3be",200:"#e6eb96",300:"#dde46d",400:"#d4dc45",500:"#bac22d",600:"#909722",700:"#676c18",800:"#3e410c",900:"#151600"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},gray:{50:"#f9f9f9",100:"#eceeee",200:"#dee1e1",300:"#ced4d3",400:"#bec5c4",500:"#abb5b4",600:"#96a2a1",700:"#7d8c8a",800:"#5d706d",900:"#344240"},cyan:{50:"#f3fbfa",100:"#daf2f0",200:"#bfe9e4",300:"#a0dfd7",400:"#7dd3c9",500:"#54c5b7",600:"#1fb3a1",700:"#009a88",800:"#007a6c",900:"#00483f"},blue:{50:"#f6fafc",100:"#e4eff6",200:"#d1e4ef",300:"#bbd7e8",400:"#a4c9e0",500:"#89b9d7",600:"#6aa7cc",700:"#4490bf",800:"#1071ad",900:"#00426b"},indigo:{50:"#f9f9fd",100:"#ebedf8",200:"#dde0f3",300:"#cdd1ee",400:"#bcc2e8",500:"#a9b0e2",600:"#939cda",700:"#7983d1",800:"#5663c5",900:"#182ab0"},violet:{50:"#faf9fd",100:"#f0ebf8",200:"#e6ddf3",300:"#daceee",400:"#cdbce8",500:"#bfa9e2",600:"#ae93da",700:"#9a78d1",800:"#7f55c5",900:"#4d11ae"},fuschia:{50:"#fcf8fd",100:"#f6eaf8",200:"#efdaf2",300:"#e8c9ed",400:"#e0b6e6",500:"#d7a0df",600:"#cd87d6",700:"#bf67cb",800:"#ab37bb",900:"#70007f"},pink:{50:"#fdf8fb",100:"#f8eaf2",200:"#f2dae9",300:"#edc9df",400:"#e6b6d4",500:"#dfa0c7",600:"#d687b8",700:"#cb67a5",800:"#bb3788",900:"#7e004e"},red:{50:"#fdf8f9",100:"#f8eaec",200:"#f3dbde",300:"#edcbcf",400:"#e7b8be",500:"#e0a3aa",600:"#d78b94",700:"#cd6c77",800:"#be3f4e",900:"#850010"},orange:{50:"#fcf9f7",100:"#f6ece5",200:"#f0ddd2",300:"#e9cebd",400:"#e1bda6",500:"#d8a98d",600:"#ce936e",700:"#c17749",800:"#af5016",900:"#6e2a00"},yellow:{50:"#fbfaf2",100:"#f1eed7",200:"#e7e2ba",300:"#e7e2ba",400:"#d0c676",500:"#c3b54e",600:"#b2a11e",700:"#9c8900",800:"#7b6c00",900:"#484000"},lime:{50:"#f7fbf2",100:"#e7f1d7",200:"#d6e7b9",300:"#c2dc99",400:"#add074",500:"#94c14a",600:"#76b018",700:"#5e9800",800:"#4b7800",900:"#2c4700"},green:{50:"#f5fbf4",100:"#dff3dc",200:"#c7eac2",300:"#ace0a5",400:"#8ed584",500:"#6ac85d",600:"#3cb72c",700:"#139f00",800:"#0f7e00",900:"#094a00"},teal:{50:"#f4fbf7",100:"#dcf3e5",200:"#c2ead1",300:"#a5e0bb",400:"#83d5a2",500:"#5cc785",600:"#2ab660",700:"#009f3c",800:"#007d30",900:"#004a1c"}}})),b=t(26),p=t(345),E=t(53),g=t(188),h=t(31),v=t(333),O=t(9),y=t(78),j=t(324),x=t(344),C=t(156),w=t(326),S=t(16),k=t(321),q=t(22),z=function(e){var a=e.avatar,t=e.username,n=e.author,c=e.datePosted,l=new Date,o=new Date(c),i=l.getTime()-o.getTime(),s=Math.floor(i/864e5),m=Math.floor(i/36e5),u=Math.floor(i/6e4),d=Math.floor(i/1e3);return r.a.createElement(E.a,{align:"center",mb:"2"},r.a.createElement(q.b,{to:"/".concat(t)},r.a.createElement(k.a,{size:"md",name:n,src:a&&a.url,mr:"4"})),r.a.createElement(E.a,{flexDirection:"column",w:"full"},r.a.createElement(y.a,{fontSize:"sm",fontWeight:"semibold",mr:"1"},n),r.a.createElement(y.a,{fontSize:"sm",color:"gray.700"},"@".concat(t)),r.a.createElement(y.a,{fontSize:"sm",color:"gray.700"},m>=24?"".concat(s,"d ago"):u>=60?"".concat(m,"hr ago"):d>=60?"".concat(u,"min ago"):"".concat(d," sec ago"))))},N=t(322),I=t(323),F=function(e){var a=e.item,t=e.type,n=a.name,c=a.amount,l=a.total,o=0===l-c;return r.a.createElement(N.b,{d:"flex",alignItems:"center"},"request"===t?o?r.a.createElement(N.a,{icon:"check-circle",color:"green.500"}):r.a.createElement(N.a,{icon:"warning",color:"orange.500"}):0===c?r.a.createElement(N.a,{icon:"check-circle",color:"green.500"}):r.a.createElement(N.a,{icon:"warning",color:"orange.500"}),n,"request"===t?r.a.createElement(I.a,{variantColor:o?"green":"orange",ml:"2"},c," /",l):r.a.createElement(I.a,{variantColor:0===c?"green":"orange",ml:"2"},"".concat(c," left")))},D=function(e){var a=e.items,t=e.type;return r.a.createElement(O.a,{border:"2px",rounded:"lg",borderColor:"cyan.400",p:"4",mb:"2"},r.a.createElement(y.a,{fontSize:"sm"},"request"===t?"Need:":"Giving:"),r.a.createElement(N.c,{spacing:3,ml:"2"},a.map((function(e,a){return r.a.createElement(F,{key:a,item:e,type:t})}))),e.children)},R=t(325),P=function(e){var a=e.tags;return r.a.createElement(E.a,{align:"center",my:"2"},r.a.createElement(y.a,{fontSize:"sm",mr:"2"},"Tags:"),r.a.createElement(j.a,{spacing:1,isInline:!0},a.map((function(e,a){return r.a.createElement(R.a,{key:a,size:"sm"},e)}))))},L=t(38),T=t(187),W=t(196),_=t(151),A=t(23),B=t.n(A),M=t(339),V=function(e){var a=e.message,t=Object(M.a)();return Object(n.useEffect)((function(){a&&t(a)}),[t,a]),r.a.createElement(r.a.Fragment,null)},J=function(e){var a=e.postId,t=e.likers,c=Object(n.useContext)(fa),l=Object(m.a)(c,1)[0],o=l.user,u=l.token,d=o._id,f=o.name,b=o.username,p=Object(n.useState)(!1),g=Object(m.a)(p,2),h=g[0],v=g[1],y=Object(n.useState)(!1),j=Object(m.a)(y,2),x=j[0],C=j[1],S=Object(n.useState)(),k=Object(m.a)(S,2),q=k[0],z=k[1],N=Object(n.useState)(t.length),I=Object(m.a)(N,2),F=I[0],D=I[1],R=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,B.a.patch("/api/posts/".concat(a,"/likes"),{userId:d,name:f,username:b},{headers:{Authorization:"Bearer "+u}});case 4:D((function(e){return h?e-1:e+1})),v(!h),C(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),z({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=t.find((function(e){return e._id===d}));v(e)}),[t,d]),r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{message:q}),r.a.createElement(E.a,{align:"center"},r.a.createElement(w.a,{variant:"ghost",icon:h?_.a:_.b,rounded:"full",size:"lg",onClick:R,color:h?"red.800":"",isLoading:x}),r.a.createElement(O.a,{visibility:0===F?"hidden":"visible"},F)))},U=t(327),G=function(){return r.a.createElement(O.a,{p:"5",mb:"4",shadow:"sm",bg:"white",rounded:"lg",pos:"relative"},r.a.createElement(E.a,{align:"center",mb:"2"},r.a.createElement(U.a,{h:"12",w:"12",rounded:"full",mr:"4"}),r.a.createElement(E.a,{flexDirection:"column"},r.a.createElement(U.a,{h:"4",w:"64",my:"1"}),r.a.createElement(U.a,{h:"4",w:"40",my:"1"}),r.a.createElement(U.a,{h:"4",w:"20",my:"1"}))),r.a.createElement(O.a,{my:"4"},r.a.createElement(U.a,{h:"4",my:"1"}),r.a.createElement(U.a,{h:"4",my:"1"}),r.a.createElement(U.a,{h:"4",my:"1"}),r.a.createElement(U.a,{h:"4",my:"1"})),r.a.createElement(U.a,{h:"24",my:"2"}),r.a.createElement(U.a,{h:"6",w:"32",my:"2"}))},H=t(15),Y=t(11),$=t(25),Q=t(99),K=t(328),X=t(100),Z=t(329),ee=function(e){var a=e.label,t=e.name,n=Object($.a)(e,["label","name"]);return r.a.createElement(H.a,{name:t},(function(e){var c=e.field,l=e.form;return r.a.createElement(Q.a,{isInvalid:l.errors[t]&&l.touched[t],mb:"2"},r.a.createElement(K.a,{htmlFor:t},a),r.a.createElement(X.a,Object.assign({id:t},n,c)),r.a.createElement(Z.a,null,l.errors[t]))}))},ae=t(330),te=function(e){var a=e.label,t=e.name,n=Object($.a)(e,["label","name"]);return r.a.createElement(H.a,{name:t},(function(e){var c=e.field,l=e.form;return r.a.createElement(Q.a,{isInvalid:l.errors[t]&&l.touched[t]},r.a.createElement(K.a,{htmlFor:t},a),r.a.createElement(ae.a,Object.assign({id:t},n,c)),r.a.createElement(Z.a,null,l.errors[t]))}))},ne=t(331),re=t(343),ce=function(e){var a=e.label,t=e.name,n=Object($.a)(e,["label","name"]);return r.a.createElement(H.a,{name:t},(function(e){var c=e.field,l=e.form;return r.a.createElement(Q.a,{isInvalid:l.errors[t]&&l.touched[t]},r.a.createElement(K.a,{htmlFor:t},a),r.a.createElement(ne.a,Object.assign({id:t,isInline:!0},n,c),r.a.createElement(re.a,{value:"donation"},"Donation"),r.a.createElement(re.a,{value:"request"},"Request")),r.a.createElement(Z.a,null,l.errors[t]))}))},le=t(342),oe=function(e){var a=e.label,t=e.name,n=Object($.a)(e,["label","name"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{htmlFor:t},a),r.a.createElement(H.b,{name:t},(function(e){var a=e.push,c=e.remove,l=e.form.values.items;return r.a.createElement("div",null,l.map((function(e,a){return r.a.createElement(O.a,{key:a,bg:"cyan.100",p:"4",rounded:"lg",mb:"2"},r.a.createElement(H.a,{name:"".concat(t,"[").concat(a,"].name")},(function(e){var c=e.field,l=e.form;return r.a.createElement(Q.a,{isInvalid:l.errors[t]&&l.touched[t]&&l.errors[t][a]&&l.touched[t][a]&&l.errors[t][a].name&&l.touched[t][a].name},r.a.createElement(K.a,{htmlFor:"".concat(t,".").concat(a,".name")},"Item Name"),r.a.createElement(X.a,Object.assign({id:"".concat(t,".").concat(a,".name")},n,c)),r.a.createElement(Z.a,null,l.errors[t]&&l.errors[t][a]&&l.errors[t][a].name," "))})),r.a.createElement(H.a,{name:"".concat(t,"[").concat(a,"].total")},(function(e){var c=e.field,l=e.form;return r.a.createElement(Q.a,{isInvalid:l.errors[t]&&l.touched[t]&&l.errors[t][a]&&l.touched[t][a]&&l.errors[t][a].quantity&&l.touched[t][a].quantity},r.a.createElement(K.a,{htmlFor:"".concat(t,".").concat(a,".total")},"Quantity"),r.a.createElement(le.a,Object.assign({id:"".concat(t,".").concat(a,".total"),type:"number"},n,c,{onChange:function(e){return l.setFieldValue("".concat(t,".").concat(a,".total"),e)},onBlur:function(e){l.setFieldTouched("".concat(t,".").concat(a,".total"),!0)}})),r.a.createElement(Z.a,null,l.errors[t]&&l.errors[t][a]&&l.errors[t][a].quantity," "))})),a>0&&r.a.createElement(E.a,{justify:"flex-end",mt:"2"},r.a.createElement(C.a,{size:"sm",variantColor:"red",leftIcon:"minus",onClick:function(){return c(a)}},"Remove Item")))})),r.a.createElement(C.a,{size:"sm",my:"2",mr:"2",leftIcon:"add",onClick:function(){return a({name:"",total:"",amount:0})}},"Add Item"))})))},ie=function(e){var a=e.label,t=e.name,n=Object($.a)(e,["label","name"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{htmlFor:t},a),r.a.createElement(H.b,{name:t},(function(e){var a=e.push,c=e.remove,l=e.form.values.tags;return r.a.createElement("div",null,l.map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement(H.a,{name:"".concat(t,"[").concat(a,"]")},(function(e){var c=e.field,l=e.form;return r.a.createElement(Q.a,{mt:"2",ml:"2",isInvalid:l.errors[t]&&l.touched[t]&&l.errors[t][a]&&l.touched[t][a]},r.a.createElement(X.a,Object.assign({id:"".concat(t,"[").concat(a,"]")},n,c)),r.a.createElement(Z.a,null,l.errors[t]&&l.errors[t][a]," "))})),a>0&&r.a.createElement(E.a,{justify:"flex-end",mt:"2"},r.a.createElement(C.a,{size:"sm",variantColor:"red",leftIcon:"minus",onClick:function(){return c(a)}},"Remove Tag")))})),r.a.createElement(C.a,{size:"sm",my:"2",mr:"2",leftIcon:"add",onClick:function(){return a("")}},"Add Tag"))})))},se=function(e){var a=e.label,t=e.name,n=e.form,c=Object($.a)(e,["label","name","form"]),l=n.setFieldValue;return r.a.createElement(Q.a,{isInvalid:n.errors[t]&&n.touched[t]},r.a.createElement(K.a,{htmlFor:t},a),r.a.createElement("input",Object.assign({id:t,onChange:function(e){l("images",e.currentTarget.files)}},c)),r.a.createElement(Z.a,null,n.errors[t]))},me=t(332),ue=t(153),de=function(e){var a=e.label,t=e.name,n=Object($.a)(e,["label","name"]),c=r.a.useState(!1),l=Object(m.a)(c,2),o=l[0],i=l[1],s=function(){return i(!o)};return r.a.createElement(H.a,{name:t},(function(e){var c=e.field,l=e.form;return r.a.createElement(Q.a,{isInvalid:l.errors[t]&&l.touched[t],mb:"2"},a&&r.a.createElement(K.a,{htmlFor:t},a),r.a.createElement(me.a,{size:"md"},r.a.createElement(X.a,Object.assign({pr:"4.5rem",type:o?"text":"password",placeholder:"Enter password",id:t},n,c)),r.a.createElement(ue.b,{width:"4.5rem"},r.a.createElement(C.a,{h:"1.75rem",size:"sm",onClick:s},o?"Hide":"Show"))),r.a.createElement(Z.a,null,l.errors[t]))}))},fe=function(e){var a=e.label,t=e.name,n=e.index,c=e.amount,l=Object($.a)(e,["label","name","index","amount"]);return r.a.createElement(H.a,{name:"".concat(t,"[").concat(n,"].donor.amountDonated")},(function(e){var o=e.field,i=e.form;return r.a.createElement(Q.a,{isInvalid:i.errors[t]&&i.touched[t]&&i.errors[t][n]&&i.touched[t][n]&&(i.errors[t][n].donor&&i.touched[t][n].donor&&i.errors[t][n].donor.amountDonated&&i.touched[t][n].donor.amountDonated||i.errors[t][n].amount&&i.touched[t][n].donor.amountDonated),mb:"4"},r.a.createElement(K.a,{htmlFor:"".concat(t,"[").concat(n,"].donor.amountDonated")},a),r.a.createElement(le.a,Object.assign({id:"".concat(t,"[").concat(n,"].donor.amountDonated")},l,o,{onChange:function(e){i.setFieldValue("".concat(t,"[").concat(n,"].amount"),e+c),i.setFieldValue("".concat(t,"[").concat(n,"].donor.amountDonated"),e),i.setFieldValue("totalDonation",i.values.totalDonation+e)},onBlur:function(e){i.setFieldTouched("".concat(t,"[").concat(n,"].donor.amountDonated"),!0)}})),r.a.createElement(Z.a,null,i.errors[t]&&i.errors[t][n]&&(i.errors[t][n].donor&&i.errors[t][n].donor.amountDonated||i.errors[t][n].amount)))}))},be=t(192),pe=t.n(be),Ee=function(e){var a=e.label,t=e.name,n=Object($.a)(e,["label","name"]);return r.a.createElement(H.a,{name:t},(function(e){var c=e.field,l=e.form;return r.a.createElement(Q.a,{isInvalid:l.errors[t]&&l.touched[t],mb:"2"},r.a.createElement(K.a,{htmlFor:t},a),r.a.createElement("br",null),r.a.createElement(pe.a,Object.assign({},c,n,{id:t,selected:l.values[t],onChange:function(e){return l.setFieldValue(t,e)},showTimeSelect:!0,dateFormat:"MM/dd/yyyy h:mm aa",customInput:r.a.createElement(X.a,null)})),r.a.createElement(Z.a,null,l.errors[t]))}))},ge=function(e){var a=e.label,t=e.name,n=e.index,c=e.amount,l=Object($.a)(e,["label","name","index","amount"]);return r.a.createElement(H.a,{name:"".concat(t,"[").concat(n,"].amountRequested")},(function(e){var o=e.field,i=e.form;return r.a.createElement(Q.a,{isInvalid:i.errors[t]&&i.touched[t]&&i.errors[t][n]&&i.touched[t][n]&&(i.errors[t][n].amountRequested&&i.touched[t][n].amountRequested||i.errors[t][n].amount&&i.touched[t][n].amountRequested),mb:"4"},r.a.createElement(K.a,{htmlFor:"".concat(t,"[").concat(n,"].amountRequested")},a),r.a.createElement(le.a,Object.assign({id:"".concat(t,"[").concat(n,"].amountRequested")},l,o,{onChange:function(e){i.setFieldValue("".concat(t,"[").concat(n,"].amount"),c-e),i.setFieldValue("".concat(t,"[").concat(n,"].amountRequested"),e),i.setFieldValue("totalRequest",i.values.totalRequest+e)},onBlur:function(e){i.setFieldTouched("".concat(t,"[").concat(n,"].amountRequested"),!0)}})),r.a.createElement(Z.a,null,i.errors[t]&&i.errors[t][n]&&(i.errors[t][n].amountRequested||i.errors[t][n].amount)))}))},he=function(e){var a=e.label,t=e.name,n=e.form,c=Object($.a)(e,["label","name","form"]),l=n.setFieldValue;return r.a.createElement(Q.a,{isInvalid:n.errors[t]&&n.touched[t]},r.a.createElement(K.a,{htmlFor:t},a),r.a.createElement("input",Object.assign({id:t,onChange:function(e){l(t,e.currentTarget.files[0])}},c)),r.a.createElement(Z.a,null,n.errors[t]))},ve=function(e){var a=e.control,t=Object($.a)(e,["control"]);switch(a){case"input":return r.a.createElement(ee,t);case"textarea":return r.a.createElement(te,t);case"radio":return r.a.createElement(ce,t);case"date":return r.a.createElement(Ee,t);case"items":return r.a.createElement(oe,t);case"tags":return r.a.createElement(ie,t);case"images":return r.a.createElement(se,t);case"image":return r.a.createElement(he,t);case"password":return r.a.createElement(de,t);case"numeric":return r.a.createElement(fe,t);case"request":return r.a.createElement(ge,t);default:return null}},Oe=function(e){var a=e.onClose,t=e.handleIsSubmitting,c=e.addComment,l=e.postId,o=Object(n.useContext)(fa),d=Object(m.a)(o,1)[0],f=d.user,b=d.token,p=f._id,E=Object(n.useState)(),g=Object(m.a)(E,2),h=g[0],v=g[1],O={userId:p,content:""},y=Y.e().shape({content:Y.g().required("Required")}),j=function(){var e=Object(s.a)(i.a.mark((function e(n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,B.a.patch("/api/posts/".concat(l,"/comments"),n,{headers:{Authorization:"Bearer "+b}});case 4:r=e.sent,o=r.data,c&&c(Object(u.a)(Object(u.a)({},o.comment),{},{user:Object(u.a)({},o.user)})),t(!1),a(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),v({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{message:h}),r.a.createElement(H.d,{initialValues:O,validationSchema:y,onSubmit:j},(function(e){return r.a.createElement("div",null,r.a.createElement(H.c,{id:"commentForm"},r.a.createElement(ve,{control:"textarea",label:"Comment",name:"content"})))})))},ye=function(e){var a=e.isOpen,t=e.onClose,c=e.addComment,l=e.postId,o=Object(n.useState)(!1),i=Object(m.a)(o,2),s=i[0],u=i[1];return r.a.createElement(x.a,{isOpen:a,onClose:t},r.a.createElement(x.g,null),r.a.createElement(x.d,null,r.a.createElement(x.f,null),r.a.createElement(x.c,null),r.a.createElement(x.b,null,r.a.createElement(Oe,{onClose:t,handleIsSubmitting:u,addComment:c,postId:l})),r.a.createElement(x.e,null,r.a.createElement(C.a,{variant:"ghost",mr:3,onClick:function(){t(),u(!1)}},"Cancel"),r.a.createElement(C.a,{variantColor:"cyan",type:"submit",isLoading:s,form:"commentForm"},"Comment"))))},je=function(e){var a=e.onClose,t=e.handleIsSubmitting,c=e.items,l=e.postId,o=Object(n.useContext)(fa),u=Object(m.a)(o,1)[0],d=u.user,f=u.token,b=d._id,p=Object(n.useState)(),E=Object(m.a)(p,2),g=E[0],h=E[1],v={items:c.map((function(e){return{itemId:e._id,name:e.name,amount:e.amount,total:e.total,amountRequested:0}})),reason:"",userId:b,totalRequest:0},O=Y.e().shape({items:Y.a().of(Y.e().shape({name:Y.g(),total:Y.d(),amount:Y.d().min(0,"Too Much"),amountRequested:Y.d()})).required("Required"),reason:Y.g().required("Required"),totalRequest:Y.d().min(1,"Request at least one item")}),y=function(){var e=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,B.a.patch("/api/posts/".concat(l,"/request"),n,{headers:{Authorization:"Bearer "+f}});case 4:t(!1),a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{message:g}),r.a.createElement(H.d,{initialValues:v,validationSchema:O,onSubmit:y},(function(e){return r.a.createElement("div",null,r.a.createElement(H.c,{id:"requestForm"},v.items.map((function(e,a){return e.amount>0?r.a.createElement(ve,{control:"request",label:e.name,index:a,amount:e.amount,name:"items",type:"number"}):null})),r.a.createElement(ve,{control:"textarea",label:"Reason",name:"reason"})))})))},xe=function(e){var a=e.isOpen,t=e.onClose,c=e.postId,l=e.items,o=Object(n.useState)(!1),i=Object(m.a)(o,2),s=i[0],u=i[1];return r.a.createElement(x.a,{isOpen:a,onClose:t},r.a.createElement(x.g,null),r.a.createElement(x.d,null,r.a.createElement(x.f,null,"Request"),r.a.createElement(x.c,null),r.a.createElement(x.b,null,r.a.createElement(je,{onClose:t,handleIsSubmitting:u,items:l,postId:c})),r.a.createElement(x.e,null,r.a.createElement(C.a,{variant:"ghost",mr:3,onClick:function(){t(),u(!1)}},"Cancel"),r.a.createElement(C.a,{variantColor:"cyan",type:"submit",isLoading:s,form:"requestForm"},"Request"))))},Ce=function(e){var a=e.onClose,t=e.handleIsSubmitting,c=e.items,l=e.donate,o=e.postId,d=Object(n.useContext)(fa),f=Object(m.a)(d,1)[0],b=f.user,p=f.token,E=b._id,g=Object(n.useState)(),h=Object(m.a)(g,2),v=h[0],O=h[1],y={items:c.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{donor:{user:E,amountDonated:0}})})),totalDonation:0,userId:E},j=function(){var e=Object(s.a)(i.a.mark((function e(n){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,B.a.put("/api/posts/".concat(o,"/donate"),n,{headers:{Authorization:"Bearer "+p}});case 4:r=e.sent,c=r.data,l(c.items),t(!1),a(),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),O({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0}),t(!1),a();case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{message:v}),r.a.createElement(H.d,{initialValues:y,validationSchema:function(e){return Y.e().shape({items:Y.a().of(Y.e().shape({name:Y.g(),total:Y.d(),amount:Y.d().max(Y.f("total"),"Too Much"),donor:Y.e().shape({userId:Y.g(),amountDonated:Y.d(),date:Y.b()})})).required("Required"),totalDonation:Y.d().min(1,"Donate at least one item")})},onSubmit:j},(function(e){return console.log("Formik  Props: ",e),r.a.createElement("div",null,r.a.createElement(H.c,{id:"donateForm"},y.items.map((function(e,a){return e.amount!==e.total?r.a.createElement(ve,{control:"numeric",label:e.name,index:a,amount:e.amount,name:"items",type:"number"}):null}))),r.a.createElement(Q.a,{isInvalid:e.errors.totalDonation},r.a.createElement(Z.a,null,e.errors.totalDonation)))})))},we=function(e){var a=e.isOpen,t=e.onClose,c=e.items,l=e.donate,o=e.postId,i=Object(n.useState)(!1),s=Object(m.a)(i,2),u=s[0],d=s[1];return r.a.createElement(x.a,{isOpen:a,onClose:t},r.a.createElement(x.g,null),r.a.createElement(x.d,null,r.a.createElement(x.f,null,"Donate"),r.a.createElement(x.c,null),r.a.createElement(x.b,null,r.a.createElement(Ce,{onClose:t,handleIsSubmitting:d,items:c,donate:l,postId:o})),r.a.createElement(x.e,null,r.a.createElement(C.a,{variant:"ghost",mr:3,onClick:function(){t(),d(!1)}},"Cancel"),r.a.createElement(C.a,{variantColor:"cyan",type:"submit",isLoading:u,form:"donateForm"},"Donate"))))},Se=t(334),ke=function(e){var a=e.likers,t=0===a.length,n=Object(v.a)(),c=n.isOpen,l=n.onOpen,o=n.onClose;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{align:"center",d:t?"none":"flex"},r.a.createElement(C.a,{variant:"ghost",px:"1",onClick:l},r.a.createElement(y.a,{fontSize:"sm",mr:"2"},"Likers:"),r.a.createElement(Se.a,{size:"sm",max:3},a.map((function(e){return e.name?r.a.createElement(k.a,{key:e._id,src:e.avatar&&e.avatar.url,name:"".concat(e.name.firstName," ").concat(e.name.lastName)}):null}))))),r.a.createElement(x.a,{isOpen:c,onClose:o},r.a.createElement(x.g,null),r.a.createElement(x.d,null,r.a.createElement(x.f,null,"Likers"),r.a.createElement(x.c,null),r.a.createElement(x.b,null,a.map((function(e){return e.name?r.a.createElement(r.a.Fragment,{key:e._id},r.a.createElement(E.a,{align:"center"},r.a.createElement(q.b,{to:"/".concat(e.username)},r.a.createElement(k.a,{size:"sm",mr:"2",src:e.avatar&&e.avatar.url,name:"".concat(e.name.firstName," ").concat(e.name.lastName)})),r.a.createElement(O.a,null,r.a.createElement(y.a,{fontSize:"sm",fontWeight:"semibold",mr:"1"},"".concat(e.name.firstName," ").concat(e.name.lastName)),r.a.createElement(y.a,{fontSize:"sm",color:"gray.700"},"@".concat(e.username)))),r.a.createElement(W.a,null)):null}))))))},qe=t(32),ze=function(e){var a=e.items,t=e.type,c=Object(n.useState)([]),l=Object(m.a)(c,2),o=l[0],i=l[1],s=0===o.length,d=Object(v.a)(),f=d.isOpen,b=d.onOpen,p=d.onClose;return Object(n.useEffect)((function(){var e=[];a.forEach((function(a){a.donor.forEach((function(t){0!==t.amountDonated&&e.push(Object(u.a)(Object(u.a)({},t.user),{},{amountDonated:t.amountDonated,itemName:a.name}))}))})),a.forEach((function(a){a.donee.forEach((function(t){0!==t.amountRequested&&e.push(Object(u.a)(Object(u.a)({},t.user),{},{amountRequested:t.amountRequested,itemName:a.name}))}))})),i((function(a){return[].concat(e,Object(qe.a)(a))}))}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{align:"center",d:s?"none":"flex"},r.a.createElement(C.a,{variant:"ghost",px:"1",onClick:b},r.a.createElement(y.a,{fontSize:"sm",mr:"2"},"request"===t?"Donor":"Donee",":"),r.a.createElement(Se.a,{size:"sm",max:3},o.map((function(e,a){if(!e.name)return null;var t=e.name.firstName+" "+e.name.lastName;return r.a.createElement(k.a,{key:a,src:e.avatar&&e.avatar.url,name:t})}))))),r.a.createElement(x.a,{isOpen:f,onClose:p},r.a.createElement(x.g,null),r.a.createElement(x.d,null,r.a.createElement(x.f,null,"request"===t?"Donor":"Donee"),r.a.createElement(x.c,null),r.a.createElement(x.b,null,o.map((function(e,a){return e.name?r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(E.a,{align:"center",mb:"1"},r.a.createElement(q.b,{to:"/".concat(e.username)},r.a.createElement(k.a,{size:"sm",mr:"2",src:e.avatar&&e.avatar.url,name:"".concat(e.name.firstName," ").concat(e.name.lastName)})),r.a.createElement(O.a,null,r.a.createElement(y.a,{fontSize:"sm",fontWeight:"semibold",mr:"1"},"".concat(e.name.firstName," ").concat(e.name.lastName)),r.a.createElement(y.a,{fontSize:"sm",color:"gray.700"},"@".concat(e.username)))),r.a.createElement(y.a,{fontSize:"sm"},"Item: ".concat(e.itemName)),r.a.createElement(y.a,{fontSize:"sm"},"donation"===t?"Amount Requested: ".concat(e.amountRequested):"Amount Donated: ".concat(e.amountDonated)),r.a.createElement(W.a,null)):null}))))))},Ne=function(e){var a=e.data,t=e.addComment,c=e.isLinked,l=e.isLoading,o=e.isPostSection,i=a._id,s=a.user,u=a.type,d=a.title,f=a.deadline,b=a.description,p=a.items,g=a.tags,h=a.likers,j=a.status,x=a.images,C=a.datePosted,k=a.comments,N=s._id,F=s.name,R=s.username,_=s.avatar,A=F.firstName+" "+F.lastName,B=Object(n.useContext)(fa),M=Object(m.a)(B,1)[0].user._id,V=Object(v.a)(),U=V.isOpen,H=V.onOpen,Y=V.onClose,$=Object(v.a)(),Q=$.isOpen,K=$.onOpen,X=$.onClose,Z=Object(n.useState)([]),ee=Object(m.a)(Z,2),ae=ee[0],te=ee[1],ne=Object(n.useState)(""),re=Object(m.a)(ne,2),ce=re[0],le=re[1],oe=new Date,ie=new Date(f).getTime()-oe.getTime(),se=Math.ceil(ie/864e5),me=Math.ceil(ie/36e5),ue=Math.ceil(ie/6e4);return Object(n.useEffect)((function(){te(p),le(j)}),[p,j]),r.a.createElement("div",null,l?r.a.createElement(G,null):r.a.createElement(L.a,{p:"5",pb:"2",mb:"4",bg:"white",shadow:"sm",rounded:"lg",pos:"relative",_hover:{borderColor:"gray.200",bg:"gray.50"}},c?r.a.createElement(O.a,{as:q.b,to:"/".concat(R,"/post/").concat(i),w:"full",h:"full",pos:"absolute",top:"0",left:"0",bottom:"0",right:"0"}):"",r.a.createElement(z,{avatar:_,title:d,author:A,deadline:f,status:ce,username:R,datePosted:C}),r.a.createElement(O.a,{my:"4"},r.a.createElement(y.a,{fontWeight:"extrabold",fontFamily:"heading"},d),r.a.createElement(O.a,null,r.a.createElement(I.a,{variantColor:"PENDING"===ce?"pink":"UNFULFILLED"===ce?"yellow":"green"},"PENDING"!==ce?ce:me<=1?"".concat(ue," mins left"):se<=1?"".concat(me," hrs left"):"".concat(se," days left"))),r.a.createElement(y.a,{mt:"4",fontSize:"sm"},b)),r.a.createElement(D,{items:ae,type:u},x&&o?x.map((function(e){return r.a.createElement(T.a,{src:e.url,w:"full",h:"64",mt:"2",objectFit:"cover"})})):x&&0!==x.length?r.a.createElement(T.a,{src:x[0].url,w:"full",h:"64",mt:"2",objectFit:"cover"}):""),r.a.createElement(P,{tags:g}),r.a.createElement(W.a,null),r.a.createElement(E.a,null,r.a.createElement(ke,{likers:h,type:u}),r.a.createElement(ze,{items:ae,type:u})),r.a.createElement(W.a,null),r.a.createElement(E.a,{justify:"space-around",pt:"2"},r.a.createElement(w.a,{isDisabled:"PENDING"!==ce||N===M,size:"lg",variant:"ghost",isRound:!0,icon:"donation"===u?S.p:S.h,onClick:K}),r.a.createElement(E.a,{align:"center"},r.a.createElement(w.a,{variant:"ghost",size:"lg",rounded:"full",icon:S.e,onClick:H}),r.a.createElement(O.a,{visibility:0===k.length?"hidden":"visible"},k.length)),r.a.createElement(J,{postId:i,likers:h})),e.children),"donation"===u?r.a.createElement(xe,{isOpen:Q,onClose:X,items:ae,postId:i}):r.a.createElement(we,{isOpen:Q,onClose:X,items:ae,donate:function(e){te(e),e.every((function(e){return e.total-e.amount===0}))&&le("FULFILLED")},postId:i}),r.a.createElement(ye,{isOpen:U,onClose:Y,addComment:t,postId:i}))},Ie=function(e){var a=e.onClose,t=e.handleIsSubmitting,c=e.createPost,l=Object(n.useContext)(fa),o=Object(m.a)(l,1)[0],d=o.user,f=o.token,b=Object(n.useState)(),p=Object(m.a)(b,2),E=p[0],g=p[1],h={userId:d._id,title:"",description:"",type:"donation",location:"",deadline:new Date,items:[{name:"",total:1,amount:0}],tags:[""],images:[],status:"PENDING"},v=Y.e().shape({title:Y.g().required("Required"),description:Y.g().required("Required"),type:Y.g().required("Required"),location:Y.g().required("Required"),deadline:Y.b().min(h.deadline,"Invalid Date"),items:Y.a().of(Y.e().shape({name:Y.g().required("Required"),total:Y.d().min(1,"Minimum of one item").required("Required")})).required("Required"),tags:Y.a().of(Y.g().required("Required")).required("Required"),images:Y.c().test("length","Only 3 images are allowed per post",(function(e){return e&&e.length<=3}))}),O=function(){var e=Object(s.a)(i.a.mark((function e(n){var r,l,o,s,m,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l in t(!0),r=new FormData,n)if("items"===l)r.append(l,JSON.stringify(n[l]));else if("name"===l)r.append(l,JSON.stringify(n[l]));else if("tags"===l)r.append(l,JSON.stringify(n[l]));else if("images"===l)for(o=n[l].length,s=0;s<o;s++)r.append(l,n[l][s]);else r.append(l,n[l]);return e.prev=3,e.next=6,B.a.post("/api/posts",r,{headers:{Authorization:"Bearer "+f,"Content-Type":"multipart/form-data; boundary=<calculated when request is sent>"}});case 6:m=e.sent,d=m.data,c(Object(u.a)(Object(u.a)({},d.post),{},{user:Object(u.a)({},d.user)})),t(!1),a(),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(3),g({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0}),t(!1),a();case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{message:E}),r.a.createElement(H.d,{initialValues:h,validationSchema:v,onSubmit:O},(function(e){return r.a.createElement("div",null,r.a.createElement(H.c,{id:"postForm"},r.a.createElement(ve,{control:"radio",label:"Type",name:"type"}),r.a.createElement(ve,{control:"input",type:"text",label:"Title",name:"title"}),r.a.createElement(ve,{control:"textarea",label:"Description",name:"description"}),r.a.createElement(ve,{control:"input",type:"text",label:"Location",name:"location"}),r.a.createElement(ve,{control:"date",label:"Deadline",name:"deadline"}),r.a.createElement(ve,{control:"items",label:"Items",name:"items"}),r.a.createElement(ve,{control:"tags",label:"Tags",name:"tags"}),r.a.createElement(ve,{control:"images",type:"file",name:"images",label:"Add Image",multiple:"multiple",accept:"image/*",form:e})))})))},Fe=function(e){var a=e.posts,t=e.createPost,c=e.isLoading,l=Object(n.useState)(!1),o=Object(m.a)(l,2),i=o[0],s=o[1],u=Object(v.a)(),d=u.isOpen,f=u.onOpen,b=u.onClose;return r.a.createElement(r.a.Fragment,null,0===a.length?r.a.createElement(E.a,{align:"center",py:"8",flexDirection:"column"},r.a.createElement(O.a,{as:S.l,size:"20"}),r.a.createElement(y.a,{fontWeight:"bold",fontSize:"lg"},"Oooops!"),r.a.createElement(y.a,null,"Your feed is empty. Make a post now!")):r.a.createElement(j.a,{mb:{base:"16",md:"4"},px:{base:"0",sm:"4"}},a.map((function(e){return r.a.createElement(Ne,{key:e._id,data:e,isLinked:!0,isLoading:c})}))),r.a.createElement(x.a,{isOpen:d,onClose:b},r.a.createElement(x.g,null),r.a.createElement(x.d,null,r.a.createElement(x.f,null,"Create Post"),r.a.createElement(x.c,null),r.a.createElement(x.b,null,r.a.createElement(Ie,{onClose:b,handleIsSubmitting:s,createPost:t})),r.a.createElement(x.e,null,r.a.createElement(C.a,{variant:"ghost",mr:3,onClick:b},"Cancel"),r.a.createElement(C.a,{variantColor:"cyan",type:"submit",isLoading:i,form:"postForm"},"Post")))),r.a.createElement(w.a,{pos:"fixed",bottom:{base:"2rem",md:"8"},icon:"add",right:{base:"0",md:"8"},left:{base:"0",md:"initial"},mx:{base:"auto",md:"initial"},zIndex:"sticky",isRound:!0,variant:"solid",variantColor:"secondary","aria-label":"Post",shadow:"md",size:"lg",w:"16",h:"16",onClick:f}))},De=function(){return r.a.createElement(E.a,null,r.a.createElement(E.a,null,r.a.createElement(O.a,{as:S.n,size:"6",color:"primary.600"}),r.a.createElement(y.a,{color:"gray.800",fontFamily:"Ubuntu",fontSize:"md",ml:"1"},"Logout")))},Re=t(335),Pe=t(340),Le=function(e){var a=e.onClose,t=e.handleIsSubmitting,c=Object(n.useContext)(fa),l=Object(m.a)(c,1)[0],o=l.user,u=l.token,d=o._id,f=Object(n.useState)(),b=Object(m.a)(f,2),p=b[0],E=b[1],g={userId:d,oldPassword:"",newPassword:"",newPasswordCopy:""},h=Y.e().shape({oldPassword:Y.g().required("Required"),newPassword:Y.g().required("Required"),newPasswordCopy:Y.g().oneOf([Y.f("newPassword")],"Password does not match").required("Required")}),v=function(){var e=Object(s.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,B.a.patch("/api/users/".concat(d,"/changePassword"),n,{headers:{Authorization:"Bearer "+u}});case 4:r=e.sent,r.data,t(!1),a(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),E({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{message:p}),r.a.createElement(H.d,{initialValues:g,validationSchema:h,onSubmit:v},(function(e){return r.a.createElement("div",null,r.a.createElement(H.c,{id:"changePasswordForm"},r.a.createElement(ve,{control:"password",label:"Old Password",name:"oldPassword"}),r.a.createElement(ve,{control:"password",label:"New Password",name:"newPassword"}),r.a.createElement(ve,{control:"password",name:"newPasswordCopy",placeholder:"Enter your new password again"})))})))},Te=function(e){var a=e.title,t=Object(n.useContext)(fa),c=Object(m.a)(t,2),l=c[0],o=c[1],u=l.user,d=l.token,f=u.avatar,b=u.name,p=b.firstName+" "+b.lastName,g=Object(v.a)(),h=g.isOpen,j=g.onOpen,w=g.onClose,S=Object(n.useState)(!1),z=Object(m.a)(S,2),N=z[0],I=z[1],F=Object(n.useState)(),D=Object(m.a)(F,2),R=D[0],P=D[1],L=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.post("/api/logout",{},{headers:{Authorization:"Bearer "+d}});case 3:localStorage.removeItem("user"),o(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),P({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{message:R}),r.a.createElement(Re.a,{h:"16",bg:"primary.600",zIndex:"banner",templateColumns:{base:"repeat(2, 1fr)",md:"repeat(3, 1fr)"}},r.a.createElement(O.a,{d:{base:"none",md:"block"}}),r.a.createElement(y.a,{fontFamily:"Ubuntu",fontSize:["2xl","4xl"],fontWeight:"bold",color:"cyan.50",margin:"auto"},r.a.createElement(q.b,{to:"/"},a)),r.a.createElement(E.a,{alignItems:"center",justify:"flex-end",mr:"4"},r.a.createElement(Pe.e,null,r.a.createElement(Pe.a,{as:C.a,variantColor:"black",px:"2",variant:"solid",rightIcon:"chevron-down",_hover:{bg:"cyan.500"},_active:{bg:"cyan.400"}},r.a.createElement(k.a,{src:f&&f.url,size:"sm",name:p,mr:{base:"0",lg:"2"}}),r.a.createElement(y.a,{color:"cyan.50",fontFamily:"Ubuntu",fontSize:"sm",d:{base:"none",lg:"block"}},p)),r.a.createElement(Pe.d,{zIndex:"popover"},r.a.createElement(Pe.c,{leftIcon:"add",onClick:j},"Change Password"),r.a.createElement(Pe.b,null),r.a.createElement(Pe.c,{as:q.b,to:"/",onClick:L},r.a.createElement(De,null)))))),r.a.createElement(x.a,{isOpen:h,onClose:w},r.a.createElement(x.g,null),r.a.createElement(x.d,null,r.a.createElement(x.f,null,"Change Password"),r.a.createElement(x.c,null),r.a.createElement(x.b,null,r.a.createElement(Le,{onClose:w,handleIsSubmitting:I})),r.a.createElement(x.e,null,r.a.createElement(C.a,{variant:"ghost",mr:3,onClick:function(){w(),I(!1)}},"Cancel"),r.a.createElement(C.a,{variantColor:"cyan",type:"submit",isLoading:N,form:"changePasswordForm"},"Save")))))},We=function(){var e=Object(h.f)();return r.a.createElement(w.a,{variant:"ghost",variantColor:"cyan",icon:function(){return r.a.createElement(O.a,{as:S.a,size:"6"})},onClick:function(){return e.goBack()},mr:"2"})},_e=function(e){var a=e.title,t=e.hasBackButton;return r.a.createElement(E.a,{h:"16",zIndex:"sticky",align:"center",pl:"4",pos:"sticky",top:"0",bg:"gray.100"},t&&r.a.createElement(We,null),r.a.createElement(O.a,{as:e.icon,size:"6",color:"primary.600",mr:"2"}),r.a.createElement(y.a,{fontFamily:"Ubuntu",fontWeight:"semibold",fontSize:"2xl"},a))},Ae=r.a.createContext(null),Be=[{_id:"1",user:{name:{firstName:"",lastName:""},avatar:null,username:"",userId:1},avatar:null,title:"",name:{firstName:"",lastName:""},deadline:null,description:"",items:[],tags:[],likers:[],status:"",images:[]},{_id:"2",user:{name:{firstName:"",lastName:""},avatar:null,username:"",userId:2},avatar:null,title:"",name:{firstName:"",lastName:""},deadline:null,description:"",items:[],tags:[],likers:[],status:"",images:[]},{_id:"3",user:{name:{firstName:"",lastName:""},avatar:null,username:"",userId:3},avatar:null,title:"",name:{firstName:"",lastName:""},deadline:null,description:"",items:[],tags:[],likers:[],status:"",images:[]}],Me=function(e){var a=e.children,t=Object(n.useState)(Be),c=Object(m.a)(t,2),l=c[0],o=c[1],i=Object(n.useState)([]),s=Object(m.a)(i,2),u={post:[l,o],filteredPost:[s[0],s[1]]};return r.a.createElement(Ae.Provider,{value:u},a)},Ve=function(){var e=Object(n.useContext)(Ae).post,a=Object(m.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(!0),o=Object(m.a)(l,2),u=o[0],d=o[1],f=Object(n.useState)(),b=Object(m.a)(f,2),p=b[0],E=b[1];return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var a,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get("/api/posts");case 3:a=e.sent,t=a.data,c(t.response),d(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),E({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[c]),r.a.createElement(O.a,null,r.a.createElement(V,{message:p}),r.a.createElement(_e,{title:"Home",icon:S.m}),r.a.createElement(Fe,{posts:t,createPost:function(e){c((function(a){return[e].concat(Object(qe.a)(a))}))},isLoading:u}))},Je=function(e){return r.a.createElement(O.a,{d:{base:"none",md:"flex"},w:{lg:"xs"},h:"100vh",flexGrow:{base:0,md:1,lg:"0"},maxW:"xs",position:"sticky",top:"0",borderRight:"4px",color:"gray.400",flexDirection:"column",justifyContent:"space-between",px:"10",pt:"6",pb:"20"},e.children)},Ue=function(e){return r.a.createElement(O.a,{w:{md:"xl"},minW:"xs",maxW:"xl",flexGrow:{base:"1",md:"0"}},e.children)},Ge=function(e){var a=e.variant,t=Object($.a)(e,["variant"]),c=Object(n.useContext)(fa),l=Object(m.a)(c,1)[0].user.username;return"side"===a?r.a.createElement(E.a,Object.assign({flexDirection:"column",justifyContent:"space-around",h:"40vh"},t),r.a.createElement(q.c,{exact:!0,to:"/",activeclassname:"active"},r.a.createElement(E.a,{p:"2"},r.a.createElement(O.a,{ml:"4",as:S.m,size:"8",color:"primary.600"}),r.a.createElement(y.a,{color:"primary.600",fontWeight:"bold",fontFamily:"Ubuntu",fontSize:"xl",lineHeight:"tall",ml:"1"},"Home"))),r.a.createElement(E.a,{as:q.c,to:"/notification",p:"2",activeClassname:"active",rounded:"full"},r.a.createElement(O.a,{ml:"4",as:S.b,size:"8",color:"primary.600"}),r.a.createElement(y.a,{color:"primary.600",fontWeight:"bold",fontFamily:"Ubuntu",fontSize:"xl",lineHeight:"tall",ml:"1"},"Notification")),r.a.createElement(E.a,{as:q.c,to:"/avails",p:"2",activeClassname:"active",rounded:"full"},r.a.createElement(O.a,{ml:"4",as:S.o,size:"8",color:"primary.600"}),r.a.createElement(y.a,{color:"primary.600",fontWeight:"bold",fontFamily:"Ubuntu",fontSize:"xl",lineHeight:"tall",ml:"1"},"Avails")),r.a.createElement(q.c,{exact:!0,to:"/".concat(l),activeclassname:"active"},r.a.createElement(E.a,{p:"2"},r.a.createElement(O.a,{ml:"4",as:S.k,size:"8",color:"primary.600"}),r.a.createElement(y.a,{color:"primary.600",fontWeight:"bold",fontFamily:"Ubuntu",fontSize:"xl",lineHeight:"tall",ml:"1"},"Profile")))):r.a.createElement(E.a,Object.assign({pos:"fixed",bottom:"0",bg:"gray.50",justify:"space-evenly",w:"full",py:"2"},t),r.a.createElement(q.c,{exact:!0,to:"/",activeclassname:"active"},r.a.createElement(O.a,{p:"2",rounded:"lg"},r.a.createElement(O.a,{as:S.m,size:"8",color:"primary.600"}))),r.a.createElement(O.a,{as:q.c,to:"/avails",p:"2",rounded:"lg",activeClassname:"active"},r.a.createElement(O.a,{as:S.o,size:"8",color:"primary.600"})),r.a.createElement(O.a,{as:q.c,to:"/notification",p:"2",rounded:"lg",activeClassname:"active"},r.a.createElement(O.a,{as:S.b,size:"8",color:"primary.600"})),r.a.createElement(O.a,{as:q.c,to:"".concat(l),p:"2",rounded:"lg",activeClassname:"active"},r.a.createElement(O.a,{as:S.k,size:"8",color:"primary.600"})))},He=function(e){return r.a.createElement(O.a,{d:{base:"none",lg:"flex"},maxW:"xs",flexGrow:{base:"0",lg:"1"}},e.children)},Ye={avatar:null,author:"",title:"",name:{firstName:"",lastName:""},description:"",type:"donation",location:"",deadline:"",items:[],tags:[],images:[],comments:[],likers:[]},$e=function(e){e.match;var a=Object(h.g)().id,t=Object(n.useState)(Ye),c=Object(m.a)(t,2),l=c[0],o=c[1],d=Object(n.useState)([]),f=Object(m.a)(d,2),b=f[0],p=f[1],g=Object(n.useState)(!0),v=Object(m.a)(g,2),x=v[0],C=v[1],w=Object(n.useState)(),z=Object(m.a)(w,2),N=z[0],I=z[1];return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get("/api/posts/".concat(a));case 3:t=e.sent,n=t.data,o((function(e){return Object(u.a)(Object(u.a)({},e),n)})),p(n.comments),C(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),I({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),r.a.createElement("div",null,r.a.createElement(V,{message:N}),r.a.createElement(_e,{title:"Post",icon:S.r,hasBackButton:!0}),r.a.createElement(O.a,{px:{base:"0",md:"5"},mb:{base:"20",md:"2"}},x?r.a.createElement(G,null):r.a.createElement(Ne,{data:l,addComment:function(e){p((function(a){return[].concat(Object(qe.a)(a),[e])}))},isLinked:!1,isPostSection:!0},r.a.createElement(j.a,{mt:"2"},b.map((function(e){var a=e.user.name.firstName+" "+e.user.name.lastName;return r.a.createElement(O.a,{key:e._id,borderTop:"1px",borderColor:"gray.200",mb:"4",pt:"4"},r.a.createElement(E.a,{mb:"2"},r.a.createElement(q.b,{to:"/".concat(e.user.username)},r.a.createElement(k.a,{size:"md",name:a,src:e.user.avatar&&e.user.avatar.url,mr:"4"})),r.a.createElement(O.a,null,r.a.createElement(y.a,{fontWeight:"bold"},a),r.a.createElement(y.a,{fontWeight:"light",fontSize:"sm",mb:"2"},"@",e.user.username),r.a.createElement(y.a,{fontFamily:"body"},e.content))))}))))))},Qe=t(336),Ke=function(e){var a=Object(n.useContext)(fa),t=Object(m.a)(a,1)[0].token,c=e.onClose,l=e.handleIsSubmitting,o=e.profile,d=e.updateProfile,f=Object(h.f)(),b=o._id,p=o.avatar,E=o.username,g=o.name,v=o.location,O=o.email,y=o.contactNumber,j=o.bio,x=Object(n.useState)(),C=Object(m.a)(x,2),w=C[0],S=C[1],k={avatar:p,username:E,name:{firstName:g.firstName,lastName:g.lastName},location:v||"",email:O,contactNumber:y,bio:j||""},q=Y.e().shape({username:Y.g().matches(/^\S*$/,"Invalid username").required("Required"),name:Y.e().shape({firstName:Y.g().required("Required"),lastName:Y.g().required("Required")}).required("Required"),location:Y.g(),email:Y.g().email("Invalid email").required("Required"),contactNumber:Y.g().matches(/^(09|\+639)\d{9}$/,"Enter valid phone number").required("Required"),bio:Y.g()}),z=function(){var e=Object(s.a)(i.a.mark((function e(a){var n,r,o,s,m,p,E,g,h,v,O,y,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in l(!0),n=new FormData,a)"name"===r?n.append(r,JSON.stringify(a[r])):"avatar"===r&&a[r]&&a[r]._id?n.append(r,a[r]._id):n.append(r,a[r]);return e.prev=3,e.next=6,B.a.patch("/api/users/".concat(b,"/editUser"),n,{headers:{Authorization:"Bearer "+t,"Content-Type":"multipart/form-data; boundary=<calculated when request is sent>"}});case 6:o=e.sent,s=o.data,m=s.user,d(m),p=m.name,E=m.username,g=m.email,h=m.avatar,v=JSON.parse(localStorage.getItem("user")),O=v.user,y=Object(u.a)(Object(u.a)({},O),{},{name:p,username:E,email:g,avatar:h}),j=Object(u.a)(Object(u.a)({},v),{},{user:y}),localStorage.setItem("user",JSON.stringify(j)),l(!1),c(),f.push("".concat(E)),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),l(!0),S({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 25:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{message:w}),r.a.createElement(H.d,{initialValues:k,validationSchema:q,onSubmit:z},(function(e){return r.a.createElement("div",null,r.a.createElement(H.c,{id:"editProfileForm"},r.a.createElement(ve,{control:"image",label:"Change Avatar",name:"avatar",type:"file",accept:"image/*",form:e}),r.a.createElement(ve,{control:"input",label:"Username",name:"username"}),r.a.createElement(ve,{control:"input",label:"First Name",name:"name.firstName"}),r.a.createElement(ve,{control:"input",label:"Last Name",name:"name.lastName"}),r.a.createElement(ve,{control:"input",label:"Location",name:"location"}),r.a.createElement(ve,{control:"input",label:"Email",name:"email"}),r.a.createElement(ve,{control:"input",type:"tel",label:"Contact number",name:"contactNumber"}),r.a.createElement(ve,{control:"textarea",label:"Bio",name:"bio"})))})))},Xe={username:"",name:{firstName:"",lastName:""},photo:null,email:"",location:"",contactNumber:"",bio:"",donationCount:0,requestCount:0,posts:[]},Ze=function(){var e=Object(h.g)().username,a=Object(v.a)(),t=a.isOpen,c=a.onOpen,l=a.onClose,o=Object(n.useState)(!1),d=Object(m.a)(o,2),f=d[0],b=d[1],p=Object(n.useState)(!0),j=Object(m.a)(p,2),q=j[0],z=j[1],N=Object(n.useState)(),I=Object(m.a)(N,2),F=I[0],D=I[1],R=Object(n.useState)(Xe),P=Object(m.a)(R,2),L=P[0],T=P[1],W=Object(n.useState)(L.posts),_=Object(m.a)(W,2),A=_[0],M=_[1],J=L.name.firstName+" "+L.name.lastName;return Object(n.useEffect)((function(){(function(){var a=Object(s.a)(i.a.mark((function a(){var t,n;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,B.a.get("/api/users/".concat(e));case 3:t=a.sent,n=t.data,T((function(e){return Object(u.a)(Object(u.a)({},e),n.user)})),M(n.user.posts),z(!1),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),D({title:"Error",description:a.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}})()()}),[e]),r.a.createElement("div",null,r.a.createElement(V,{message:F}),r.a.createElement(_e,{title:"Profile",icon:S.k,hasBackButton:!0}),q?r.a.createElement(E.a,{justify:"center",pt:"8"},r.a.createElement(g.a,{thickness:"6px",speed:"0.65s",emptyColor:"gray.200",color:"primary.600",size:"xl"})):r.a.createElement(O.a,{mx:{base:"0",sm:"4"},mb:{base:"24",md:"2"},shadow:"sm",bg:"white",rounded:"lg"},r.a.createElement(E.a,{justify:"flex-end"},r.a.createElement(w.a,{onClick:c,variant:"ghost",icon:S.i,size:"lg",m:"2"})),r.a.createElement(E.a,{pb:"4",borderBottom:"4px",borderColor:"gray.200",mb:"4",flexDirection:"column",justify:"center",align:"center"},r.a.createElement(k.a,{size:"2xl",src:L.avatar&&L.avatar.url,name:J,mb:"2"}),r.a.createElement(y.a,{fontSize:"2xl",fontWeight:"semibold"},J),r.a.createElement(y.a,{fontWeight:"light"},"@",L.username),r.a.createElement(E.a,{px:"8",py:"4",justify:"center"},r.a.createElement(y.a,{textAlign:"center"},L.bio)),r.a.createElement(E.a,{flexDirection:"column",mt:"2"},r.a.createElement(E.a,{align:"center",justify:"center"},r.a.createElement(O.a,{as:S.f,color:"primary.600",size:"6"}),r.a.createElement(y.a,{ml:"2"},L.location||"---")),r.a.createElement(E.a,{align:"center",justify:"center"},r.a.createElement(O.a,{as:S.j,color:"primary.600",size:"6"}),r.a.createElement(y.a,{ml:"2"},L.email||"---")),r.a.createElement(E.a,{align:"center",justify:"center"},r.a.createElement(O.a,{as:S.s,color:"primary.600",size:"6"}),r.a.createElement(y.a,{ml:"2"},L.contactNumber||"---"))),r.a.createElement(Qe.b,null,r.a.createElement(Qe.a,{d:"flex",p:"4",flexDirection:"column",justifyContent:"center",alignItems:"center"},r.a.createElement(Qe.d,null,L.donationGiven),r.a.createElement(Qe.c,{color:"primary.600"},"Donations")),r.a.createElement(Qe.a,{d:"flex",p:"4",flexDirection:"column",justifyContent:"center",alignItems:"center"},r.a.createElement(Qe.d,null,L.donationRequested),r.a.createElement(Qe.c,{color:"primary.600"},"Requests")))),r.a.createElement(Fe,{posts:A,createPost:function(e){M((function(a){return[e].concat(Object(qe.a)(a))}))}})),r.a.createElement(x.a,{isOpen:t,onClose:l},r.a.createElement(x.g,null),r.a.createElement(x.d,null,r.a.createElement(x.f,null,"Edit Profile"),r.a.createElement(x.c,null),r.a.createElement(x.b,null,r.a.createElement(Ke,{onClose:l,handleIsSubmitting:b,profile:L,updateProfile:function(e){T((function(a){return Object(u.a)(Object(u.a)({},a),e)}))}})),r.a.createElement(x.e,null,r.a.createElement(C.a,{variant:"ghost",mr:3,onClick:l},"Cancel"),r.a.createElement(C.a,{variantColor:"cyan",type:"submit",isLoading:f,form:"editProfileForm"},"Save")))))},ea=t(34),aa=t(337),ta=function(){var e=Object(n.useContext)(Ae),a=e.post,t=e.filteredPost,c=Object(m.a)(a,1)[0],l=Object(m.a)(t,2),o=(l[0],l[1]),i=Object(n.useState)(""),s=Object(m.a)(i,2),u=s[0],d=s[1],f=Object(n.useState)("title"),b=Object(m.a)(f,2),p=b[0],E=b[1],g=Object(h.f)(),v=r.a.forwardRef((function(e,a){var t=e.isChecked,n=e.isDisabled,c=(e.value,Object($.a)(e,["isChecked","isDisabled","value"]));return r.a.createElement(C.a,Object.assign({ref:a,size:"sm",variant:"ghost",variantColor:t?"cyan":"gray","aria-checked":t,role:"radio",isDisabled:n},c))}));return r.a.createElement(O.a,{p:"4",pos:"sticky",top:"0",h:"100vh"},r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),""===u)return null;var a=c.filter((function(e){var a=e.user.name.firstName+" "+e.user.name.lastName;return"title"===p?-1!==e.title.toLowerCase().indexOf(u.toLowerCase()):"author"===p?-1!==a.toLowerCase().indexOf(u.toLowerCase()):"tags"===p&&!0===e.tags.map((function(e){return e.toLowerCase()===u.toLowerCase()})).includes(!0)}));o(a),g.push("/search")},onReset:function(){d(""),E("")}},r.a.createElement(me.a,null,r.a.createElement(ue.a,{children:r.a.createElement(ea.a,{name:"search",color:"primary.600"})}),r.a.createElement(X.a,{placeholder:"Search Donasource",onChange:function(e){return d(e.target.value)},name:"search",value:u,type:"text",size:"md",focusBorderColor:"primary.600"})),r.a.createElement(aa.a,{d:"flex",mt:"2",defautlValue:"title",onChange:function(e){return E(e)},value:p},r.a.createElement(v,{m:"0",value:"title"},"Title"),r.a.createElement(v,{m:"0",value:"author"},"Author"),r.a.createElement(v,{m:"0",value:"tags"},"Tags")),r.a.createElement(C.a,{variantColor:"cyan",type:"submit"},"Search")))},na=function(e){var a=e.handleIsSubmitting,t=e.login,n=Y.e().shape({email:Y.g().email("Invalid email").required("Required"),password:Y.g().required("Required")}),c=function(){var e=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(!0),t(n),a(!1);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(H.d,{initialValues:{email:"",password:""},validationSchema:n,onSubmit:c},(function(e){return r.a.createElement("div",null,r.a.createElement(H.c,{id:"loginform"},r.a.createElement(ve,{control:"input",type:"email",label:"Email",name:"email",placeholder:"Enter email"}),r.a.createElement(ve,{control:"password",label:"Password",name:"password"})))}))},ra=function(e){var a=e.handleIsSubmitting,t=e.signup,n=Y.e().shape({username:Y.g().matches(/^\S*$/,"Invalid username").required("Required"),firstName:Y.g().required("Required"),lastName:Y.g().required("Required"),email:Y.g().email("Invalid email").required("Required"),contactNumber:Y.g().matches(/^(09|\+639)\d{9}$/,"Enter a valid phone number").required("Required"),password:Y.g().required("Required"),repassword:Y.g().oneOf([Y.f("password")],"Password does not match").required("Required")}),c=function(){var e=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(!0),t(n),a(!1);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(H.d,{initialValues:{username:"",firstName:"",lastName:"",email:"",contactNumber:"",password:"",repassword:""},validationSchema:n,onSubmit:c},(function(e){return r.a.createElement("div",null,r.a.createElement(H.c,{id:"signupform"},r.a.createElement(ve,{control:"input",label:"Username",name:"username"}),r.a.createElement(ve,{control:"input",label:"First Name",name:"firstName"}),r.a.createElement(ve,{control:"input",label:"Last Name",name:"lastName"}),r.a.createElement(ve,{control:"input",type:"email",label:"Email",name:"email",placeholder:"Enter email"}),r.a.createElement(ve,{control:"input",type:"tel",label:"Contact number",name:"contactNumber"}),r.a.createElement(ve,{control:"password",label:"Password",name:"password"}),r.a.createElement(ve,{control:"password",name:"repassword",placeholder:"Enter password again"})))}))},ca=function(e){var a=e.login,t=e.signup,c=Object(n.useState)(!0),l=Object(m.a)(c,2),o=l[0],i=l[1],s=Object(n.useState)(!1),u=Object(m.a)(s,2),d=u[0],f=u[1],b=function(e){f(e)},p=function(){i(!o)};return r.a.createElement(E.a,{bg:"primary.600",h:o?"100vh":"full",minH:"100vh",flexDirection:{base:"column-reverse",lg:"row"},justify:{base:"center",lg:"space-evenly"},align:{base:"center",lg:"center"},p:"2"},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{bg:"white",shadow:"md",rounded:"lg",py:"12",px:"10"},r.a.createElement(y.a,{fontSize:"3xl",fontWeight:"bold",mb:"4"},"Login"),r.a.createElement(na,{handleIsSubmitting:b,login:a}),r.a.createElement(E.a,{justify:"flex-end",mt:"8"},r.a.createElement(C.a,{mr:"2",onClick:p},"Sign up"),r.a.createElement(C.a,{type:"submit",variantColor:"cyan",form:"loginform",isLoading:d},"Log in"))),r.a.createElement(O.a,{w:{base:"xs",lg:"lg"}},r.a.createElement(y.a,{fontSize:"5xl",textAlign:{base:"center",lg:"left"},fontWeight:"extrabold",color:"secondary.100"},"Donasource"),r.a.createElement(y.a,{d:{base:"none",lg:"block"},fontSize:"lg",color:"white"},"Donasource is a web application that connects people who need help and those people who can help by posting their needs or what they are willing to donate."))):r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{bg:"white",shadow:"md",rounded:"lg",py:"12",px:"10",maxh:"100vh"},r.a.createElement(y.a,{fontSize:"3xl",fontWeight:"bold",mb:"4"},"Sign up"),r.a.createElement(ra,{handleIsSubmitting:b,signup:t}),r.a.createElement(E.a,{justify:"flex-end",mt:"8"},r.a.createElement(C.a,{mr:"2",onClick:p},"Log in"),r.a.createElement(C.a,{type:"submit",variantColor:"cyan",form:"signupform",isLoading:d},"Sign up"))),r.a.createElement(O.a,{w:{base:"xs",lg:"lg"}},r.a.createElement(y.a,{d:{base:"block",lg:"none"},fontSize:"5xl",textAlign:"center",fontWeight:"extrabold",color:"secondary.100"},"Join Us!"),r.a.createElement(y.a,{d:{base:"none",lg:"block"},fontSize:"5xl",fontWeight:"extrabold",color:"secondary.100"},"Join Us and be part of a community that helps one another."))))},la=function(){var e=Object(n.useContext)(Ae).filteredPost,a=Object(m.a)(e,1)[0],t=Object(n.useState)(!1),c=Object(m.a)(t,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){o(!0),setTimeout((function(){o(!1)}),500)}),[a]),r.a.createElement("div",null,r.a.createElement(_e,{title:"Search results:",icon:S.t,hasBackButton:!0}),l?r.a.createElement(E.a,{justify:"center",pt:"8"},r.a.createElement(g.a,{thickness:"6px",speed:"0.65s",emptyColor:"gray.200",color:"primary.600",size:"xl"})):0===a.length?r.a.createElement(E.a,{align:"center",py:"8",flexDirection:"column"},r.a.createElement(O.a,{as:S.g,size:"20"}),r.a.createElement(y.a,{fontWeight:"bold",fontSize:"lg"},"No results found."),r.a.createElement(y.a,null,"We cannot find the post you are looking for. Try searching with another term.")):r.a.createElement(j.a,{mb:{base:"16",md:"4"},px:{base:"0",sm:"4"}},a.map((function(e){return r.a.createElement(Ne,{key:e._id,data:e,isLinked:!0})}))))},oa=function(e){var a=e.notif,t=(e.seenNotif,a.user),n=a.type,c=a.postId,l=a.date,o=a.title,i=a.seen,s=t.avatar,m=t.name,u=t.username,d=m.firstName+" "+m.lastName,f=new Date,b=new Date(l),p=f.getTime()-b.getTime(),g=Math.floor(p/864e5),h=Math.floor(p/36e5),v=Math.floor(p/6e4),j=Math.floor(p/1e3);return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{pos:"relative",pl:"4",py:"4",align:"center",bg:"like"!==n||i?"comment"!==n||i?"donate"!==n||i?"accept"!==n||i?"reject"!==n||i?"none":"red.100":"green.100":"yellow.100":"blue.100":"cyan.100",mx:"4",rounded:"lg"},r.a.createElement(O.a,{as:q.b,to:"/".concat(u,"/post/").concat(c),w:"full",h:"full",pos:"absolute",top:"0",left:"0",bottom:"0",right:"0"}),r.a.createElement(q.b,{to:"/".concat(u)},r.a.createElement(k.a,{name:"Bullet Pua",src:s&&s.url})),r.a.createElement(O.a,{ml:"4"},r.a.createElement(y.a,null,r.a.createElement("b",null,d+" "),"like"===n?"liked your posts: ":"comment"===n?"commented on your post: ":"donate"===n?"donated on your post: ":"accept"===n?"accepted your request on post: ":"reject"===n?"rejected your request on post: ":"",r.a.createElement("b",null,'"',o,'"')),r.a.createElement(y.a,{fontSize:"sm",color:"gray.700"},h>=24?"".concat(g,"d ago"):v>=60?"".concat(h,"hr ago"):j>=60?"".concat(v,"min ago"):"".concat(j," sec ago")))),r.a.createElement(W.a,null))},ia=["January","February","March","April","May","June","July","August","September","October","November","December"],sa=function(){var e=Object(n.useContext)(fa),a=Object(m.a)(e,1)[0].user._id,t=Object(n.useState)([]),c=Object(m.a)(t,2),l=c[0],o=c[1],u=Object(n.useState)(!0),d=Object(m.a)(u,2),f=d[0],b=d[1],p=Object(n.useState)(),h=Object(m.a)(p,2),v=h[0],j=h[1],x=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get("/api/users/".concat(a,"/notifications/").concat(t));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),j({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,r,c,l,s,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get("/api/users/".concat(a,"/notifications"));case 3:t=e.sent,n=t.data,r=[],c=new Date,l=Math.floor(c.getTime()/864e5),s=0,m=0,n.notifications.forEach((function(e){var a=new Date(e.date),t=Math.floor(a.getTime()/864e5),n=t===l?"Today":t===l-1?"Yesterday":"".concat(ia[a.getMonth()]," ").concat(a.getDate());m!==t?(r.push({label:n,contents:[e]}),s+=1,m=t):r[s-1].contents.push(e)})),o(r),b(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),alert(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{message:v}),r.a.createElement(_e,{title:"Notification",icon:S.b}),f?r.a.createElement(E.a,{justify:"center",pt:"8"},r.a.createElement(g.a,{thickness:"6px",speed:"0.65s",emptyColor:"gray.200",color:"primary.600",size:"xl"})):0===l.length?r.a.createElement(E.a,{align:"center",py:"8",flexDirection:"column"},r.a.createElement(O.a,{as:S.c,size:"20"}),r.a.createElement(y.a,{fontWeight:"bold",fontSize:"lg"},"No notifications yet"),r.a.createElement(y.a,null,"Stay tuned! Notifications about your activity will show up here.")):r.a.createElement(O.a,{mx:{base:"0",sm:"4"},mb:{base:"24",md:"2"},rounded:"lg",bg:"white",shadow:"sm",pb:"2"},l.map((function(e,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(y.a,{ml:"6",fontSize:"sm",fontWeight:"semibold",pt:"4",pb:"2",color:"gray.800"},e.label),r.a.createElement(W.a,null),e.contents.map((function(e){return r.a.createElement(oa,{key:e._id,notif:e,seenNotif:x})})))}))))},ma=t(338),ua=function(e){var a=e.avail,t=e.accept,c=e.reject,l=a._id,o=a.user,i=a.post,s=a.reason,u=a.date,d=a.items,f=o.avatar,b=o.name,p=o.username,g=i._id,h=i.title,v=b.firstName+" "+b.lastName,j=new Date,x=new Date(u),w=j.getTime()-x.getTime(),z=Math.floor(w/864e5),N=Math.floor(w/36e5),F=Math.floor(w/6e4),D=Math.floor(w/1e3),R=Object(n.useState)(!1),P=Object(m.a)(R,2),L=P[0],T=P[1],_=Object(n.useState)(!1),A=Object(m.a)(_,2),B=A[0],M=A[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{pt:"4",px:"6"},r.a.createElement(E.a,{align:"center",rounded:"lg",pb:"4"},r.a.createElement(q.b,{to:"/".concat(p)},r.a.createElement(k.a,{name:v,src:f&&f.url})),r.a.createElement(O.a,{ml:"4"},r.a.createElement(y.a,null,r.a.createElement("b",null,v+" "),"requests on your donation:",r.a.createElement(q.b,{to:"/post/".concat(g)},r.a.createElement("b",null,' "'.concat(h,'"')))),r.a.createElement(y.a,{fontSize:"sm",color:"gray.700"},N>=24?"".concat(z,"d ago"):F>=60?"".concat(N,"hr ago"):D>=60?"".concat(F,"min ago"):"".concat(D," sec ago")))),r.a.createElement(O.a,{p:"2",bg:"blue.100",rounded:"lg",mb:"2"},r.a.createElement(ma.a,{startingHeight:32,isOpen:L,ml:"4",mt:"2"},r.a.createElement(y.a,{fontWeight:"bold"},"Items requested:"),d.map((function(e){return r.a.createElement(E.a,{ml:"4",align:"center"},r.a.createElement(O.a,{as:S.d,mr:"2"}),r.a.createElement(y.a,{fontSize:"sm"},e.itemId.name),r.a.createElement(I.a,{ml:"2",variantColor:"orange"},e.amountRequested))})),r.a.createElement(W.a,null),r.a.createElement(y.a,{mt:"2",fontWeight:"bold"},"Reason:"),r.a.createElement(y.a,{ml:"4",fontSize:"sm"},s)),r.a.createElement(C.a,{ml:"4",mt:"1",size:"sm",variant:"ghost",variantColor:"blue",onClick:function(){return T(!L)}},"Show ",L?"Less":"More")),r.a.createElement(E.a,{justify:"flex-end"},r.a.createElement(C.a,{size:"sm",isLoading:B,onClick:function(){return c(l,M)}},"Reject"),r.a.createElement(C.a,{size:"sm",isLoading:B,onClick:function(){return t(l,M)},variantColor:"cyan",ml:"2"},"Accept"))),r.a.createElement(W.a,null))},da=function(){var e=Object(n.useContext)(fa),a=Object(m.a)(e,1)[0],t=a.user,c=a.token,l=t._id,o=Object(n.useState)([]),u=Object(m.a)(o,2),d=u[0],f=u[1],b=Object(n.useState)(!0),p=Object(m.a)(b,2),h=p[0],v=p[1],j=Object(n.useState)(),x=Object(m.a)(j,2),C=x[0],w=x[1],k=function(){var e=Object(s.a)(i.a.mark((function e(a,t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,B.a.patch("/api/users/".concat(l,"/avails/").concat(a),{response:"ACCEPT"},{headers:{Authorization:"Bearer "+c}});case 4:n=e.sent,r=n.data,f((function(e){return Object(qe.a)(r.avails)})),t(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),w({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a,t){return e.apply(this,arguments)}}(),q=function(){var e=Object(s.a)(i.a.mark((function e(a,t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,B.a.patch("/api/users/".concat(l,"/avails/").concat(a),{response:"REJECT"},{headers:{Authorization:"Bearer "+c}});case 4:n=e.sent,r=n.data,f((function(e){return Object(qe.a)(r.avails)})),t(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),w({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a,t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var a,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get("/api/users/".concat(l,"/avails"));case 3:a=e.sent,t=a.data,f((function(e){return[].concat(Object(qe.a)(e),Object(qe.a)(t.avails))})),v(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),w({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0}),v(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{message:C}),r.a.createElement(_e,{title:"Avails",icon:S.o}),h?r.a.createElement(E.a,{justify:"center",pt:"8"},r.a.createElement(g.a,{thickness:"6px",speed:"0.65s",emptyColor:"gray.200",color:"primary.600",size:"xl"})):0===d.length?r.a.createElement(E.a,{align:"center",py:"8",flexDirection:"column"},r.a.createElement(O.a,{as:S.q,size:"20"}),r.a.createElement(y.a,{fontWeight:"bold",fontSize:"lg"},"No one has requested yet."),r.a.createElement(y.a,null,"You can post more donations to get more request.")):r.a.createElement(O.a,{mx:{base:"0",sm:"4"},mb:{base:"24",md:"2"},rounded:"lg",bg:"white",shadow:"sm",pb:"2"},r.a.createElement(W.a,null),d.map((function(e){return r.a.createElement(ua,{avail:e,accept:k,reject:q})}))))},fa=r.a.createContext(null),ba=function(){var e=Object(n.useState)(),a=Object(m.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(),o=Object(m.a)(l,2),u=o[0],d=o[1],v=Object(n.useState)(!0),O=Object(m.a)(v,2),y=O[0],j=O[1],x=function(){var e=Object(s.a)(i.a.mark((function e(a){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.post("/api/login",a);case 3:t=e.sent,n=t.data,r={user:n.user,token:n.token},c(r),localStorage.setItem("user",JSON.stringify(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(a){return e.apply(this,arguments)}}(),C=function(){var e=Object(s.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.post("/api/signup",a);case 3:d({title:"Success",description:"You have successfully created your account.",status:"success",duration:2e3,isClosable:!0}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),d({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}();return Object(n.useLayoutEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));e?function(){var a=Object(s.a)(i.a.mark((function a(){var t;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,B.a.get("/api/checkSession",{headers:{Authorization:"Bearer "+e.token}});case 3:t=a.sent,t.data.isvalidToken?(c(e),j(!1)):(localStorage.clear(),j(!1)),a.next=13;break;case 8:a.prev=8,a.t0=a.catch(0),localStorage.clear(),j(!1),d({title:"Error",description:a.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(){return a.apply(this,arguments)}}()():j(!1)}),[]),r.a.createElement(b.a,{theme:f},r.a.createElement(p.a,null),r.a.createElement(fa.Provider,{value:[t,c]},r.a.createElement(V,{message:u}),y?r.a.createElement(E.a,{h:"100vh",justify:"center",align:"center"},r.a.createElement(g.a,{thickness:"6px",speed:"0.65s",emptyColor:"gray.200",color:"primary.600",size:"xl"})):t?r.a.createElement("div",null,r.a.createElement(Te,{title:"Donasource"}),r.a.createElement(E.a,{justify:{base:"center",xl:"space-evenly"}},r.a.createElement(Je,null,r.a.createElement(Ge,{variant:"side"})),r.a.createElement(Me,null,r.a.createElement(Ue,null,r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:Ve}),r.a.createElement(h.a,{path:"/search",component:la}),r.a.createElement(h.a,{path:"/notification",component:sa}),r.a.createElement(h.a,{path:"/avails",component:da}),r.a.createElement(h.a,{exact:!0,path:"/:username",component:Ze}),r.a.createElement(h.a,{path:"/:username/post/:id",component:$e}))),r.a.createElement(Ge,{variant:"bottom",d:{base:"flex",md:"none"}}),r.a.createElement(He,null,r.a.createElement(ta,null))))):r.a.createElement(ca,{login:x,signup:C})))};t(310);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q.a,null,r.a.createElement(ba,null))),document.getElementById("root"))}},[[200,1,2]]]);
//# sourceMappingURL=main.a63e6e85.chunk.js.map