(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{199:function(e,t,a){e.exports=a(310)},204:function(e,t,a){},310:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(49),o=a.n(c),l=(a(204),a(12)),i=a.n(l),s=a(18),m=a(6),u=a(24),d=a(338),f=(a(206),a(207),Object(u.a)(Object(u.a)({},d.a),{},{colors:{black:"#000",white:"#FFF",primary:{50:"#d9fffd",100:"#adfff8",200:"#7dfff1",300:"#4dffec",400:"#26ffe6",500:"#15e6cd",600:"#00b39f",700:"#008072",800:"#004e44",900:"#001c18"},secondary:{50:"#fafbe4",100:"#f0f3be",200:"#e6eb96",300:"#dde46d",400:"#d4dc45",500:"#bac22d",600:"#909722",700:"#676c18",800:"#3e410c",900:"#151600"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},gray:{50:"#f9f9f9",100:"#eceeee",200:"#dee1e1",300:"#ced4d3",400:"#bec5c4",500:"#abb5b4",600:"#96a2a1",700:"#7d8c8a",800:"#5d706d",900:"#344240"},cyan:{50:"#f3fbfa",100:"#daf2f0",200:"#bfe9e4",300:"#a0dfd7",400:"#7dd3c9",500:"#54c5b7",600:"#1fb3a1",700:"#009a88",800:"#007a6c",900:"#00483f"},blue:{50:"#f6fafc",100:"#e4eff6",200:"#d1e4ef",300:"#bbd7e8",400:"#a4c9e0",500:"#89b9d7",600:"#6aa7cc",700:"#4490bf",800:"#1071ad",900:"#00426b"},indigo:{50:"#f9f9fd",100:"#ebedf8",200:"#dde0f3",300:"#cdd1ee",400:"#bcc2e8",500:"#a9b0e2",600:"#939cda",700:"#7983d1",800:"#5663c5",900:"#182ab0"},violet:{50:"#faf9fd",100:"#f0ebf8",200:"#e6ddf3",300:"#daceee",400:"#cdbce8",500:"#bfa9e2",600:"#ae93da",700:"#9a78d1",800:"#7f55c5",900:"#4d11ae"},fuschia:{50:"#fcf8fd",100:"#f6eaf8",200:"#efdaf2",300:"#e8c9ed",400:"#e0b6e6",500:"#d7a0df",600:"#cd87d6",700:"#bf67cb",800:"#ab37bb",900:"#70007f"},pink:{50:"#fdf8fb",100:"#f8eaf2",200:"#f2dae9",300:"#edc9df",400:"#e6b6d4",500:"#dfa0c7",600:"#d687b8",700:"#cb67a5",800:"#bb3788",900:"#7e004e"},red:{50:"#fdf8f9",100:"#f8eaec",200:"#f3dbde",300:"#edcbcf",400:"#e7b8be",500:"#e0a3aa",600:"#d78b94",700:"#cd6c77",800:"#be3f4e",900:"#850010"},orange:{50:"#fcf9f7",100:"#f6ece5",200:"#f0ddd2",300:"#e9cebd",400:"#e1bda6",500:"#d8a98d",600:"#ce936e",700:"#c17749",800:"#af5016",900:"#6e2a00"},yellow:{50:"#fbfaf2",100:"#f1eed7",200:"#e7e2ba",300:"#e7e2ba",400:"#d0c676",500:"#c3b54e",600:"#b2a11e",700:"#9c8900",800:"#7b6c00",900:"#484000"},lime:{50:"#f7fbf2",100:"#e7f1d7",200:"#d6e7b9",300:"#c2dc99",400:"#add074",500:"#94c14a",600:"#76b018",700:"#5e9800",800:"#4b7800",900:"#2c4700"},green:{50:"#f5fbf4",100:"#dff3dc",200:"#c7eac2",300:"#ace0a5",400:"#8ed584",500:"#6ac85d",600:"#3cb72c",700:"#139f00",800:"#0f7e00",900:"#094a00"},teal:{50:"#f4fbf7",100:"#dcf3e5",200:"#c2ead1",300:"#a5e0bb",400:"#83d5a2",500:"#5cc785",600:"#2ab660",700:"#009f3c",800:"#007d30",900:"#004a1c"}}})),b=a(26),p=a(343),E=a(66),g=a(31),h=a(331),v=a(8),y=a(78),O=a(322),j=a(341),x=a(155),C=a(324),w=a(16),S=a(342),k=a(23),q=function(e){var t=e.avatar,a=e.username,n=e.author,c=e.datePosted,o=new Date,l=new Date(c),i=o.getTime()-l.getTime(),s=Math.floor(i/864e5),m=Math.floor(i/36e5),u=Math.floor(i/6e4),d=Math.floor(i/1e3);return r.a.createElement(E.a,{align:"center",mb:"2"},r.a.createElement(k.b,{to:"/".concat(a)},r.a.createElement(S.a,{size:"md",name:n,src:t,mr:"4"})),r.a.createElement(E.a,{flexDirection:"column",w:"full"},r.a.createElement(E.a,null,r.a.createElement(y.a,{fontSize:"sm",fontWeight:"semibold",mr:"1"},n),r.a.createElement(y.a,{fontSize:"sm",color:"gray.700"},"@".concat(a))),r.a.createElement(y.a,{fontSize:"sm",color:"gray.700"},m>=24?"".concat(s,"d ago"):u>=60?"".concat(m,"hr ago"):d>=60?"".concat(u,"min ago"):"".concat(d," sec ago"))))},I=a(320),N=a(321),F=function(e){var t=e.item,a=e.type,n=t.name,c=t.amount,o=t.total,l=0===o-c;return r.a.createElement(I.b,{d:"flex",alignItems:"center"},"request"===a?l?r.a.createElement(I.a,{icon:"check-circle",color:"green.500"}):r.a.createElement(I.a,{icon:"warning",color:"orange.500"}):0===c?r.a.createElement(I.a,{icon:"check-circle",color:"green.500"}):r.a.createElement(I.a,{icon:"warning",color:"orange.500"}),n,"request"===a?r.a.createElement(N.a,{variantColor:l?"green":"orange",ml:"2"},c," /",o):r.a.createElement(N.a,{variantColor:0===c?"green":"orange",ml:"2"},"".concat(c," left")))},z=function(e){var t=e.items,a=e.type;return r.a.createElement(v.a,{border:"2px",rounded:"lg",borderColor:"cyan.400",p:"4"},r.a.createElement(y.a,null,"request"===a?"Need:":"Giving:"),r.a.createElement(I.c,{spacing:3,ml:"2"},t.map((function(e,t){return r.a.createElement(F,{key:t,item:e,type:a})}))),e.children)},D=a(323),R=function(e){var t=e.tags;return r.a.createElement(E.a,{align:"center",my:"2"},r.a.createElement(y.a,null,"Tags:"),r.a.createElement(O.a,{spacing:1,isInline:!0},t.map((function(e,t){return r.a.createElement(D.a,{key:t},e)}))))},P=a(37),L=a(186),T=a(150),W=a(22),M=a.n(W),_=a(336),A=function(e){var t=e.message,a=Object(_.a)();return Object(n.useEffect)((function(){t&&a(t)}),[a,t]),r.a.createElement(r.a.Fragment,null)},B=function(e){var t=e.postId,a=e.likers,c=Object(n.useContext)(st),o=Object(m.a)(c,1)[0].user,l=o._id,u=o.name,d=o.username,f=Object(n.useState)(!1),b=Object(m.a)(f,2),p=b[0],E=b[1],g=Object(n.useState)(!1),h=Object(m.a)(g,2),v=h[0],y=h[1],O=Object(n.useState)(),j=Object(m.a)(O,2),x=j[0],w=j[1],S=function(){var e=Object(s.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,M.a.patch("/api/posts/".concat(t,"/likes"),{userId:l,name:u,username:d});case 4:a=e.sent,a.data,y(!1),E(!p),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),w({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=a.find((function(e){return e===l}));E(e)}),[a,l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{message:x}),r.a.createElement(C.a,{variant:"ghost",icon:p?T.a:T.b,isRound:!0,size:"lg",onClick:S,color:p?"red.800":"",isLoading:v}))},V=a(325),U=function(){return r.a.createElement(v.a,{p:"5",mb:"4",shadow:"sm",bg:"white",rounded:"lg",pos:"relative"},r.a.createElement(E.a,{align:"center",mb:"2"},r.a.createElement(V.a,{h:"12",w:"12",rounded:"full",mr:"4"}),r.a.createElement(E.a,{flexDirection:"column"},r.a.createElement(V.a,{h:"4",w:"64",my:"1"}),r.a.createElement(V.a,{h:"4",w:"40",my:"1"}),r.a.createElement(V.a,{h:"4",w:"20",my:"1"}))),r.a.createElement(v.a,{my:"4"},r.a.createElement(V.a,{h:"4",my:"1"}),r.a.createElement(V.a,{h:"4",my:"1"}),r.a.createElement(V.a,{h:"4",my:"1"}),r.a.createElement(V.a,{h:"4",my:"1"})),r.a.createElement(V.a,{h:"24",my:"2"}),r.a.createElement(V.a,{h:"6",w:"32",my:"2"}))},J=a(14),G=a(11),H=a(25),Y=a(99),$=a(326),Q=a(100),K=a(327),X=function(e){var t=e.label,a=e.name,n=Object(H.a)(e,["label","name"]);return r.a.createElement(J.a,{name:a},(function(e){var c=e.field,o=e.form;return r.a.createElement(Y.a,{isInvalid:o.errors[a]&&o.touched[a],mb:"2"},r.a.createElement($.a,{htmlFor:a},t),r.a.createElement(Q.a,Object.assign({id:a},n,c)),r.a.createElement(K.a,null,o.errors[a]))}))},Z=a(328),ee=function(e){var t=e.label,a=e.name,n=Object(H.a)(e,["label","name"]);return r.a.createElement(J.a,{name:a},(function(e){var c=e.field,o=e.form;return r.a.createElement(Y.a,{isInvalid:o.errors[a]&&o.touched[a]},r.a.createElement($.a,{htmlFor:a},t),r.a.createElement(Z.a,Object.assign({id:a},n,c)),r.a.createElement(K.a,null,o.errors[a]))}))},te=a(329),ae=a(340),ne=function(e){var t=e.label,a=e.name,n=Object(H.a)(e,["label","name"]);return r.a.createElement(J.a,{name:a},(function(e){var c=e.field,o=e.form;return r.a.createElement(Y.a,{isInvalid:o.errors[a]&&o.touched[a]},r.a.createElement($.a,{htmlFor:a},t),r.a.createElement(te.a,Object.assign({id:a,isInline:!0},n,c),r.a.createElement(ae.a,{value:"donation"},"Donation"),r.a.createElement(ae.a,{value:"request"},"Request")),r.a.createElement(K.a,null,o.errors[a]))}))},re=a(339),ce=function(e){var t=e.label,a=e.name,n=Object(H.a)(e,["label","name"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{htmlFor:a},t),r.a.createElement(J.b,{name:a},(function(e){var t=e.push,c=e.remove,o=e.form.values.items;return r.a.createElement("div",null,o.map((function(e,t){return r.a.createElement(v.a,{key:t,bg:"cyan.100",p:"4",rounded:"lg",mb:"2"},r.a.createElement(J.a,{name:"".concat(a,"[").concat(t,"].name")},(function(e){var c=e.field,o=e.form;return r.a.createElement(Y.a,{isInvalid:o.errors[a]&&o.touched[a]&&o.errors[a][t]&&o.touched[a][t]&&o.errors[a][t].name&&o.touched[a][t].name},r.a.createElement($.a,{htmlFor:"".concat(a,".").concat(t,".name")},"Item Name"),r.a.createElement(Q.a,Object.assign({id:"".concat(a,".").concat(t,".name")},n,c)),r.a.createElement(K.a,null,o.errors[a]&&o.errors[a][t]&&o.errors[a][t].name," "))})),r.a.createElement(J.a,{name:"".concat(a,"[").concat(t,"].total")},(function(e){var c=e.field,o=e.form;return r.a.createElement(Y.a,{isInvalid:o.errors[a]&&o.touched[a]&&o.errors[a][t]&&o.touched[a][t]&&o.errors[a][t].quantity&&o.touched[a][t].quantity},r.a.createElement($.a,{htmlFor:"".concat(a,".").concat(t,".total")},"Quantity"),r.a.createElement(re.a,Object.assign({id:"".concat(a,".").concat(t,".total"),type:"number"},n,c,{onChange:function(e){return o.setFieldValue("".concat(a,".").concat(t,".total"),e)},onBlur:function(e){o.setFieldTouched("".concat(a,".").concat(t,".total"),!0)}})),r.a.createElement(K.a,null,o.errors[a]&&o.errors[a][t]&&o.errors[a][t].quantity," "))})),t>0&&r.a.createElement(E.a,{justify:"flex-end",mt:"2"},r.a.createElement(x.a,{size:"sm",variantColor:"red",leftIcon:"minus",onClick:function(){return c(t)}},"Remove Item")))})),r.a.createElement(x.a,{size:"sm",my:"2",mr:"2",leftIcon:"add",onClick:function(){return t({name:"",total:"",amount:0})}},"Add Item"))})))},oe=function(e){var t=e.label,a=e.name,n=Object(H.a)(e,["label","name"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{htmlFor:a},t),r.a.createElement(J.b,{name:a},(function(e){var t=e.push,c=e.remove,o=e.form.values.tags;return r.a.createElement("div",null,o.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(J.a,{name:"".concat(a,"[").concat(t,"]")},(function(e){var c=e.field,o=e.form;return r.a.createElement(Y.a,{mt:"2",ml:"2",isInvalid:o.errors[a]&&o.touched[a]&&o.errors[a][t]&&o.touched[a][t]},r.a.createElement(Q.a,Object.assign({id:"".concat(a,"[").concat(t,"]")},n,c)),r.a.createElement(K.a,null,o.errors[a]&&o.errors[a][t]," "))})),t>0&&r.a.createElement(E.a,{justify:"flex-end",mt:"2"},r.a.createElement(x.a,{size:"sm",variantColor:"red",leftIcon:"minus",onClick:function(){return c(t)}},"Remove Tag")))})),r.a.createElement(x.a,{size:"sm",my:"2",mr:"2",leftIcon:"add",onClick:function(){return t("")}},"Add Tag"))})))},le=function(e){var t=e.label,a=e.name,n=e.form,c=Object(H.a)(e,["label","name","form"]),o=n.setFieldValue;return r.a.createElement(Y.a,{isInvalid:n.errors[a]&&n.touched[a]},r.a.createElement($.a,{htmlFor:a},t),r.a.createElement("input",Object.assign({id:a,onChange:function(e){o("images",e.currentTarget.files)}},c)),r.a.createElement(K.a,null,n.errors[a]))},ie=a(330),se=a(152),me=function(e){var t=e.label,a=e.name,n=Object(H.a)(e,["label","name"]),c=r.a.useState(!1),o=Object(m.a)(c,2),l=o[0],i=o[1],s=function(){return i(!l)};return r.a.createElement(J.a,{name:a},(function(e){var c=e.field,o=e.form;return r.a.createElement(Y.a,{isInvalid:o.errors[a]&&o.touched[a],mb:"2"},t&&r.a.createElement($.a,{htmlFor:a},t),r.a.createElement(ie.a,{size:"md"},r.a.createElement(Q.a,Object.assign({pr:"4.5rem",type:l?"text":"password",placeholder:"Enter password",id:a},n,c)),r.a.createElement(se.b,{width:"4.5rem"},r.a.createElement(x.a,{h:"1.75rem",size:"sm",onClick:s},l?"Hide":"Show"))),r.a.createElement(K.a,null,o.errors[a]))}))},ue=function(e){var t=e.label,a=e.name,n=e.index,c=e.amount,o=Object(H.a)(e,["label","name","index","amount"]);return r.a.createElement(J.a,{name:"".concat(a,"[").concat(n,"].donor.amountDonated")},(function(e){var l=e.field,i=e.form;return r.a.createElement(Y.a,{isInvalid:i.errors[a]&&i.touched[a]&&i.errors[a][n]&&i.touched[a][n]&&(i.errors[a][n].donor&&i.touched[a][n].donor&&i.errors[a][n].donor.amountDonated&&i.touched[a][n].donor.amountDonated||i.errors[a][n].amount&&i.touched[a][n].donor.amountDonated),mb:"4"},r.a.createElement($.a,{htmlFor:"".concat(a,"[").concat(n,"].donor.amountDonated")},t),r.a.createElement(re.a,Object.assign({id:"".concat(a,"[").concat(n,"].donor.amountDonated")},o,l,{onChange:function(e){i.setFieldValue("".concat(a,"[").concat(n,"].amount"),e+c),i.setFieldValue("".concat(a,"[").concat(n,"].donor.amountDonated"),e),i.setFieldValue("totalDonation",i.values.totalDonation+e)},onBlur:function(e){i.setFieldTouched("".concat(a,"[").concat(n,"].donor.amountDonated"),!0)}})),r.a.createElement(K.a,null,i.errors[a]&&i.errors[a][n]&&(i.errors[a][n].donor&&i.errors[a][n].donor.amountDonated||i.errors[a][n].amount)))}))},de=a(191),fe=a.n(de),be=function(e){var t=e.label,a=e.name,n=Object(H.a)(e,["label","name"]);return r.a.createElement(J.a,{name:a},(function(e){var c=e.field,o=e.form;return r.a.createElement(Y.a,{isInvalid:o.errors[a]&&o.touched[a],mb:"2"},r.a.createElement($.a,{htmlFor:a},t),r.a.createElement("br",null),r.a.createElement(fe.a,Object.assign({},c,n,{id:a,selected:o.values[a],onChange:function(e){return o.setFieldValue(a,e)},showTimeSelect:!0,dateFormat:"MM/dd/yyyy h:mm aa",customInput:r.a.createElement(Q.a,null)})),r.a.createElement(K.a,null,o.errors[a]))}))},pe=function(e){var t=e.label,a=e.name,n=e.index,c=e.amount,o=Object(H.a)(e,["label","name","index","amount"]);return r.a.createElement(J.a,{name:"".concat(a,"[").concat(n,"].amountRequested")},(function(e){var l=e.field,i=e.form;return r.a.createElement(Y.a,{isInvalid:i.errors[a]&&i.touched[a]&&i.errors[a][n]&&i.touched[a][n]&&(i.errors[a][n].amountRequested&&i.touched[a][n].amountRequested||i.errors[a][n].amount&&i.touched[a][n].amountRequested),mb:"4"},r.a.createElement($.a,{htmlFor:"".concat(a,"[").concat(n,"].amountRequested")},t),r.a.createElement(re.a,Object.assign({id:"".concat(a,"[").concat(n,"].amountRequested")},o,l,{onChange:function(e){i.setFieldValue("".concat(a,"[").concat(n,"].amount"),c-e),i.setFieldValue("".concat(a,"[").concat(n,"].amountRequested"),e),i.setFieldValue("totalRequest",i.values.totalRequest+e)},onBlur:function(e){i.setFieldTouched("".concat(a,"[").concat(n,"].amountRequested"),!0)}})),r.a.createElement(K.a,null,i.errors[a]&&i.errors[a][n]&&(i.errors[a][n].amountRequested||i.errors[a][n].amount)))}))},Ee=function(e){var t=e.control,a=Object(H.a)(e,["control"]);switch(t){case"input":return r.a.createElement(X,a);case"textarea":return r.a.createElement(ee,a);case"radio":return r.a.createElement(ne,a);case"date":return r.a.createElement(be,a);case"items":return r.a.createElement(ce,a);case"tags":return r.a.createElement(oe,a);case"images":return r.a.createElement(le,a);case"password":return r.a.createElement(me,a);case"numeric":return r.a.createElement(ue,a);case"request":return r.a.createElement(pe,a);default:return null}},ge=function(e){var t=e.onClose,a=e.handleIsSubmitting,c=e.addComment,o=e.postId,l=Object(n.useContext)(st),d=Object(m.a)(l,1)[0].user._id,f=Object(n.useState)(),b=Object(m.a)(f,2),p=b[0],E=b[1],g={userId:d,content:""},h=G.e().shape({content:G.g().required("Required")}),v=function(){var e=Object(s.a)(i.a.mark((function e(n){var r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,M.a.patch("/api/posts/".concat(o,"/comments"),n);case 4:r=e.sent,l=r.data,c&&c(Object(u.a)(Object(u.a)({},l.comment),{},{user:Object(u.a)({},l.user)})),a(!1),t(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),E({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{message:p}),r.a.createElement(J.d,{initialValues:g,validationSchema:h,onSubmit:v},(function(e){return r.a.createElement("div",null,r.a.createElement(J.c,{id:"commentForm"},r.a.createElement(Ee,{control:"textarea",label:"Comment",name:"content"})))})))},he=function(e){var t=e.isOpen,a=e.onClose,c=e.addComment,o=e.postId,l=Object(n.useState)(!1),i=Object(m.a)(l,2),s=i[0],u=i[1];return r.a.createElement(j.a,{isOpen:t,onClose:a},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null),r.a.createElement(j.c,null),r.a.createElement(j.b,null,r.a.createElement(ge,{onClose:a,handleIsSubmitting:u,addComment:c,postId:o})),r.a.createElement(j.e,null,r.a.createElement(x.a,{variant:"ghost",mr:3,onClick:function(){a(),u(!1)}},"Cancel"),r.a.createElement(x.a,{variantColor:"cyan",type:"submit",isLoading:s,form:"commentForm"},"Comment"))))},ve=function(e){var t=e.onClose,a=e.handleIsSubmitting,c=e.items,o=e.postId,l=Object(n.useContext)(st),u=Object(m.a)(l,1)[0].user._id,d=Object(n.useState)(),f=Object(m.a)(d,2),b=f[0],p=f[1],E={items:c.map((function(e){return{itemId:e._id,name:e.name,amount:e.amount,total:e.total,amountRequested:0}})),reason:"",userId:u,totalRequest:0},g=G.e().shape({items:G.a().of(G.e().shape({name:G.g(),total:G.d(),amount:G.d().min(0,"Too Much"),amountRequested:G.d()})).required("Required"),reason:G.g().required("Required"),totalRequest:G.d().min(1,"Request at least one item")}),h=function(){var e=Object(s.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,M.a.patch("/api/posts/".concat(o,"/request"),n);case 4:r=e.sent,r.data,a(!1),t(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),p({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{message:b}),r.a.createElement(J.d,{initialValues:E,validationSchema:g,onSubmit:h},(function(e){return r.a.createElement("div",null,r.a.createElement(J.c,{id:"requestForm"},E.items.map((function(e,t){return e.amount>0?r.a.createElement(Ee,{control:"request",label:e.name,index:t,amount:e.amount,name:"items",type:"number"}):null})),r.a.createElement(Ee,{control:"textarea",label:"Reason",name:"reason"})))})))},ye=function(e){var t=e.isOpen,a=e.onClose,c=e.postId,o=e.items,l=Object(n.useState)(!1),i=Object(m.a)(l,2),s=i[0],u=i[1];return r.a.createElement(j.a,{isOpen:t,onClose:a},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null,"Request"),r.a.createElement(j.c,null),r.a.createElement(j.b,null,r.a.createElement(ve,{onClose:a,handleIsSubmitting:u,items:o,postId:c})),r.a.createElement(j.e,null,r.a.createElement(x.a,{variant:"ghost",mr:3,onClick:function(){a(),u(!1)}},"Cancel"),r.a.createElement(x.a,{variantColor:"cyan",type:"submit",isLoading:s,form:"requestForm"},"Request"))))},Oe=function(e){var t=e.onClose,a=e.handleIsSubmitting,c=e.items,o=e.donate,l=e.postId,d=Object(n.useContext)(st),f=Object(m.a)(d,1)[0].user._id,b=Object(n.useState)(),p=Object(m.a)(b,2),E=p[0],g=p[1],h={items:c.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{donor:{user:f,amountDonated:0}})})),totalDonation:0,userId:f},v=function(){var e=Object(s.a)(i.a.mark((function e(n){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,M.a.put("/api/posts/".concat(l,"/donate"),n);case 4:r=e.sent,c=r.data,o(c.items),a(!1),t(),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),g({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0}),a(!1),t();case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{message:E}),r.a.createElement(J.d,{initialValues:h,validationSchema:function(e){return G.e().shape({items:G.a().of(G.e().shape({name:G.g(),total:G.d(),amount:G.d().max(G.f("total"),"Too Much"),donor:G.e().shape({userId:G.g(),amountDonated:G.d(),date:G.b()})})).required("Required"),totalDonation:G.d().min(1,"Donate at least one item")})},onSubmit:v},(function(e){return console.log("Formik  Props: ",e),r.a.createElement("div",null,r.a.createElement(J.c,{id:"donateForm"},h.items.map((function(e,t){return e.amount!==e.total?r.a.createElement(Ee,{control:"numeric",label:e.name,index:t,amount:e.amount,name:"items",type:"number"}):null}))),r.a.createElement(Y.a,{isInvalid:e.errors.totalDonation},r.a.createElement(K.a,null,e.errors.totalDonation)))})))},je=function(e){var t=e.isOpen,a=e.onClose,c=e.items,o=e.donate,l=e.postId,i=Object(n.useState)(!1),s=Object(m.a)(i,2),u=s[0],d=s[1];return r.a.createElement(j.a,{isOpen:t,onClose:a},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null,"Donate"),r.a.createElement(j.c,null),r.a.createElement(j.b,null,r.a.createElement(Oe,{onClose:a,handleIsSubmitting:d,items:c,donate:o,postId:l})),r.a.createElement(j.e,null,r.a.createElement(x.a,{variant:"ghost",mr:3,onClick:function(){a(),d(!1)}},"Cancel"),r.a.createElement(x.a,{variantColor:"cyan",type:"submit",isLoading:u,form:"donateForm"},"Donate"))))},xe=function(e){var t=e.data,a=e.addComment,c=e.isLinked,o=e.isLoading,l=e.isPostSection,i=t._id,s=t.user,u=t.type,d=t.title,f=t.deadline,b=t.description,p=t.items,g=t.tags,O=t.likers,j=t.status,x=t.images,S=t.datePosted,I=s._id,F=s.name,D=s.username,T=s.avatar,W=F.firstName+" "+F.lastName,M=Object(n.useContext)(st),_=Object(m.a)(M,1)[0].user._id,A=Object(h.a)(),V=A.isOpen,J=A.onOpen,G=A.onClose,H=Object(h.a)(),Y=H.isOpen,$=H.onOpen,Q=H.onClose,K=Object(n.useState)([]),X=Object(m.a)(K,2),Z=X[0],ee=X[1],te=Object(n.useState)(""),ae=Object(m.a)(te,2),ne=ae[0],re=ae[1],ce=new Date,oe=new Date(f).getTime()-ce.getTime(),le=Math.ceil(oe/864e5),ie=Math.ceil(oe/36e5),se=Math.ceil(oe/6e4);return Object(n.useEffect)((function(){ee(p),re(j)}),[p,j]),r.a.createElement("div",null,o?r.a.createElement(U,null):r.a.createElement(P.a,{p:"5",pb:"2",mb:"4",bg:"white",shadow:"sm",rounded:"lg",pos:"relative",_hover:{borderColor:"gray.200",bg:"gray.50"}},c?r.a.createElement(v.a,{as:k.b,to:"/profile/post/".concat(i),w:"full",h:"full",pos:"absolute",top:"0",left:"0",bottom:"0",right:"0"}):"",r.a.createElement(q,{avatar:T,title:d,author:W,deadline:f,status:ne,username:D,datePosted:S}),r.a.createElement(v.a,{my:"4"},r.a.createElement(y.a,{fontWeight:"extrabold",fontFamily:"heading"},d),r.a.createElement(v.a,null,r.a.createElement(N.a,{variantColor:"PENDING"===ne?"pink":"UNFULFILLED"===ne?"yellow":"green"},"PENDING"!==ne?ne:ie<=1?"".concat(se," mins left"):le<=1?"".concat(ie," hrs left"):"".concat(le," days left"))),r.a.createElement(y.a,{mt:"4",fontSize:"sm"},b)),r.a.createElement(z,{items:Z,type:u},x&&l?x.map((function(e){return r.a.createElement(L.a,{src:e.url,w:"full",h:"64",mt:"2",objectFit:"cover"})})):x&&0!==x.length?r.a.createElement(L.a,{src:x[0].url,w:"full",h:"64",mt:"2",objectFit:"cover"}):""),r.a.createElement(R,{tags:g}),r.a.createElement(E.a,{justify:"space-around",borderTop:"2px",borderColor:"gray.300",pt:"2"},r.a.createElement(C.a,{isDisabled:"PENDING"!==ne||I===_,size:"lg",variant:"ghost",isRound:!0,icon:"donation"===u?w.p:w.h,onClick:$}),r.a.createElement(C.a,{variant:"ghost",size:"lg",isRound:!0,icon:w.e,onClick:J}),r.a.createElement(B,{postId:i,likers:O})),e.children),"donation"===u?r.a.createElement(ye,{isOpen:Y,onClose:Q,items:Z,postId:i}):r.a.createElement(je,{isOpen:Y,onClose:Q,items:Z,donate:function(e){ee(e),e.every((function(e){return e.total-e.amount===0}))&&re("FULFILLED")},postId:i}),r.a.createElement(he,{isOpen:V,onClose:G,addComment:a}))},Ce=function(e){var t=e.onClose,a=e.handleIsSubmitting,c=e.createPost,o=Object(n.useContext)(st),l=Object(m.a)(o,1)[0],d=l.user,f=l.token,b=Object(n.useState)(),p=Object(m.a)(b,2),E=p[0],g=p[1],h={userId:d._id,title:"",description:"",type:"donation",location:"",deadline:new Date,items:[{name:"",total:1,amount:0}],tags:[""],images:[],status:"PENDING"},v=G.e().shape({title:G.g().required("Required"),description:G.g().required("Required"),type:G.g().required("Required"),location:G.g().required("Required"),deadline:G.b().min(h.deadline,"Invalid Date"),items:G.a().of(G.e().shape({name:G.g().required("Required"),total:G.d().min(1,"Minimum of one item").required("Required")})).required("Required"),tags:G.a().of(G.g().required("Required")).required("Required"),images:G.c().test("length","Only 3 images are allowed per post",(function(e){return e&&e.length<=3}))}),y=function(){var e=Object(s.a)(i.a.mark((function e(n){var r,o,l,s,m,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in a(!0),r=new FormData,n)if("items"===o)r.append(o,JSON.stringify(n[o]));else if("name"===o)r.append(o,JSON.stringify(n[o]));else if("tags"===o)r.append(o,JSON.stringify(n[o]));else if("images"===o)for(l=n[o].length,s=0;s<l;s++)r.append(o,n[o][s]);else r.append(o,n[o]);return e.prev=3,e.next=6,M.a.post("/api/posts",r,{headers:{Authorization:"Bearer "+f,"Content-Type":"multipart/form-data; boundary=<calculated when request is sent>"}});case 6:m=e.sent,d=m.data,c(Object(u.a)(Object(u.a)({},d.post),{},{user:Object(u.a)({},d.user)})),a(!1),t(),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(3),g({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0}),a(!1),t();case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{message:E}),r.a.createElement(J.d,{initialValues:h,validationSchema:v,onSubmit:y},(function(e){return r.a.createElement("div",null,r.a.createElement(J.c,{id:"postForm"},r.a.createElement(Ee,{control:"radio",label:"Type",name:"type"}),r.a.createElement(Ee,{control:"input",type:"text",label:"Title",name:"title"}),r.a.createElement(Ee,{control:"textarea",label:"Description",name:"description"}),r.a.createElement(Ee,{control:"input",type:"text",label:"Location",name:"location"}),r.a.createElement(Ee,{control:"date",label:"Deadline",name:"deadline"}),r.a.createElement(Ee,{control:"items",label:"Items",name:"items"}),r.a.createElement(Ee,{control:"tags",label:"Tags",name:"tags"}),r.a.createElement(Ee,{control:"images",type:"file",name:"images",label:"Add Image",multiple:"multiple",accept:"image/*",form:e})))})))},we=function(e){var t=e.posts,a=e.createPost,c=e.isLoading,o=Object(n.useState)(!1),l=Object(m.a)(o,2),i=l[0],s=l[1],u=Object(h.a)(),d=u.isOpen,f=u.onOpen,b=u.onClose;return r.a.createElement(r.a.Fragment,null,0===t.length?r.a.createElement(E.a,{align:"center",py:"8",flexDirection:"column"},r.a.createElement(v.a,{as:w.l,size:"20"}),r.a.createElement(y.a,{fontWeight:"bold",fontSize:"lg"},"Oooops!"),r.a.createElement(y.a,null,"Your feed is empty. Make a post now!")):r.a.createElement(O.a,{mb:{base:"16",md:"4"},px:{base:"0",sm:"4"}},t.map((function(e){return r.a.createElement(xe,{key:e._id,data:e,isLinked:!0,isLoading:c})}))),r.a.createElement(j.a,{isOpen:d,onClose:b},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null,"Create Post"),r.a.createElement(j.c,null),r.a.createElement(j.b,null,r.a.createElement(Ce,{onClose:b,handleIsSubmitting:s,createPost:a})),r.a.createElement(j.e,null,r.a.createElement(x.a,{variant:"ghost",mr:3,onClick:b},"Cancel"),r.a.createElement(x.a,{variantColor:"cyan",type:"submit",isLoading:i,form:"postForm"},"Post")))),r.a.createElement(C.a,{pos:"fixed",bottom:{base:"2rem",md:"8"},icon:"add",right:{base:"0",md:"8"},left:{base:"0",md:"initial"},mx:{base:"auto",md:"initial"},zIndex:"sticky",isRound:!0,variant:"solid",variantColor:"secondary","aria-label":"Post",shadow:"md",size:"lg",w:"16",h:"16",onClick:f}))},Se=function(){return r.a.createElement(E.a,null,r.a.createElement(E.a,null,r.a.createElement(v.a,{as:w.n,size:"6",color:"primary.600"}),r.a.createElement(y.a,{color:"gray.800",fontFamily:"Ubuntu",fontSize:"md",ml:"1"},"Logout")))},ke=a(332),qe=a(337),Ie=function(e){var t=e.onClose,a=e.handleIsSubmitting,c=Object(n.useContext)(st),o=Object(m.a)(c,1)[0].user._id,l=Object(n.useState)(),u=Object(m.a)(l,2),d=u[0],f=u[1],b={userId:o,oldPassword:"",newPassword:"",newPasswordCopy:""},p=G.e().shape({oldPassword:G.g().required("Required"),newPassword:G.g().required("Required"),newPasswordCopy:G.g().oneOf([G.f("newPassword")],"Password does not match").required("Required")}),E=function(){var e=Object(s.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,M.a.patch("/api/user/".concat(o,"/changePassword"),n);case 4:r=e.sent,r.data,a(!1),t(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),f({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{message:d}),r.a.createElement(J.d,{initialValues:b,validationSchema:p,onSubmit:E},(function(e){return r.a.createElement("div",null,r.a.createElement(J.c,{id:"changePasswordForm"},r.a.createElement(Ee,{control:"password",label:"Old Password",name:"oldPassword"}),r.a.createElement(Ee,{control:"password",label:"New Password",name:"newPassword"}),r.a.createElement(Ee,{control:"password",name:"newPasswordCopy",placeholder:"Enter your new password again"})))})))},Ne=function(e){var t=e.title,a=Object(n.useContext)(st),c=Object(m.a)(a,2),o=c[0],l=c[1],u=o.user,d=o.token,f=u.photo,b=u.name,p=b.firstName+" "+b.lastName,g=Object(h.a)(),O=g.isOpen,C=g.onOpen,w=g.onClose,q=Object(n.useState)(!1),I=Object(m.a)(q,2),N=I[0],F=I[1],z=Object(n.useState)(),D=Object(m.a)(z,2),R=D[0],P=D[1],L=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.post("/api/logout",{},{headers:{Authorization:"Bearer "+d}});case 3:t=e.sent,t.data,localStorage.removeItem("user"),l(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),P({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{message:R}),r.a.createElement(ke.a,{h:"16",bg:"primary.600",zIndex:"banner",templateColumns:{base:"repeat(2, 1fr)",md:"repeat(3, 1fr)"}},r.a.createElement(v.a,{d:{base:"none",md:"block"}}),r.a.createElement(y.a,{fontFamily:"Ubuntu",fontSize:["2xl","4xl"],fontWeight:"bold",color:"cyan.50",margin:"auto"},r.a.createElement(k.b,{to:"/"},t)),r.a.createElement(E.a,{alignItems:"center",justify:"flex-end",mr:"4"},r.a.createElement(qe.e,null,r.a.createElement(qe.a,{as:x.a,variantColor:"black",px:"2",variant:"solid",rightIcon:"chevron-down",_hover:{bg:"cyan.500"},_active:{bg:"cyan.400"}},r.a.createElement(S.a,{src:f,size:"sm",name:p,mr:{base:"0",lg:"2"}}),r.a.createElement(y.a,{color:"cyan.50",fontFamily:"Ubuntu",fontSize:"sm",d:{base:"none",lg:"block"}},p)),r.a.createElement(qe.d,{zIndex:"popover"},r.a.createElement(qe.c,{leftIcon:"add",onClick:C},"Change Password"),r.a.createElement(qe.b,null),r.a.createElement(qe.c,{as:k.b,to:"/",onClick:L},r.a.createElement(Se,null)))))),r.a.createElement(j.a,{isOpen:O,onClose:w},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null,"Change Password"),r.a.createElement(j.c,null),r.a.createElement(j.b,null,r.a.createElement(Ie,{onClose:w,handleIsSubmitting:F})),r.a.createElement(j.e,null,r.a.createElement(x.a,{variant:"ghost",mr:3,onClick:function(){w(),F(!1)}},"Cancel"),r.a.createElement(x.a,{variantColor:"cyan",type:"submit",isLoading:N,form:"changePasswordForm"},"Save")))))},Fe=a(39),ze=function(){var e=Object(g.f)();return r.a.createElement(C.a,{variant:"ghost",variantColor:"cyan",icon:function(){return r.a.createElement(v.a,{as:w.a,size:"6"})},onClick:function(){return e.goBack()},mr:"2"})},De=function(e){var t=e.title,a=e.hasBackButton;return r.a.createElement(E.a,{h:"16",zIndex:"sticky",align:"center",pl:"4",pos:"sticky",top:"0",bg:"gray.100"},a&&r.a.createElement(ze,null),r.a.createElement(v.a,{as:e.icon,size:"6",color:"primary.600",mr:"2"}),r.a.createElement(y.a,{fontFamily:"Ubuntu",fontWeight:"semibold",fontSize:"2xl"},t))},Re=r.a.createContext(null),Pe=[{_id:"1",user:{name:{firstName:"",lastName:""},avatar:null,username:"",userId:1},avatar:null,title:"",name:{firstName:"",lastName:""},deadline:null,description:"",items:[],tags:[],likers:[],status:"",images:[]},{_id:"2",user:{name:{firstName:"",lastName:""},avatar:null,username:"",userId:2},avatar:null,title:"",name:{firstName:"",lastName:""},deadline:null,description:"",items:[],tags:[],likers:[],status:"",images:[]},{_id:"3",user:{name:{firstName:"",lastName:""},avatar:null,username:"",userId:3},avatar:null,title:"",name:{firstName:"",lastName:""},deadline:null,description:"",items:[],tags:[],likers:[],status:"",images:[]}],Le=function(e){var t=e.children,a=Object(n.useState)(Pe),c=Object(m.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)([]),s=Object(m.a)(i,2),u={post:[o,l],filteredPost:[s[0],s[1]]};return r.a.createElement(Re.Provider,{value:u},t)},Te=function(){var e=Object(n.useContext)(Re).post,t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!0),l=Object(m.a)(o,2),u=l[0],d=l[1],f=Object(n.useState)(),b=Object(m.a)(f,2),p=b[0],E=b[1];return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/api/posts");case 3:t=e.sent,a=t.data,c(a.response),d(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),E({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[c]),r.a.createElement(v.a,null,r.a.createElement(A,{message:p}),r.a.createElement(De,{title:"Home",icon:w.m}),r.a.createElement(we,{posts:a,createPost:function(e){c((function(t){return[].concat(Object(Fe.a)(t),[e])}))},isLoading:u}))},We=function(e){return r.a.createElement(v.a,{d:{base:"none",md:"flex"},w:{lg:"xs"},h:"100vh",flexGrow:{base:0,md:1,lg:"0"},maxW:"xs",position:"sticky",top:"0",borderRight:"4px",color:"gray.400",flexDirection:"column",justifyContent:"space-between",px:"10",pt:"6",pb:"20"},e.children)},Me=function(e){return r.a.createElement(v.a,{w:{md:"xl"},minW:"xs",maxW:"xl",flexGrow:{base:"1",md:"0"}},e.children)},_e=function(e){var t=e.variant,a=Object(H.a)(e,["variant"]),c=Object(n.useContext)(st),o=Object(m.a)(c,1)[0].user.username;return"side"===t?r.a.createElement(E.a,Object.assign({flexDirection:"column",justifyContent:"space-around",h:"40vh"},a),r.a.createElement(k.c,{exact:!0,to:"/",activeclassname:"active"},r.a.createElement(E.a,{p:"2"},r.a.createElement(v.a,{ml:"4",as:w.m,size:"8",color:"primary.600"}),r.a.createElement(y.a,{color:"primary.600",fontWeight:"bold",fontFamily:"Ubuntu",fontSize:"xl",lineHeight:"tall",ml:"1"},"Home"))),r.a.createElement(E.a,{as:k.c,to:"/notification",p:"2",activeClassname:"active",rounded:"full"},r.a.createElement(v.a,{ml:"4",as:w.b,size:"8",color:"primary.600"}),r.a.createElement(y.a,{color:"primary.600",fontWeight:"bold",fontFamily:"Ubuntu",fontSize:"xl",lineHeight:"tall",ml:"1"},"Notification")),r.a.createElement(E.a,{as:k.c,to:"/avails",p:"2",activeClassname:"active",rounded:"full"},r.a.createElement(v.a,{ml:"4",as:w.o,size:"8",color:"primary.600"}),r.a.createElement(y.a,{color:"primary.600",fontWeight:"bold",fontFamily:"Ubuntu",fontSize:"xl",lineHeight:"tall",ml:"1"},"Avails")),r.a.createElement(E.a,{as:k.c,to:"".concat(o),p:"2",activeClassname:"active",rounded:"full"},r.a.createElement(v.a,{ml:"4",as:w.k,size:"8",color:"primary.600"}),r.a.createElement(y.a,{color:"primary.600",fontWeight:"bold",fontFamily:"Ubuntu",fontSize:"xl",lineHeight:"tall",ml:"1"},"Profile"))):r.a.createElement(E.a,Object.assign({pos:"fixed",bottom:"0",bg:"gray.50",justify:"space-evenly",w:"full",py:"2"},a),r.a.createElement(k.c,{exact:!0,to:"/",activeclassname:"active"},r.a.createElement(v.a,{p:"2",rounded:"lg"},r.a.createElement(v.a,{as:w.m,size:"8",color:"primary.600"}))),r.a.createElement(v.a,{as:k.c,to:"/avails",p:"2",rounded:"lg",activeClassname:"active"},r.a.createElement(v.a,{as:w.o,size:"8",color:"primary.600"})),r.a.createElement(v.a,{as:k.c,to:"/notification",p:"2",rounded:"lg",activeClassname:"active"},r.a.createElement(v.a,{as:w.b,size:"8",color:"primary.600"})),r.a.createElement(v.a,{as:k.c,to:"".concat(o),p:"2",rounded:"lg",activeClassname:"active"},r.a.createElement(v.a,{as:w.k,size:"8",color:"primary.600"})))},Ae=function(e){return r.a.createElement(v.a,{d:{base:"none",lg:"flex"},maxW:"xs",flexGrow:{base:"0",lg:"1"}},e.children)},Be={avatar:null,author:"",title:"",name:{firstName:"",lastName:""},description:"",type:"donation",location:"",deadline:"",items:[],tags:[],images:[],comments:[],likers:[]},Ve=function(e){e.match;var t=Object(g.g)().id,a=Object(n.useState)(Be),c=Object(m.a)(a,2),o=c[0],l=c[1],d=Object(n.useState)([]),f=Object(m.a)(d,2),b=f[0],p=f[1],h=Object(n.useState)(!0),j=Object(m.a)(h,2),x=j[0],C=j[1],k=Object(n.useState)(),q=Object(m.a)(k,2),I=q[0],N=q[1];return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/api/posts/".concat(t));case 3:a=e.sent,n=a.data,console.log("Comments: ",n.comments),l((function(e){return Object(u.a)(Object(u.a)({},e),n)})),p(n.comments),C(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),N({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),r.a.createElement("div",null,r.a.createElement(A,{message:I}),r.a.createElement(De,{title:"Post",icon:w.r,hasBackButton:!0}),r.a.createElement(v.a,{px:"5",mb:{base:"20",md:"2"}},x?r.a.createElement(U,null):r.a.createElement(xe,{data:o,addComment:function(e){console.log("Comment: ",e),p((function(t){return[].concat(Object(Fe.a)(t),[e])}))},isLinked:!1,isPostSection:!0},r.a.createElement(O.a,{mt:"2"},b.map((function(e){var t=e.user.name.firstName+" "+e.user.name.lastName;return r.a.createElement(v.a,{key:e._id,borderTop:"1px",borderColor:"gray.200",mb:"4",pt:"4"},r.a.createElement(E.a,{mb:"2"},r.a.createElement(S.a,{size:"md",name:t,src:e.user.avatar,mr:"4"}),r.a.createElement(v.a,null,r.a.createElement(y.a,{fontWeight:"bold"},t),r.a.createElement(y.a,{fontWeight:"light",fontSize:"sm",mb:"2"},"@",e.user.username),r.a.createElement(y.a,{fontFamily:"body"},e.content))))}))))))},Ue=a(187),Je=a(333),Ge=function(e){var t=e.onClose,a=e.handleIsSubmitting,c=e.profile,o=e.updateProfile,l=Object(g.f)(),d=c._id,f=c.username,b=c.name,p=c.location,E=c.email,h=c.contactNumber,v=c.bio,y=Object(n.useState)(),O=Object(m.a)(y,2),j=O[0],x=O[1],C={username:f,name:{firstName:b.firstName,lastName:b.lastName},location:p||"",email:E,contactNumber:h,bio:v||""},w=G.e().shape({username:G.g().matches(/^\S*$/,"Invalid username").required("Required"),name:G.e().shape({firstName:G.g().required("Required"),lastName:G.g().required("Required")}).required("Required"),location:G.g(),email:G.g().email("Invalid email").required("Required"),contactNumber:G.g().matches(/^(09|\+639)\d{9}$/,"Enter valid phone number").required("Required"),bio:G.g()}),S=function(){var e=Object(s.a)(i.a.mark((function e(n){var r,c,s,m,f,b,p,E,g,h,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,M.a.patch("/api/user/".concat(d,"/editUser"),n);case 4:r=e.sent,c=r.data,s=c.user,o(s),m=s.name,f=s.username,b=s.email,p=s.photo,E=JSON.parse(localStorage.getItem("user")),g=E.user,h=Object(u.a)(Object(u.a)({},g),{},{name:m,username:f,email:b,photo:p}),v=Object(u.a)(Object(u.a)({},E),{},{user:h}),localStorage.setItem("user",JSON.stringify(v)),a(!1),t(),l.push("".concat(f)),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),x({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0});case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{message:j}),r.a.createElement(J.d,{initialValues:C,validationSchema:w,onSubmit:S},(function(e){return r.a.createElement("div",null,r.a.createElement(J.c,{id:"editProfileForm"},r.a.createElement(Ee,{control:"input",label:"Username",name:"username"}),r.a.createElement(Ee,{control:"input",label:"First Name",name:"name.firstName"}),r.a.createElement(Ee,{control:"input",label:"Last Name",name:"name.lastName"}),r.a.createElement(Ee,{control:"input",label:"Location",name:"location"}),r.a.createElement(Ee,{control:"input",label:"Email",name:"email"}),r.a.createElement(Ee,{control:"input",type:"tel",label:"Contact number",name:"contactNumber"}),r.a.createElement(Ee,{control:"textarea",label:"Bio",name:"bio"})))})))},He={username:"",name:{firstName:"",lastName:""},photo:null,email:"",location:"",contactNumber:"",bio:"",donationCount:0,requestCount:0,posts:[]},Ye=function(){var e=Object(g.g)().username,t=Object(h.a)(),a=t.isOpen,c=t.onOpen,o=t.onClose,l=Object(n.useState)(!1),d=Object(m.a)(l,2),f=d[0],b=d[1],p=Object(n.useState)(!0),O=Object(m.a)(p,2),k=O[0],q=O[1],I=Object(n.useState)(),N=Object(m.a)(I,2),F=N[0],z=N[1],D=Object(n.useState)(He),R=Object(m.a)(D,2),P=R[0],L=R[1],T=Object(n.useState)(P.posts),W=Object(m.a)(T,2),_=W[0],B=W[1],V=P.name.firstName+" "+P.name.lastName;return Object(n.useEffect)((function(){(function(){var t=Object(s.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.a.get("/api/users/".concat(e));case 3:a=t.sent,n=a.data,L((function(e){return Object(u.a)(Object(u.a)({},e),n.user)})),console.log("Feed: ",n.user.posts),B(n.user.posts),q(!1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),z({title:"Error",description:t.t0.message,status:"error",duration:2e3,isClosable:!0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}})()()}),[e]),r.a.createElement("div",null,r.a.createElement(A,{message:F}),r.a.createElement(De,{title:"Profile",icon:w.k,hasBackButton:!0}),k?r.a.createElement(E.a,{justify:"center",pt:"8"},r.a.createElement(Ue.a,{thickness:"6px",speed:"0.65s",emptyColor:"gray.200",color:"primary.600",size:"xl"})):r.a.createElement(v.a,{mx:"4",mb:{base:"24",md:"2"},shadow:"sm",bg:"white",rounded:"lg"},r.a.createElement(E.a,{justify:"flex-end"},r.a.createElement(C.a,{onClick:c,variant:"ghost",icon:w.i,size:"lg",m:"2"})),r.a.createElement(E.a,{pb:"4",borderBottom:"4px",borderColor:"gray.200",mb:"4",flexDirection:"column",justify:"center",align:"center"},r.a.createElement(S.a,{size:"2xl",src:P.photo,name:V,mb:"2"}),r.a.createElement(y.a,{fontSize:"2xl",fontWeight:"semibold"},V),r.a.createElement(y.a,{fontWeight:"light"},"@",P.username),r.a.createElement(E.a,{px:"8",py:"4",justify:"center"},r.a.createElement(y.a,{textAlign:"center"},P.bio)),r.a.createElement(E.a,{flexDirection:"column",mt:"2"},r.a.createElement(E.a,{align:"center",justify:"center"},r.a.createElement(v.a,{as:w.f,color:"primary.600",size:"6"}),r.a.createElement(y.a,{ml:"2"},P.location||"---")),r.a.createElement(E.a,{align:"center",justify:"center"},r.a.createElement(v.a,{as:w.j,color:"primary.600",size:"6"}),r.a.createElement(y.a,{ml:"2"},P.email||"---")),r.a.createElement(E.a,{align:"center",justify:"center"},r.a.createElement(v.a,{as:w.s,color:"primary.600",size:"6"}),r.a.createElement(y.a,{ml:"2"},P.contactNumber||"---"))),r.a.createElement(Je.b,null,r.a.createElement(Je.a,{d:"flex",p:"4",flexDirection:"column",justifyContent:"center",alignItems:"center"},r.a.createElement(Je.d,null,P.donationGiven),r.a.createElement(Je.c,{color:"primary.600"},"Donations")),r.a.createElement(Je.a,{d:"flex",p:"4",flexDirection:"column",justifyContent:"center",alignItems:"center"},r.a.createElement(Je.d,null,P.donationRequested),r.a.createElement(Je.c,{color:"primary.600"},"Requests")))),r.a.createElement(we,{posts:_,createPost:function(e){B((function(t){return[].concat(Object(Fe.a)(t),[e])}))}})),r.a.createElement(j.a,{isOpen:a,onClose:o},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null,"Edit Profile"),r.a.createElement(j.c,null),r.a.createElement(j.b,null,r.a.createElement(Ge,{onClose:o,handleIsSubmitting:b,profile:P,updateProfile:function(e){console.log("Updated User: ",e),L((function(t){return Object(u.a)(Object(u.a)({},t),e)}))}})),r.a.createElement(j.e,null,r.a.createElement(x.a,{variant:"ghost",mr:3,onClick:o},"Cancel"),r.a.createElement(x.a,{variantColor:"cyan",type:"submit",isLoading:f,form:"editProfileForm"},"Save")))))},$e=a(33),Qe=a(334),Ke=function(){var e=Object(n.useContext)(Re),t=e.post,a=e.filteredPost,c=Object(m.a)(t,1)[0],o=Object(m.a)(a,2),l=(o[0],o[1]),i=Object(n.useState)(""),s=Object(m.a)(i,2),u=s[0],d=s[1],f=Object(n.useState)("title"),b=Object(m.a)(f,2),p=b[0],E=b[1],h=Object(g.f)(),y=r.a.forwardRef((function(e,t){var a=e.isChecked,n=e.isDisabled,c=(e.value,Object(H.a)(e,["isChecked","isDisabled","value"]));return r.a.createElement(x.a,Object.assign({ref:t,size:"sm",variant:"ghost",variantColor:a?"cyan":"gray","aria-checked":a,role:"radio",isDisabled:n},c))}));return r.a.createElement(v.a,{p:"4",pos:"sticky",top:"0",h:"100vh"},r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),""===u)return null;var t=c.filter((function(e){var t=e.user.name.firstName+" "+e.user.name.lastName;return"title"===p?-1!==e.title.toLowerCase().indexOf(u.toLowerCase()):"author"===p?-1!==t.toLowerCase().indexOf(u.toLowerCase()):"tags"===p&&!0===e.tags.map((function(e){return e.toLowerCase()===u.toLowerCase()})).includes(!0)}));l(t),h.push("/search")},onReset:function(){d(""),E("")}},r.a.createElement(ie.a,null,r.a.createElement(se.a,{children:r.a.createElement($e.a,{name:"search",color:"primary.600"})}),r.a.createElement(Q.a,{placeholder:"Search Donasource",onChange:function(e){return d(e.target.value)},name:"search",value:u,type:"text",size:"md",focusBorderColor:"primary.600"})),r.a.createElement(Qe.a,{d:"flex",mt:"2",defautlValue:"title",onChange:function(e){return E(e)},value:p},r.a.createElement(y,{m:"0",value:"title"},"Title"),r.a.createElement(y,{m:"0",value:"author"},"Author"),r.a.createElement(y,{m:"0",value:"tags"},"Tags")),r.a.createElement(x.a,{variantColor:"cyan",type:"submit"},"Search")))},Xe=function(e){var t=e.handleIsSubmitting,a=e.login,n=G.e().shape({email:G.g().email("Invalid email").required("Required"),password:G.g().required("Required")}),c=function(){var e=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(!0),a(n),t(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(J.d,{initialValues:{email:"",password:""},validationSchema:n,onSubmit:c},(function(e){return r.a.createElement("div",null,r.a.createElement(J.c,{id:"loginform"},r.a.createElement(Ee,{control:"input",type:"email",label:"Email",name:"email",placeholder:"Enter email"}),r.a.createElement(Ee,{control:"password",label:"Password",name:"password"})))}))},Ze=function(e){var t=e.handleIsSubmitting,a=e.signup,n=G.e().shape({username:G.g().matches(/^\S*$/,"Invalid username").required("Required"),firstName:G.g().required("Required"),lastName:G.g().required("Required"),email:G.g().email("Invalid email").required("Required"),contactNumber:G.g().matches(/^(09|\+639)\d{9}$/,"Enter a valid phone number").required("Required"),password:G.g().required("Required"),repassword:G.g().oneOf([G.f("password")],"Password does not match").required("Required")}),c=function(){var e=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(!0),a(n),console.log("Values: ",n),t(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(J.d,{initialValues:{username:"",firstName:"",lastName:"",email:"",contactNumber:"",password:"",repassword:""},validationSchema:n,onSubmit:c},(function(e){return r.a.createElement("div",null,r.a.createElement(J.c,{id:"signupform"},r.a.createElement(Ee,{control:"input",label:"Username",name:"username"}),r.a.createElement(Ee,{control:"input",label:"First Name",name:"firstName"}),r.a.createElement(Ee,{control:"input",label:"Last Name",name:"lastName"}),r.a.createElement(Ee,{control:"input",type:"email",label:"Email",name:"email",placeholder:"Enter email"}),r.a.createElement(Ee,{control:"input",type:"tel",label:"Contact number",name:"contactNumber"}),r.a.createElement(Ee,{control:"password",label:"Password",name:"password"}),r.a.createElement(Ee,{control:"password",name:"repassword",placeholder:"Enter password again"})))}))},et=function(e){var t=e.login,a=e.signup,c=Object(n.useState)(!0),o=Object(m.a)(c,2),l=o[0],i=o[1],s=Object(n.useState)(!1),u=Object(m.a)(s,2),d=u[0],f=u[1],b=function(e){f(e)},p=function(){i(!l)};return r.a.createElement(E.a,{bg:"primary.600",h:l?"100vh":"full",minH:"100vh",flexDirection:{base:"column-reverse",lg:"row"},justify:{base:"center",lg:"space-evenly"},align:{base:"center",lg:"center"},p:"2"},l?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{bg:"white",shadow:"md",rounded:"lg",py:"12",px:"10"},r.a.createElement(y.a,{fontSize:"3xl",fontWeight:"bold",mb:"4"},"Login"),r.a.createElement(Xe,{handleIsSubmitting:b,login:t}),r.a.createElement(E.a,{justify:"flex-end",mt:"8"},r.a.createElement(x.a,{mr:"2",onClick:p},"Sign up"),r.a.createElement(x.a,{type:"submit",variantColor:"cyan",form:"loginform",isLoading:d},"Log in"))),r.a.createElement(v.a,{w:{base:"xs",lg:"lg"}},r.a.createElement(y.a,{fontSize:"5xl",textAlign:{base:"center",lg:"left"},fontWeight:"extrabold",color:"secondary.100"},"Donasource"),r.a.createElement(y.a,{d:{base:"none",lg:"block"},fontSize:"lg",color:"white"},"Donasource is a web application that connects people who need help and those people who can help by posting their needs or what they are willing to donate."))):r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{bg:"white",shadow:"md",rounded:"lg",py:"12",px:"10",maxh:"100vh"},r.a.createElement(y.a,{fontSize:"3xl",fontWeight:"bold",mb:"4"},"Sign up"),r.a.createElement(Ze,{handleIsSubmitting:b,signup:a}),r.a.createElement(E.a,{justify:"flex-end",mt:"8"},r.a.createElement(x.a,{mr:"2",onClick:p},"Log in"),r.a.createElement(x.a,{type:"submit",variantColor:"cyan",form:"signupform",isLoading:d},"Sign up"))),r.a.createElement(v.a,{w:{base:"xs",lg:"lg"}},r.a.createElement(y.a,{d:{base:"block",lg:"none"},fontSize:"5xl",textAlign:"center",fontWeight:"extrabold",color:"secondary.100"},"Join Us!"),r.a.createElement(y.a,{d:{base:"none",lg:"block"},fontSize:"5xl",fontWeight:"extrabold",color:"secondary.100"},"Join Us and be part of a community that helps one another."))))},tt=function(){var e=Object(n.useContext)(Re).filteredPost,t=Object(m.a)(e,1)[0],a=Object(n.useState)(!1),c=Object(m.a)(a,2),o=c[0],l=c[1];return Object(n.useEffect)((function(){l(!0),setTimeout((function(){l(!1)}),500)}),[t]),r.a.createElement("div",null,r.a.createElement(De,{title:"Search results:",icon:w.t,hasBackButton:!0}),o?r.a.createElement(E.a,{justify:"center",pt:"8"},r.a.createElement(Ue.a,{thickness:"6px",speed:"0.65s",emptyColor:"gray.200",color:"primary.600",size:"xl"})):0===t.length?r.a.createElement(E.a,{align:"center",py:"8",flexDirection:"column"},r.a.createElement(v.a,{as:w.g,size:"20"}),r.a.createElement(y.a,{fontWeight:"bold",fontSize:"lg"},"No results found."),r.a.createElement(y.a,null,"We cannot find the post you are looking for. Try searching with another term.")):r.a.createElement(O.a,{mb:{base:"16",md:"4"},px:{base:"0",sm:"4"}},t.map((function(e){return r.a.createElement(xe,{key:e._id,data:e,isLinked:!0})}))))},at=a(196),nt=function(e){var t=e.notif,a=e.seenNotif,n=t._id,c=t.user,o=t.type,l=t.postId,i=t.date,s=t.title,m=t.seen,u=c.avatar,d=c.name,f=c.username,b=d.firstName+" "+d.lastName,p=new Date,g=new Date(i),h=p.getTime()-g.getTime(),O=Math.floor(h/864e5),j=Math.floor(h/36e5),x=Math.floor(h/6e4),C=Math.floor(h/1e3);return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.b,{to:"/profile/post/".concat(l),onClick:function(){return a(n)}},r.a.createElement(E.a,{pl:"4",py:"4",align:"center",bg:"like"!==o||m?"comment"!==o||m?"donate"!==o||m?"accept"!==o||m?"reject"!==o||m?"none":"red.100":"green.100":"yellow.100":"blue.100":"cyan.100",mx:"4",rounded:"lg"},r.a.createElement(k.b,{to:"/".concat(f)},r.a.createElement(S.a,{name:"Bullet Pua",src:u})),r.a.createElement(v.a,{ml:"4"},r.a.createElement(y.a,null,r.a.createElement("b",null,b+" "),"like"===o?"liked your posts: ":"comment"===o?"commented on your post: ":"donate"===o?"donated on your post: ":"accept"===o?"accepted your request on post: ":"reject"===o?"rejected your request on post: ":"",r.a.createElement("b",null,'"',s,'"')),r.a.createElement(y.a,{fontSize:"sm",color:"gray.700"},j>=24?"".concat(O,"d ago"):x>=60?"".concat(j,"hr ago"):C>=60?"".concat(x,"min ago"):"".concat(C," sec ago"))))),r.a.createElement(at.a,null))},rt=["January","February","March","April","May","June","July","August","September","October","November","December"],ct=function(){var e=Object(n.useContext)(st),t=Object(m.a)(e,1)[0].user._id,a=Object(n.useState)([]),c=Object(m.a)(a,2),o=c[0],l=c[1],u=Object(n.useState)(!0),d=Object(m.a)(u,2),f=d[0],b=d[1],p=Object(n.useState)(),g=Object(m.a)(p,2),h=g[0],O=g[1],j=function(){var e=Object(s.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/api/users/".concat(t,"/notifications/").concat(a));case 3:n=e.sent,n.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),O({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var a,n,r,c,o,s,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/api/users/".concat(t,"/notifications"));case 3:a=e.sent,n=a.data,r=[],c=new Date,o=Math.floor(c.getTime()/864e5),s=0,m=0,n.notifications.forEach((function(e){var t=new Date(e.date),a=Math.floor(t.getTime()/864e5),n=a===o?"Today":a===o-1?"Yesterday":"".concat(rt[t.getMonth()]," ").concat(t.getDate());m!==a?(r.push({label:n,contents:[e]}),s+=1,m=a):r[s-1].contents.push(e)})),l(r),b(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),alert(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{message:h}),r.a.createElement(De,{title:"Notification",icon:w.b}),f?r.a.createElement(E.a,{justify:"center",pt:"8"},r.a.createElement(Ue.a,{thickness:"6px",speed:"0.65s",emptyColor:"gray.200",color:"primary.600",size:"xl"})):0===o.length?r.a.createElement(E.a,{align:"center",py:"8",flexDirection:"column"},r.a.createElement(v.a,{as:w.c,size:"20"}),r.a.createElement(y.a,{fontWeight:"bold",fontSize:"lg"},"No notifications yet"),r.a.createElement(y.a,null,"Stay tuned! Notifications about your activity will show up here.")):r.a.createElement(v.a,{mx:"4",rounded:"lg",bg:"white",shadow:"sm",pb:"2"},o.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{ml:"6",fontSize:"sm",fontWeight:"semibold",pt:"4",pb:"2",color:"gray.800"},e.label),r.a.createElement(at.a,null),e.contents.map((function(e){return r.a.createElement(nt,{key:e._id,notif:e,seenNotif:j})})))}))))},ot=a(335),lt=function(e){var t=e.avail,a=e.userId,c=t._id,o=t.user,l=t.post,u=t.reason,d=t.date,f=t.items,b=o.avatar,p=o.name,g=o.username,h=l._id,O=l.title,j=p.firstName+" "+p.lastName,C=new Date,q=new Date(d),I=C.getTime()-q.getTime(),F=Math.floor(I/864e5),z=Math.floor(I/36e5),D=Math.floor(I/6e4),R=Math.floor(I/1e3),P=Object(n.useState)(!1),L=Object(m.a)(P,2),T=L[0],W=L[1],_=Object(n.useState)(),B=Object(m.a)(_,2),V=B[0],U=B[1],J=Object(n.useState)(!1),G=Object(m.a)(J,2),H=G[0],Y=G[1],$=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Accept Request"),Y(!0),e.prev=2,e.next=5,M.a.patch("/api/users/".concat(a,"/avails/").concat(c),{response:"ACCEPT"});case 5:t=e.sent,t.data,Y(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),alert(e.t0.message),U({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),e.prev=1,e.next=4,M.a.patch("/api/users/".concat(a,"/avails/").concat(c),{response:"REJECT"});case 4:t=e.sent,t.data,Y(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),U({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{message:V}),r.a.createElement(v.a,{pt:"4",px:"6"},r.a.createElement(E.a,{align:"center",rounded:"lg",pb:"4"},r.a.createElement(k.b,{to:"/".concat(g)},r.a.createElement(S.a,{name:j,src:b})),r.a.createElement(v.a,{ml:"4"},r.a.createElement(y.a,null,r.a.createElement("b",null,j+" "),"requests on your donation:",r.a.createElement(k.b,{to:"/post/".concat(h)},r.a.createElement("b",null,' "'.concat(O,'"')))),r.a.createElement(y.a,{fontSize:"sm",color:"gray.700"},z>=24?"".concat(F,"d ago"):D>=60?"".concat(z,"hr ago"):R>=60?"".concat(D,"min ago"):"".concat(R," sec ago")))),r.a.createElement(v.a,{p:"2",bg:"blue.100",rounded:"lg",mb:"2"},r.a.createElement(ot.a,{startingHeight:32,isOpen:T,ml:"4",mt:"2"},r.a.createElement(y.a,{fontWeight:"bold"},"Items requested:"),f.map((function(e){return r.a.createElement(E.a,{ml:"4",align:"center"},r.a.createElement(v.a,{as:w.d,mr:"2"}),r.a.createElement(y.a,{fontSize:"sm"},e.itemId.name),r.a.createElement(N.a,{ml:"2",variantColor:"orange"},e.amountRequested))})),r.a.createElement(at.a,null),r.a.createElement(y.a,{mt:"2",fontWeight:"bold"},"Reason:"),r.a.createElement(y.a,{ml:"4",fontSize:"sm"},u)),r.a.createElement(x.a,{ml:"4",mt:"1",size:"sm",variant:"ghost",variantColor:"blue",onClick:function(){return W(!T)}},"Show ",T?"Less":"More")),r.a.createElement(E.a,{justify:"flex-end"},r.a.createElement(x.a,{size:"sm",isLoading:H,onClick:function(){return Q()}},"Reject"),r.a.createElement(x.a,{size:"sm",isLoading:H,onClick:function(){return $()},variantColor:"cyan",ml:"2"},"Accept"))),r.a.createElement(at.a,null))},it=function(){var e=Object(n.useContext)(st),t=Object(m.a)(e,1)[0].user._id,a=Object(n.useState)([]),c=Object(m.a)(a,2),o=c[0],l=c[1],u=Object(n.useState)(!0),d=Object(m.a)(u,2),f=d[0],b=d[1],p=Object(n.useState)(),g=Object(m.a)(p,2),h=g[0],O=g[1];return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/api/users/".concat(t,"/avails"));case 3:a=e.sent,n=a.data,console.log("Avails: ",n.avails),l((function(e){return[].concat(Object(Fe.a)(e),Object(Fe.a)(n.avails))})),b(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),O({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0}),b(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{message:h}),r.a.createElement(De,{title:"Avails",icon:w.o}),f?r.a.createElement(E.a,{justify:"center",pt:"8"},r.a.createElement(Ue.a,{thickness:"6px",speed:"0.65s",emptyColor:"gray.200",color:"primary.600",size:"xl"})):0===o.length?r.a.createElement(E.a,{align:"center",py:"8",flexDirection:"column"},r.a.createElement(v.a,{as:w.q,size:"20"}),r.a.createElement(y.a,{fontWeight:"bold",fontSize:"lg"},"No one has requested yet."),r.a.createElement(y.a,null,"You can post more donations to get more request.")):r.a.createElement(v.a,{mx:"4",rounded:"lg",bg:"white",shadow:"sm",pb:"2"},r.a.createElement(at.a,null),o.map((function(e){return console.log(t),console.log("Avails length: ",o.length),r.a.createElement(lt,{avail:e,userId:t})}))))},st=r.a.createContext(null),mt=function(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),l=Object(m.a)(o,2),u=l[0],d=l[1],h=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.post("/api/login",t);case 3:a=e.sent,n=a.data,r={user:n.user,token:n.token},c(r),localStorage.setItem("user",JSON.stringify(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.post("/api/signup",t);case 3:a=e.sent,a.data,d({title:"Success",description:"You have successfully created your account.",status:"success",duration:2e3,isClosable:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d({title:"Error",description:e.t0.message,status:"error",duration:2e3,isClosable:!0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useLayoutEffect)((function(){c(JSON.parse(localStorage.getItem("user")))}),[]),r.a.createElement(b.a,{theme:f},r.a.createElement(p.a,null),r.a.createElement(st.Provider,{value:[a,c]},r.a.createElement(A,{message:u}),a?r.a.createElement("div",null,r.a.createElement(Ne,{title:"Donasource"}),r.a.createElement(E.a,{justify:{base:"center",xl:"space-evenly"}},r.a.createElement(We,null,r.a.createElement(_e,{variant:"side"})),r.a.createElement(Le,null,r.a.createElement(Me,null,r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/",component:Te}),r.a.createElement(g.a,{path:"/search",component:tt}),r.a.createElement(g.a,{path:"/notification",component:ct}),r.a.createElement(g.a,{path:"/avails",component:it}),r.a.createElement(g.a,{exact:!0,path:"/:username",component:Ye}),r.a.createElement(g.a,{path:"/:username/post/:id",component:Ve}))),r.a.createElement(_e,{variant:"bottom",d:{base:"flex",md:"none"}}),r.a.createElement(Ae,null,r.a.createElement(Ke,null))))):r.a.createElement(et,{login:h,signup:v})))};a(309);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k.a,null,r.a.createElement(mt,null))),document.getElementById("root"))}},[[199,1,2]]]);
//# sourceMappingURL=main.faab2d12.chunk.js.map