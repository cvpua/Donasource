(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{200:function(e,t,a){e.exports=a(311)},205:function(e,t,a){},311:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(49),l=a.n(c),o=(a(205),a(12)),i=a.n(o),s=a(21),m=a(6),u=a(24),d=a(341),f=(a(207),a(208),Object(u.a)(Object(u.a)({},d.a),{},{colors:{black:"#000",white:"#FFF",primary:{50:"#d9fffd",100:"#adfff8",200:"#7dfff1",300:"#4dffec",400:"#26ffe6",500:"#15e6cd",600:"#00b39f",700:"#008072",800:"#004e44",900:"#001c18"},secondary:{50:"#fafbe4",100:"#f0f3be",200:"#e6eb96",300:"#dde46d",400:"#d4dc45",500:"#bac22d",600:"#909722",700:"#676c18",800:"#3e410c",900:"#151600"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},gray:{50:"#f9f9f9",100:"#eceeee",200:"#dee1e1",300:"#ced4d3",400:"#bec5c4",500:"#abb5b4",600:"#96a2a1",700:"#7d8c8a",800:"#5d706d",900:"#344240"},cyan:{50:"#f3fbfa",100:"#daf2f0",200:"#bfe9e4",300:"#a0dfd7",400:"#7dd3c9",500:"#54c5b7",600:"#1fb3a1",700:"#009a88",800:"#007a6c",900:"#00483f"},blue:{50:"#f6fafc",100:"#e4eff6",200:"#d1e4ef",300:"#bbd7e8",400:"#a4c9e0",500:"#89b9d7",600:"#6aa7cc",700:"#4490bf",800:"#1071ad",900:"#00426b"},indigo:{50:"#f9f9fd",100:"#ebedf8",200:"#dde0f3",300:"#cdd1ee",400:"#bcc2e8",500:"#a9b0e2",600:"#939cda",700:"#7983d1",800:"#5663c5",900:"#182ab0"},violet:{50:"#faf9fd",100:"#f0ebf8",200:"#e6ddf3",300:"#daceee",400:"#cdbce8",500:"#bfa9e2",600:"#ae93da",700:"#9a78d1",800:"#7f55c5",900:"#4d11ae"},fuschia:{50:"#fcf8fd",100:"#f6eaf8",200:"#efdaf2",300:"#e8c9ed",400:"#e0b6e6",500:"#d7a0df",600:"#cd87d6",700:"#bf67cb",800:"#ab37bb",900:"#70007f"},pink:{50:"#fdf8fb",100:"#f8eaf2",200:"#f2dae9",300:"#edc9df",400:"#e6b6d4",500:"#dfa0c7",600:"#d687b8",700:"#cb67a5",800:"#bb3788",900:"#7e004e"},red:{50:"#fdf8f9",100:"#f8eaec",200:"#f3dbde",300:"#edcbcf",400:"#e7b8be",500:"#e0a3aa",600:"#d78b94",700:"#cd6c77",800:"#be3f4e",900:"#850010"},orange:{50:"#fcf9f7",100:"#f6ece5",200:"#f0ddd2",300:"#e9cebd",400:"#e1bda6",500:"#d8a98d",600:"#ce936e",700:"#c17749",800:"#af5016",900:"#6e2a00"},yellow:{50:"#fbfaf2",100:"#f1eed7",200:"#e7e2ba",300:"#e7e2ba",400:"#d0c676",500:"#c3b54e",600:"#b2a11e",700:"#9c8900",800:"#7b6c00",900:"#484000"},lime:{50:"#f7fbf2",100:"#e7f1d7",200:"#d6e7b9",300:"#c2dc99",400:"#add074",500:"#94c14a",600:"#76b018",700:"#5e9800",800:"#4b7800",900:"#2c4700"},green:{50:"#f5fbf4",100:"#dff3dc",200:"#c7eac2",300:"#ace0a5",400:"#8ed584",500:"#6ac85d",600:"#3cb72c",700:"#139f00",800:"#0f7e00",900:"#094a00"},teal:{50:"#f4fbf7",100:"#dcf3e5",200:"#c2ead1",300:"#a5e0bb",400:"#83d5a2",500:"#5cc785",600:"#2ab660",700:"#009f3c",800:"#007d30",900:"#004a1c"}}})),b=a(26),p=a(345),E=a(53),g=a(31),h=a(333),v=a(9),O=a(78),y=a(324),j=a(344),x=a(156),C=a(326),w=a(16),S=a(321),k=a(22),q=function(e){var t=e.avatar,a=e.username,n=e.author,c=e.datePosted,l=new Date,o=new Date(c),i=l.getTime()-o.getTime(),s=Math.floor(i/864e5),m=Math.floor(i/36e5),u=Math.floor(i/6e4),d=Math.floor(i/1e3);return r.a.createElement(E.a,{align:"center",mb:"2"},r.a.createElement(k.b,{to:"/".concat(a)},r.a.createElement(S.a,{size:"md",name:n,src:t,mr:"4"})),r.a.createElement(E.a,{flexDirection:"column",w:"full"},r.a.createElement(O.a,{fontSize:"sm",fontWeight:"semibold",mr:"1"},n),r.a.createElement(O.a,{fontSize:"sm",color:"gray.700"},"@".concat(a)),r.a.createElement(O.a,{fontSize:"sm",color:"gray.700"},m>=24?"".concat(s,"d ago"):u>=60?"".concat(m,"hr ago"):d>=60?"".concat(u,"min ago"):"".concat(d," sec ago"))))},N=a(322),z=a(323),I=function(e){var t=e.item,a=e.type,n=t.name,c=t.amount,l=t.total,o=0===l-c;return r.a.createElement(N.b,{d:"flex",alignItems:"center"},"request"===a?o?r.a.createElement(N.a,{icon:"check-circle",color:"green.500"}):r.a.createElement(N.a,{icon:"warning",color:"orange.500"}):0===c?r.a.createElement(N.a,{icon:"check-circle",color:"green.500"}):r.a.createElement(N.a,{icon:"warning",color:"orange.500"}),n,"request"===a?r.a.createElement(z.a,{variantColor:o?"green":"orange",ml:"2"},c," /",l):r.a.createElement(z.a,{variantColor:0===c?"green":"orange",ml:"2"},"".concat(c," left")))},F=function(e){var t=e.items,a=e.type;return r.a.createElement(v.a,{border:"2px",rounded:"lg",borderColor:"cyan.400",p:"4",mb:"2"},r.a.createElement(O.a,{fontSize:"sm"},"request"===a?"Need:":"Giving:"),r.a.createElement(N.c,{spacing:3,ml:"2"},t.map((function(e,t){return r.a.createElement(I,{key:t,item:e,type:a})}))),e.children)},D=a(325),R=function(e){var t=e.tags;return r.a.createElement(E.a,{align:"center",my:"2"},r.a.createElement(O.a,{fontSize:"sm",mr:"2"},"Tags:"),r.a.createElement(y.a,{spacing:1,isInline:!0},t.map((function(e,t){return r.a.createElement(D.a,{key:t,size:"sm"},e)}))))},P=a(38),L=a(187),T=a(196),W=a(151),A=a(23),M=a.n(A),B=a(339),_=function(e){var t=e.message,a=Object(B.a)();return Object(n.useEffect)((function(){t&&a(t)}),[a,t]),r.a.createElement(r.a.Fragment,null)},V=function(e){var t=e.postId,a=e.likers,c=Object(n.useContext)(ft),l=Object(m.a)(c,1)[0],o=l.user,u=l.token,d=o._id,f=o.name,b=o.username,p=Object(n.useState)(!1),g=Object(m.a)(p,2),h=g[0],O=g[1],y=Object(n.useState)(!1),j=Object(m.a)(y,2),x=j[0],w=j[1],S=Object(n.useState)(),k=Object(m.a)(S,2),q=k[0],N=k[1],z=Object(n.useState)(a.length),I=Object(m.a)(z,2),F=I[0],D=I[1],R=function(){var e=Object(s.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,M.a.patch("/api/posts/".concat(t,"/likes"),{userId:d,name:f,username:b},{headers:{Authorization:"Bearer "+u}});case 4:a=e.sent,a.data,D((function(e){return h?e-1:e+1})),O(!h),w(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),N({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=a.find((function(e){return e===d}));O(e)}),[a,d]),r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{message:q}),r.a.createElement(E.a,{align:"center"},r.a.createElement(C.a,{variant:"ghost",icon:h?W.a:W.b,rounded:"full",size:"lg",onClick:R,color:h?"red.800":"",isLoading:x}),r.a.createElement(v.a,{visibility:0===F?"hidden":"visible"},F)))},J=a(327),U=function(){return r.a.createElement(v.a,{p:"5",mb:"4",shadow:"sm",bg:"white",rounded:"lg",pos:"relative"},r.a.createElement(E.a,{align:"center",mb:"2"},r.a.createElement(J.a,{h:"12",w:"12",rounded:"full",mr:"4"}),r.a.createElement(E.a,{flexDirection:"column"},r.a.createElement(J.a,{h:"4",w:"64",my:"1"}),r.a.createElement(J.a,{h:"4",w:"40",my:"1"}),r.a.createElement(J.a,{h:"4",w:"20",my:"1"}))),r.a.createElement(v.a,{my:"4"},r.a.createElement(J.a,{h:"4",my:"1"}),r.a.createElement(J.a,{h:"4",my:"1"}),r.a.createElement(J.a,{h:"4",my:"1"}),r.a.createElement(J.a,{h:"4",my:"1"})),r.a.createElement(J.a,{h:"24",my:"2"}),r.a.createElement(J.a,{h:"6",w:"32",my:"2"}))},G=a(15),H=a(11),Y=a(25),$=a(99),Q=a(328),K=a(100),X=a(329),Z=function(e){var t=e.label,a=e.name,n=Object(Y.a)(e,["label","name"]);return r.a.createElement(G.a,{name:a},(function(e){var c=e.field,l=e.form;return r.a.createElement($.a,{isInvalid:l.errors[a]&&l.touched[a],mb:"2"},r.a.createElement(Q.a,{htmlFor:a},t),r.a.createElement(K.a,Object.assign({id:a},n,c)),r.a.createElement(X.a,null,l.errors[a]))}))},ee=a(330),te=function(e){var t=e.label,a=e.name,n=Object(Y.a)(e,["label","name"]);return r.a.createElement(G.a,{name:a},(function(e){var c=e.field,l=e.form;return r.a.createElement($.a,{isInvalid:l.errors[a]&&l.touched[a]},r.a.createElement(Q.a,{htmlFor:a},t),r.a.createElement(ee.a,Object.assign({id:a},n,c)),r.a.createElement(X.a,null,l.errors[a]))}))},ae=a(331),ne=a(343),re=function(e){var t=e.label,a=e.name,n=Object(Y.a)(e,["label","name"]);return r.a.createElement(G.a,{name:a},(function(e){var c=e.field,l=e.form;return r.a.createElement($.a,{isInvalid:l.errors[a]&&l.touched[a]},r.a.createElement(Q.a,{htmlFor:a},t),r.a.createElement(ae.a,Object.assign({id:a,isInline:!0},n,c),r.a.createElement(ne.a,{value:"donation"},"Donation"),r.a.createElement(ne.a,{value:"request"},"Request")),r.a.createElement(X.a,null,l.errors[a]))}))},ce=a(342),le=function(e){var t=e.label,a=e.name,n=Object(Y.a)(e,["label","name"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{htmlFor:a},t),r.a.createElement(G.b,{name:a},(function(e){var t=e.push,c=e.remove,l=e.form.values.items;return r.a.createElement("div",null,l.map((function(e,t){return r.a.createElement(v.a,{key:t,bg:"cyan.100",p:"4",rounded:"lg",mb:"2"},r.a.createElement(G.a,{name:"".concat(a,"[").concat(t,"].name")},(function(e){var c=e.field,l=e.form;return r.a.createElement($.a,{isInvalid:l.errors[a]&&l.touched[a]&&l.errors[a][t]&&l.touched[a][t]&&l.errors[a][t].name&&l.touched[a][t].name},r.a.createElement(Q.a,{htmlFor:"".concat(a,".").concat(t,".name")},"Item Name"),r.a.createElement(K.a,Object.assign({id:"".concat(a,".").concat(t,".name")},n,c)),r.a.createElement(X.a,null,l.errors[a]&&l.errors[a][t]&&l.errors[a][t].name," "))})),r.a.createElement(G.a,{name:"".concat(a,"[").concat(t,"].total")},(function(e){var c=e.field,l=e.form;return r.a.createElement($.a,{isInvalid:l.errors[a]&&l.touched[a]&&l.errors[a][t]&&l.touched[a][t]&&l.errors[a][t].quantity&&l.touched[a][t].quantity},r.a.createElement(Q.a,{htmlFor:"".concat(a,".").concat(t,".total")},"Quantity"),r.a.createElement(ce.a,Object.assign({id:"".concat(a,".").concat(t,".total"),type:"number"},n,c,{onChange:function(e){return l.setFieldValue("".concat(a,".").concat(t,".total"),e)},onBlur:function(e){l.setFieldTouched("".concat(a,".").concat(t,".total"),!0)}})),r.a.createElement(X.a,null,l.errors[a]&&l.errors[a][t]&&l.errors[a][t].quantity," "))})),t>0&&r.a.createElement(E.a,{justify:"flex-end",mt:"2"},r.a.createElement(x.a,{size:"sm",variantColor:"red",leftIcon:"minus",onClick:function(){return c(t)}},"Remove Item")))})),r.a.createElement(x.a,{size:"sm",my:"2",mr:"2",leftIcon:"add",onClick:function(){return t({name:"",total:"",amount:0})}},"Add Item"))})))},oe=function(e){var t=e.label,a=e.name,n=Object(Y.a)(e,["label","name"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{htmlFor:a},t),r.a.createElement(G.b,{name:a},(function(e){var t=e.push,c=e.remove,l=e.form.values.tags;return r.a.createElement("div",null,l.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(G.a,{name:"".concat(a,"[").concat(t,"]")},(function(e){var c=e.field,l=e.form;return r.a.createElement($.a,{mt:"2",ml:"2",isInvalid:l.errors[a]&&l.touched[a]&&l.errors[a][t]&&l.touched[a][t]},r.a.createElement(K.a,Object.assign({id:"".concat(a,"[").concat(t,"]")},n,c)),r.a.createElement(X.a,null,l.errors[a]&&l.errors[a][t]," "))})),t>0&&r.a.createElement(E.a,{justify:"flex-end",mt:"2"},r.a.createElement(x.a,{size:"sm",variantColor:"red",leftIcon:"minus",onClick:function(){return c(t)}},"Remove Tag")))})),r.a.createElement(x.a,{size:"sm",my:"2",mr:"2",leftIcon:"add",onClick:function(){return t("")}},"Add Tag"))})))},ie=function(e){var t=e.label,a=e.name,n=e.form,c=Object(Y.a)(e,["label","name","form"]),l=n.setFieldValue;return r.a.createElement($.a,{isInvalid:n.errors[a]&&n.touched[a]},r.a.createElement(Q.a,{htmlFor:a},t),r.a.createElement("input",Object.assign({id:a,onChange:function(e){l("images",e.currentTarget.files)}},c)),r.a.createElement(X.a,null,n.errors[a]))},se=a(332),me=a(153),ue=function(e){var t=e.label,a=e.name,n=Object(Y.a)(e,["label","name"]),c=r.a.useState(!1),l=Object(m.a)(c,2),o=l[0],i=l[1],s=function(){return i(!o)};return r.a.createElement(G.a,{name:a},(function(e){var c=e.field,l=e.form;return r.a.createElement($.a,{isInvalid:l.errors[a]&&l.touched[a],mb:"2"},t&&r.a.createElement(Q.a,{htmlFor:a},t),r.a.createElement(se.a,{size:"md"},r.a.createElement(K.a,Object.assign({pr:"4.5rem",type:o?"text":"password",placeholder:"Enter password",id:a},n,c)),r.a.createElement(me.b,{width:"4.5rem"},r.a.createElement(x.a,{h:"1.75rem",size:"sm",onClick:s},o?"Hide":"Show"))),r.a.createElement(X.a,null,l.errors[a]))}))},de=function(e){var t=e.label,a=e.name,n=e.index,c=e.amount,l=Object(Y.a)(e,["label","name","index","amount"]);return r.a.createElement(G.a,{name:"".concat(a,"[").concat(n,"].donor.amountDonated")},(function(e){var o=e.field,i=e.form;return r.a.createElement($.a,{isInvalid:i.errors[a]&&i.touched[a]&&i.errors[a][n]&&i.touched[a][n]&&(i.errors[a][n].donor&&i.touched[a][n].donor&&i.errors[a][n].donor.amountDonated&&i.touched[a][n].donor.amountDonated||i.errors[a][n].amount&&i.touched[a][n].donor.amountDonated),mb:"4"},r.a.createElement(Q.a,{htmlFor:"".concat(a,"[").concat(n,"].donor.amountDonated")},t),r.a.createElement(ce.a,Object.assign({id:"".concat(a,"[").concat(n,"].donor.amountDonated")},l,o,{onChange:function(e){i.setFieldValue("".concat(a,"[").concat(n,"].amount"),e+c),i.setFieldValue("".concat(a,"[").concat(n,"].donor.amountDonated"),e),i.setFieldValue("totalDonation",i.values.totalDonation+e)},onBlur:function(e){i.setFieldTouched("".concat(a,"[").concat(n,"].donor.amountDonated"),!0)}})),r.a.createElement(X.a,null,i.errors[a]&&i.errors[a][n]&&(i.errors[a][n].donor&&i.errors[a][n].donor.amountDonated||i.errors[a][n].amount)))}))},fe=a(192),be=a.n(fe),pe=function(e){var t=e.label,a=e.name,n=Object(Y.a)(e,["label","name"]);return r.a.createElement(G.a,{name:a},(function(e){var c=e.field,l=e.form;return r.a.createElement($.a,{isInvalid:l.errors[a]&&l.touched[a],mb:"2"},r.a.createElement(Q.a,{htmlFor:a},t),r.a.createElement("br",null),r.a.createElement(be.a,Object.assign({},c,n,{id:a,selected:l.values[a],onChange:function(e){return l.setFieldValue(a,e)},showTimeSelect:!0,dateFormat:"MM/dd/yyyy h:mm aa",customInput:r.a.createElement(K.a,null)})),r.a.createElement(X.a,null,l.errors[a]))}))},Ee=function(e){var t=e.label,a=e.name,n=e.index,c=e.amount,l=Object(Y.a)(e,["label","name","index","amount"]);return r.a.createElement(G.a,{name:"".concat(a,"[").concat(n,"].amountRequested")},(function(e){var o=e.field,i=e.form;return r.a.createElement($.a,{isInvalid:i.errors[a]&&i.touched[a]&&i.errors[a][n]&&i.touched[a][n]&&(i.errors[a][n].amountRequested&&i.touched[a][n].amountRequested||i.errors[a][n].amount&&i.touched[a][n].amountRequested),mb:"4"},r.a.createElement(Q.a,{htmlFor:"".concat(a,"[").concat(n,"].amountRequested")},t),r.a.createElement(ce.a,Object.assign({id:"".concat(a,"[").concat(n,"].amountRequested")},l,o,{onChange:function(e){i.setFieldValue("".concat(a,"[").concat(n,"].amount"),c-e),i.setFieldValue("".concat(a,"[").concat(n,"].amountRequested"),e),i.setFieldValue("totalRequest",i.values.totalRequest+e)},onBlur:function(e){i.setFieldTouched("".concat(a,"[").concat(n,"].amountRequested"),!0)}})),r.a.createElement(X.a,null,i.errors[a]&&i.errors[a][n]&&(i.errors[a][n].amountRequested||i.errors[a][n].amount)))}))},ge=function(e){var t=e.label,a=e.name,n=e.form,c=Object(Y.a)(e,["label","name","form"]),l=n.setFieldValue;return r.a.createElement($.a,{isInvalid:n.errors[a]&&n.touched[a]},r.a.createElement(Q.a,{htmlFor:a},t),r.a.createElement("input",Object.assign({id:a,onChange:function(e){l(a,e.currentTarget.files[0])}},c)),r.a.createElement(X.a,null,n.errors[a]))},he=function(e){var t=e.control,a=Object(Y.a)(e,["control"]);switch(t){case"input":return r.a.createElement(Z,a);case"textarea":return r.a.createElement(te,a);case"radio":return r.a.createElement(re,a);case"date":return r.a.createElement(pe,a);case"items":return r.a.createElement(le,a);case"tags":return r.a.createElement(oe,a);case"images":return r.a.createElement(ie,a);case"image":return r.a.createElement(ge,a);case"password":return r.a.createElement(ue,a);case"numeric":return r.a.createElement(de,a);case"request":return r.a.createElement(Ee,a);default:return null}},ve=function(e){var t=e.onClose,a=e.handleIsSubmitting,c=e.addComment,l=e.postId,o=Object(n.useContext)(ft),d=Object(m.a)(o,1)[0],f=d.user,b=d.token,p=f._id,E=Object(n.useState)(),g=Object(m.a)(E,2),h=g[0],v=g[1],O={userId:p,content:""},y=H.e().shape({content:H.g().required("Required")}),j=function(){var e=Object(s.a)(i.a.mark((function e(n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,M.a.patch("/api/posts/".concat(l,"/comments"),n,{headers:{Authorization:"Bearer "+b}});case 4:r=e.sent,o=r.data,c&&c(Object(u.a)(Object(u.a)({},o.comment),{},{user:Object(u.a)({},o.user)})),a(!1),t(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),v({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{message:h}),r.a.createElement(G.d,{initialValues:O,validationSchema:y,onSubmit:j},(function(e){return r.a.createElement("div",null,r.a.createElement(G.c,{id:"commentForm"},r.a.createElement(he,{control:"textarea",label:"Comment",name:"content"})))})))},Oe=function(e){var t=e.isOpen,a=e.onClose,c=e.addComment,l=e.postId,o=Object(n.useState)(!1),i=Object(m.a)(o,2),s=i[0],u=i[1];return r.a.createElement(j.a,{isOpen:t,onClose:a},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null),r.a.createElement(j.c,null),r.a.createElement(j.b,null,r.a.createElement(ve,{onClose:a,handleIsSubmitting:u,addComment:c,postId:l})),r.a.createElement(j.e,null,r.a.createElement(x.a,{variant:"ghost",mr:3,onClick:function(){a(),u(!1)}},"Cancel"),r.a.createElement(x.a,{variantColor:"cyan",type:"submit",isLoading:s,form:"commentForm"},"Comment"))))},ye=function(e){var t=e.onClose,a=e.handleIsSubmitting,c=e.items,l=e.postId,o=Object(n.useContext)(ft),u=Object(m.a)(o,1)[0],d=u.user,f=u.token,b=d._id,p=Object(n.useState)(),E=Object(m.a)(p,2),g=E[0],h=E[1],v={items:c.map((function(e){return{itemId:e._id,name:e.name,amount:e.amount,total:e.total,amountRequested:0}})),reason:"",userId:b,totalRequest:0},O=H.e().shape({items:H.a().of(H.e().shape({name:H.g(),total:H.d(),amount:H.d().min(0,"Too Much"),amountRequested:H.d()})).required("Required"),reason:H.g().required("Required"),totalRequest:H.d().min(1,"Request at least one item")}),y=function(){var e=Object(s.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,M.a.patch("/api/posts/".concat(l,"/request"),n,{headers:{Authorization:"Bearer "+f}});case 4:r=e.sent,r.data,a(!1),t(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),h({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{message:g}),r.a.createElement(G.d,{initialValues:v,validationSchema:O,onSubmit:y},(function(e){return r.a.createElement("div",null,r.a.createElement(G.c,{id:"requestForm"},v.items.map((function(e,t){return e.amount>0?r.a.createElement(he,{control:"request",label:e.name,index:t,amount:e.amount,name:"items",type:"number"}):null})),r.a.createElement(he,{control:"textarea",label:"Reason",name:"reason"})))})))},je=function(e){var t=e.isOpen,a=e.onClose,c=e.postId,l=e.items,o=Object(n.useState)(!1),i=Object(m.a)(o,2),s=i[0],u=i[1];return r.a.createElement(j.a,{isOpen:t,onClose:a},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null,"Request"),r.a.createElement(j.c,null),r.a.createElement(j.b,null,r.a.createElement(ye,{onClose:a,handleIsSubmitting:u,items:l,postId:c})),r.a.createElement(j.e,null,r.a.createElement(x.a,{variant:"ghost",mr:3,onClick:function(){a(),u(!1)}},"Cancel"),r.a.createElement(x.a,{variantColor:"cyan",type:"submit",isLoading:s,form:"requestForm"},"Request"))))},xe=function(e){var t=e.onClose,a=e.handleIsSubmitting,c=e.items,l=e.donate,o=e.postId,d=Object(n.useContext)(ft),f=Object(m.a)(d,1)[0],b=f.user,p=f.token,E=b._id,g=Object(n.useState)(),h=Object(m.a)(g,2),v=h[0],O=h[1],y={items:c.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{donor:{user:E,amountDonated:0}})})),totalDonation:0,userId:E},j=function(){var e=Object(s.a)(i.a.mark((function e(n){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,M.a.put("/api/posts/".concat(o,"/donate"),n,{headers:{Authorization:"Bearer "+p}});case 4:r=e.sent,c=r.data,l(c.items),a(!1),t(),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),O({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0}),a(!1),t();case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{message:v}),r.a.createElement(G.d,{initialValues:y,validationSchema:function(e){return H.e().shape({items:H.a().of(H.e().shape({name:H.g(),total:H.d(),amount:H.d().max(H.f("total"),"Too Much"),donor:H.e().shape({userId:H.g(),amountDonated:H.d(),date:H.b()})})).required("Required"),totalDonation:H.d().min(1,"Donate at least one item")})},onSubmit:j},(function(e){return console.log("Formik  Props: ",e),r.a.createElement("div",null,r.a.createElement(G.c,{id:"donateForm"},y.items.map((function(e,t){return e.amount!==e.total?r.a.createElement(he,{control:"numeric",label:e.name,index:t,amount:e.amount,name:"items",type:"number"}):null}))),r.a.createElement($.a,{isInvalid:e.errors.totalDonation},r.a.createElement(X.a,null,e.errors.totalDonation)))})))},Ce=function(e){var t=e.isOpen,a=e.onClose,c=e.items,l=e.donate,o=e.postId,i=Object(n.useState)(!1),s=Object(m.a)(i,2),u=s[0],d=s[1];return r.a.createElement(j.a,{isOpen:t,onClose:a},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null,"Donate"),r.a.createElement(j.c,null),r.a.createElement(j.b,null,r.a.createElement(xe,{onClose:a,handleIsSubmitting:d,items:c,donate:l,postId:o})),r.a.createElement(j.e,null,r.a.createElement(x.a,{variant:"ghost",mr:3,onClick:function(){a(),d(!1)}},"Cancel"),r.a.createElement(x.a,{variantColor:"cyan",type:"submit",isLoading:u,form:"donateForm"},"Donate"))))},we=a(334),Se=function(e){var t=e.likers,a=0===t.length,n=Object(h.a)(),c=n.isOpen,l=n.onOpen,o=n.onClose;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{align:"center",d:a?"none":"flex"},r.a.createElement(x.a,{variant:"ghost",px:"1",onClick:l},r.a.createElement(O.a,{fontSize:"sm",mr:"2"},"Likers:"),r.a.createElement(we.a,{size:"sm",max:3},t.map((function(e){return e.name?r.a.createElement(S.a,{src:e.avatar,name:"".concat(e.name.firstName," ").concat(e.name.lastName)}):null}))))),r.a.createElement(j.a,{isOpen:c,onClose:o},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null,"Likers"),r.a.createElement(j.c,null),r.a.createElement(j.b,null,t.map((function(e){return e.name?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{align:"center"},r.a.createElement(k.b,{to:"/".concat(e.username)},r.a.createElement(S.a,{size:"sm",mr:"2",src:e.avatar,name:"".concat(e.name.firstName," ").concat(e.name.lastName)})),r.a.createElement(v.a,null,r.a.createElement(O.a,{fontSize:"sm",fontWeight:"semibold",mr:"1"},"".concat(e.name.firstName," ").concat(e.name.lastName)),r.a.createElement(O.a,{fontSize:"sm",color:"gray.700"},"@".concat(e.username)))),r.a.createElement(T.a,null)):null}))))))},ke=a(32),qe=function(e){var t=e.items,a=e.type,c=Object(n.useState)([]),l=Object(m.a)(c,2),o=l[0],i=l[1],s=0===o.length,d=Object(h.a)(),f=d.isOpen,b=d.onOpen,p=d.onClose;return Object(n.useEffect)((function(){var e=[];t.forEach((function(t){t.donor.forEach((function(a){0!==a.amountDonated&&e.push(Object(u.a)(Object(u.a)({},a.user),{},{amountDonated:a.amountDonated,itemName:t.name}))}))})),t.forEach((function(t){t.donee.forEach((function(a){0!==a.amountRequested&&e.push(Object(u.a)(Object(u.a)({},a.user),{},{amountRequested:a.amountRequested,itemName:t.name}))}))})),i((function(t){return[].concat(e,Object(ke.a)(t))}))}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{align:"center",d:s?"none":"flex"},r.a.createElement(x.a,{variant:"ghost",px:"1",onClick:b},r.a.createElement(O.a,{fontSize:"sm",mr:"2"},"request"===a?"Donor":"Donee",":"),r.a.createElement(we.a,{size:"sm",max:3},o.map((function(e){if(!e.name)return null;var t=e.name.firstName+" "+e.name.lastName;return r.a.createElement(S.a,{src:e.avatar,name:t})}))))),r.a.createElement(j.a,{isOpen:f,onClose:p},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null,"request"===a?"Donor":"Donee"),r.a.createElement(j.c,null),r.a.createElement(j.b,null,o.map((function(e){return e.name?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{align:"center",mb:"1"},r.a.createElement(k.b,{to:"/".concat(e.username)},r.a.createElement(S.a,{size:"sm",mr:"2",src:e.avatar,name:"".concat(e.name.firstName," ").concat(e.name.lastName)})),r.a.createElement(v.a,null,r.a.createElement(O.a,{fontSize:"sm",fontWeight:"semibold",mr:"1"},"".concat(e.name.firstName," ").concat(e.name.lastName)),r.a.createElement(O.a,{fontSize:"sm",color:"gray.700"},"@".concat(e.username)))),r.a.createElement(O.a,{fontSize:"sm"},"Item: ".concat(e.itemName)),r.a.createElement(O.a,{fontSize:"sm"},"donation"===a?"Amount Requested: ".concat(e.amountRequested):"Amount Donated: ".concat(e.amountDonated)),r.a.createElement(T.a,null)):null}))))))},Ne=function(e){var t=e.data,a=e.addComment,c=e.isLinked,l=e.isLoading,o=e.isPostSection,i=t._id,s=t.user,u=t.type,d=t.title,f=t.deadline,b=t.description,p=t.items,g=t.tags,y=t.likers,j=t.status,x=t.images,S=t.datePosted,N=t.comments,I=s._id,D=s.name,W=s.username,A=s.avatar,M=D.firstName+" "+D.lastName,B=Object(n.useContext)(ft),_=Object(m.a)(B,1)[0].user._id,J=Object(h.a)(),G=J.isOpen,H=J.onOpen,Y=J.onClose,$=Object(h.a)(),Q=$.isOpen,K=$.onOpen,X=$.onClose,Z=Object(n.useState)([]),ee=Object(m.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),re=Object(m.a)(ne,2),ce=re[0],le=re[1],oe=new Date,ie=new Date(f).getTime()-oe.getTime(),se=Math.ceil(ie/864e5),me=Math.ceil(ie/36e5),ue=Math.ceil(ie/6e4);return Object(n.useEffect)((function(){ae(p),le(j)}),[p,j]),r.a.createElement("div",null,l?r.a.createElement(U,null):r.a.createElement(P.a,{p:"5",pb:"2",mb:"4",bg:"white",shadow:"sm",rounded:"lg",pos:"relative",_hover:{borderColor:"gray.200",bg:"gray.50"}},c?r.a.createElement(v.a,{as:k.b,to:"/".concat(W,"/post/").concat(i),w:"full",h:"full",pos:"absolute",top:"0",left:"0",bottom:"0",right:"0"}):"",r.a.createElement(q,{avatar:A,title:d,author:M,deadline:f,status:ce,username:W,datePosted:S}),r.a.createElement(v.a,{my:"4"},r.a.createElement(O.a,{fontWeight:"extrabold",fontFamily:"heading"},d),r.a.createElement(v.a,null,r.a.createElement(z.a,{variantColor:"PENDING"===ce?"pink":"UNFULFILLED"===ce?"yellow":"green"},"PENDING"!==ce?ce:me<=1?"".concat(ue," mins left"):se<=1?"".concat(me," hrs left"):"".concat(se," days left"))),r.a.createElement(O.a,{mt:"4",fontSize:"sm"},b)),r.a.createElement(F,{items:te,type:u},x&&o?x.map((function(e){return r.a.createElement(L.a,{src:e.url,w:"full",h:"64",mt:"2",objectFit:"cover"})})):x&&0!==x.length?r.a.createElement(L.a,{src:x[0].url,w:"full",h:"64",mt:"2",objectFit:"cover"}):""),r.a.createElement(R,{tags:g}),r.a.createElement(T.a,null),r.a.createElement(E.a,null,r.a.createElement(Se,{likers:y,type:u}),r.a.createElement(qe,{items:te,type:u})),r.a.createElement(T.a,null),r.a.createElement(E.a,{justify:"space-around",pt:"2"},r.a.createElement(C.a,{isDisabled:"PENDING"!==ce||I===_,size:"lg",variant:"ghost",isRound:!0,icon:"donation"===u?w.p:w.h,onClick:K}),r.a.createElement(E.a,{align:"center"},r.a.createElement(C.a,{variant:"ghost",size:"lg",rounded:"full",icon:w.e,onClick:H}),r.a.createElement(v.a,{visibility:0===N.length?"hidden":"visible"},N.length)),r.a.createElement(V,{postId:i,likers:y})),e.children),"donation"===u?r.a.createElement(je,{isOpen:Q,onClose:X,items:te,postId:i}):r.a.createElement(Ce,{isOpen:Q,onClose:X,items:te,donate:function(e){ae(e),e.every((function(e){return e.total-e.amount===0}))&&le("FULFILLED")},postId:i}),r.a.createElement(Oe,{isOpen:G,onClose:Y,addComment:a}))},ze=function(e){var t=e.onClose,a=e.handleIsSubmitting,c=e.createPost,l=Object(n.useContext)(ft),o=Object(m.a)(l,1)[0],d=o.user,f=o.token,b=Object(n.useState)(),p=Object(m.a)(b,2),E=p[0],g=p[1],h={userId:d._id,title:"",description:"",type:"donation",location:"",deadline:new Date,items:[{name:"",total:1,amount:0}],tags:[""],images:[],status:"PENDING"},v=H.e().shape({title:H.g().required("Required"),description:H.g().required("Required"),type:H.g().required("Required"),location:H.g().required("Required"),deadline:H.b().min(h.deadline,"Invalid Date"),items:H.a().of(H.e().shape({name:H.g().required("Required"),total:H.d().min(1,"Minimum of one item").required("Required")})).required("Required"),tags:H.a().of(H.g().required("Required")).required("Required"),images:H.c().test("length","Only 3 images are allowed per post",(function(e){return e&&e.length<=3}))}),O=function(){var e=Object(s.a)(i.a.mark((function e(n){var r,l,o,s,m,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l in a(!0),r=new FormData,n)if("items"===l)r.append(l,JSON.stringify(n[l]));else if("name"===l)r.append(l,JSON.stringify(n[l]));else if("tags"===l)r.append(l,JSON.stringify(n[l]));else if("images"===l)for(o=n[l].length,s=0;s<o;s++)r.append(l,n[l][s]);else r.append(l,n[l]);return e.prev=3,e.next=6,M.a.post("/api/posts",r,{headers:{Authorization:"Bearer "+f,"Content-Type":"multipart/form-data; boundary=<calculated when request is sent>"}});case 6:m=e.sent,d=m.data,c(Object(u.a)(Object(u.a)({},d.post),{},{user:Object(u.a)({},d.user)})),a(!1),t(),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(3),g({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0}),a(!1),t();case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{message:E}),r.a.createElement(G.d,{initialValues:h,validationSchema:v,onSubmit:O},(function(e){return r.a.createElement("div",null,r.a.createElement(G.c,{id:"postForm"},r.a.createElement(he,{control:"radio",label:"Type",name:"type"}),r.a.createElement(he,{control:"input",type:"text",label:"Title",name:"title"}),r.a.createElement(he,{control:"textarea",label:"Description",name:"description"}),r.a.createElement(he,{control:"input",type:"text",label:"Location",name:"location"}),r.a.createElement(he,{control:"date",label:"Deadline",name:"deadline"}),r.a.createElement(he,{control:"items",label:"Items",name:"items"}),r.a.createElement(he,{control:"tags",label:"Tags",name:"tags"}),r.a.createElement(he,{control:"images",type:"file",name:"images",label:"Add Image",multiple:"multiple",accept:"image/*",form:e})))})))},Ie=function(e){var t=e.posts,a=e.createPost,c=e.isLoading,l=Object(n.useState)(!1),o=Object(m.a)(l,2),i=o[0],s=o[1],u=Object(h.a)(),d=u.isOpen,f=u.onOpen,b=u.onClose;return r.a.createElement(r.a.Fragment,null,0===t.length?r.a.createElement(E.a,{align:"center",py:"8",flexDirection:"column"},r.a.createElement(v.a,{as:w.l,size:"20"}),r.a.createElement(O.a,{fontWeight:"bold",fontSize:"lg"},"Oooops!"),r.a.createElement(O.a,null,"Your feed is empty. Make a post now!")):r.a.createElement(y.a,{mb:{base:"16",md:"4"},px:{base:"0",sm:"4"}},t.map((function(e){return r.a.createElement(Ne,{key:e._id,data:e,isLinked:!0,isLoading:c})}))),r.a.createElement(j.a,{isOpen:d,onClose:b},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null,"Create Post"),r.a.createElement(j.c,null),r.a.createElement(j.b,null,r.a.createElement(ze,{onClose:b,handleIsSubmitting:s,createPost:a})),r.a.createElement(j.e,null,r.a.createElement(x.a,{variant:"ghost",mr:3,onClick:b},"Cancel"),r.a.createElement(x.a,{variantColor:"cyan",type:"submit",isLoading:i,form:"postForm"},"Post")))),r.a.createElement(C.a,{pos:"fixed",bottom:{base:"2rem",md:"8"},icon:"add",right:{base:"0",md:"8"},left:{base:"0",md:"initial"},mx:{base:"auto",md:"initial"},zIndex:"sticky",isRound:!0,variant:"solid",variantColor:"secondary","aria-label":"Post",shadow:"md",size:"lg",w:"16",h:"16",onClick:f}))},Fe=function(){return r.a.createElement(E.a,null,r.a.createElement(E.a,null,r.a.createElement(v.a,{as:w.n,size:"6",color:"primary.600"}),r.a.createElement(O.a,{color:"gray.800",fontFamily:"Ubuntu",fontSize:"md",ml:"1"},"Logout")))},De=a(335),Re=a(340),Pe=function(e){var t=e.onClose,a=e.handleIsSubmitting,c=Object(n.useContext)(ft),l=Object(m.a)(c,1)[0],o=l.user,u=l.token,d=o._id,f=Object(n.useState)(),b=Object(m.a)(f,2),p=b[0],E=b[1],g={userId:d,oldPassword:"",newPassword:"",newPasswordCopy:""},h=H.e().shape({oldPassword:H.g().required("Required"),newPassword:H.g().required("Required"),newPasswordCopy:H.g().oneOf([H.f("newPassword")],"Password does not match").required("Required")}),v=function(){var e=Object(s.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,M.a.patch("/api/users/".concat(d,"/changePassword"),n,{headers:{Authorization:"Bearer "+u}});case 4:r=e.sent,r.data,a(!1),t(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),E({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{message:p}),r.a.createElement(G.d,{initialValues:g,validationSchema:h,onSubmit:v},(function(e){return r.a.createElement("div",null,r.a.createElement(G.c,{id:"changePasswordForm"},r.a.createElement(he,{control:"password",label:"Old Password",name:"oldPassword"}),r.a.createElement(he,{control:"password",label:"New Password",name:"newPassword"}),r.a.createElement(he,{control:"password",name:"newPasswordCopy",placeholder:"Enter your new password again"})))})))},Le=function(e){var t=e.title,a=Object(n.useContext)(ft),c=Object(m.a)(a,2),l=c[0],o=c[1],u=l.user,d=l.token,f=u.photo,b=u.name,p=b.firstName+" "+b.lastName,g=Object(h.a)(),y=g.isOpen,C=g.onOpen,w=g.onClose,q=Object(n.useState)(!1),N=Object(m.a)(q,2),z=N[0],I=N[1],F=Object(n.useState)(),D=Object(m.a)(F,2),R=D[0],P=D[1],L=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.post("/api/logout",{},{headers:{Authorization:"Bearer "+d}});case 3:t=e.sent,t.data,localStorage.removeItem("user"),o(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),P({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{message:R}),r.a.createElement(De.a,{h:"16",bg:"primary.600",zIndex:"banner",templateColumns:{base:"repeat(2, 1fr)",md:"repeat(3, 1fr)"}},r.a.createElement(v.a,{d:{base:"none",md:"block"}}),r.a.createElement(O.a,{fontFamily:"Ubuntu",fontSize:["2xl","4xl"],fontWeight:"bold",color:"cyan.50",margin:"auto"},r.a.createElement(k.b,{to:"/"},t)),r.a.createElement(E.a,{alignItems:"center",justify:"flex-end",mr:"4"},r.a.createElement(Re.e,null,r.a.createElement(Re.a,{as:x.a,variantColor:"black",px:"2",variant:"solid",rightIcon:"chevron-down",_hover:{bg:"cyan.500"},_active:{bg:"cyan.400"}},r.a.createElement(S.a,{src:f,size:"sm",name:p,mr:{base:"0",lg:"2"}}),r.a.createElement(O.a,{color:"cyan.50",fontFamily:"Ubuntu",fontSize:"sm",d:{base:"none",lg:"block"}},p)),r.a.createElement(Re.d,{zIndex:"popover"},r.a.createElement(Re.c,{leftIcon:"add",onClick:C},"Change Password"),r.a.createElement(Re.b,null),r.a.createElement(Re.c,{as:k.b,to:"/",onClick:L},r.a.createElement(Fe,null)))))),r.a.createElement(j.a,{isOpen:y,onClose:w},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null,"Change Password"),r.a.createElement(j.c,null),r.a.createElement(j.b,null,r.a.createElement(Pe,{onClose:w,handleIsSubmitting:I})),r.a.createElement(j.e,null,r.a.createElement(x.a,{variant:"ghost",mr:3,onClick:function(){w(),I(!1)}},"Cancel"),r.a.createElement(x.a,{variantColor:"cyan",type:"submit",isLoading:z,form:"changePasswordForm"},"Save")))))},Te=function(){var e=Object(g.f)();return r.a.createElement(C.a,{variant:"ghost",variantColor:"cyan",icon:function(){return r.a.createElement(v.a,{as:w.a,size:"6"})},onClick:function(){return e.goBack()},mr:"2"})},We=function(e){var t=e.title,a=e.hasBackButton;return r.a.createElement(E.a,{h:"16",zIndex:"sticky",align:"center",pl:"4",pos:"sticky",top:"0",bg:"gray.100"},a&&r.a.createElement(Te,null),r.a.createElement(v.a,{as:e.icon,size:"6",color:"primary.600",mr:"2"}),r.a.createElement(O.a,{fontFamily:"Ubuntu",fontWeight:"semibold",fontSize:"2xl"},t))},Ae=r.a.createContext(null),Me=[{_id:"1",user:{name:{firstName:"",lastName:""},avatar:null,username:"",userId:1},avatar:null,title:"",name:{firstName:"",lastName:""},deadline:null,description:"",items:[],tags:[],likers:[],status:"",images:[]},{_id:"2",user:{name:{firstName:"",lastName:""},avatar:null,username:"",userId:2},avatar:null,title:"",name:{firstName:"",lastName:""},deadline:null,description:"",items:[],tags:[],likers:[],status:"",images:[]},{_id:"3",user:{name:{firstName:"",lastName:""},avatar:null,username:"",userId:3},avatar:null,title:"",name:{firstName:"",lastName:""},deadline:null,description:"",items:[],tags:[],likers:[],status:"",images:[]}],Be=function(e){var t=e.children,a=Object(n.useState)(Me),c=Object(m.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)([]),s=Object(m.a)(i,2),u={post:[l,o],filteredPost:[s[0],s[1]]};return r.a.createElement(Ae.Provider,{value:u},t)},_e=function(){var e=Object(n.useContext)(Ae).post,t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),o=Object(m.a)(l,2),u=o[0],d=o[1],f=Object(n.useState)(),b=Object(m.a)(f,2),p=b[0],E=b[1];return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/api/posts");case 3:t=e.sent,a=t.data,c(a.response),d(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),E({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[c]),r.a.createElement(v.a,null,r.a.createElement(_,{message:p}),r.a.createElement(We,{title:"Home",icon:w.m}),r.a.createElement(Ie,{posts:a,createPost:function(e){c((function(t){return[e].concat(Object(ke.a)(t))}))},isLoading:u}))},Ve=function(e){return r.a.createElement(v.a,{d:{base:"none",md:"flex"},w:{lg:"xs"},h:"100vh",flexGrow:{base:0,md:1,lg:"0"},maxW:"xs",position:"sticky",top:"0",borderRight:"4px",color:"gray.400",flexDirection:"column",justifyContent:"space-between",px:"10",pt:"6",pb:"20"},e.children)},Je=function(e){return r.a.createElement(v.a,{w:{md:"xl"},minW:"xs",maxW:"xl",flexGrow:{base:"1",md:"0"}},e.children)},Ue=function(e){var t=e.variant,a=Object(Y.a)(e,["variant"]),c=Object(n.useContext)(ft),l=Object(m.a)(c,1)[0].user.username;return"side"===t?r.a.createElement(E.a,Object.assign({flexDirection:"column",justifyContent:"space-around",h:"40vh"},a),r.a.createElement(k.c,{exact:!0,to:"/",activeclassname:"active"},r.a.createElement(E.a,{p:"2"},r.a.createElement(v.a,{ml:"4",as:w.m,size:"8",color:"primary.600"}),r.a.createElement(O.a,{color:"primary.600",fontWeight:"bold",fontFamily:"Ubuntu",fontSize:"xl",lineHeight:"tall",ml:"1"},"Home"))),r.a.createElement(E.a,{as:k.c,to:"/notification",p:"2",activeClassname:"active",rounded:"full"},r.a.createElement(v.a,{ml:"4",as:w.b,size:"8",color:"primary.600"}),r.a.createElement(O.a,{color:"primary.600",fontWeight:"bold",fontFamily:"Ubuntu",fontSize:"xl",lineHeight:"tall",ml:"1"},"Notification")),r.a.createElement(E.a,{as:k.c,to:"/avails",p:"2",activeClassname:"active",rounded:"full"},r.a.createElement(v.a,{ml:"4",as:w.o,size:"8",color:"primary.600"}),r.a.createElement(O.a,{color:"primary.600",fontWeight:"bold",fontFamily:"Ubuntu",fontSize:"xl",lineHeight:"tall",ml:"1"},"Avails")),r.a.createElement(E.a,{as:k.c,to:"".concat(l),p:"2",activeClassname:"active",rounded:"full"},r.a.createElement(v.a,{ml:"4",as:w.k,size:"8",color:"primary.600"}),r.a.createElement(O.a,{color:"primary.600",fontWeight:"bold",fontFamily:"Ubuntu",fontSize:"xl",lineHeight:"tall",ml:"1"},"Profile"))):r.a.createElement(E.a,Object.assign({pos:"fixed",bottom:"0",bg:"gray.50",justify:"space-evenly",w:"full",py:"2"},a),r.a.createElement(k.c,{exact:!0,to:"/",activeclassname:"active"},r.a.createElement(v.a,{p:"2",rounded:"lg"},r.a.createElement(v.a,{as:w.m,size:"8",color:"primary.600"}))),r.a.createElement(v.a,{as:k.c,to:"/avails",p:"2",rounded:"lg",activeClassname:"active"},r.a.createElement(v.a,{as:w.o,size:"8",color:"primary.600"})),r.a.createElement(v.a,{as:k.c,to:"/notification",p:"2",rounded:"lg",activeClassname:"active"},r.a.createElement(v.a,{as:w.b,size:"8",color:"primary.600"})),r.a.createElement(v.a,{as:k.c,to:"".concat(l),p:"2",rounded:"lg",activeClassname:"active"},r.a.createElement(v.a,{as:w.k,size:"8",color:"primary.600"})))},Ge=function(e){return r.a.createElement(v.a,{d:{base:"none",lg:"flex"},maxW:"xs",flexGrow:{base:"0",lg:"1"}},e.children)},He={avatar:null,author:"",title:"",name:{firstName:"",lastName:""},description:"",type:"donation",location:"",deadline:"",items:[],tags:[],images:[],comments:[],likers:[]},Ye=function(e){e.match;var t=Object(g.g)().id,a=Object(n.useState)(He),c=Object(m.a)(a,2),l=c[0],o=c[1],d=Object(n.useState)([]),f=Object(m.a)(d,2),b=f[0],p=f[1],h=Object(n.useState)(!0),j=Object(m.a)(h,2),x=j[0],C=j[1],k=Object(n.useState)(),q=Object(m.a)(k,2),N=q[0],z=q[1];return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/api/posts/".concat(t));case 3:a=e.sent,n=a.data,o((function(e){return Object(u.a)(Object(u.a)({},e),n)})),p(n.comments),C(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),z({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),r.a.createElement("div",null,r.a.createElement(_,{message:N}),r.a.createElement(We,{title:"Post",icon:w.r,hasBackButton:!0}),r.a.createElement(v.a,{px:"5",mb:{base:"20",md:"2"}},x?r.a.createElement(U,null):r.a.createElement(Ne,{data:l,addComment:function(e){p((function(t){return[].concat(Object(ke.a)(t),[e])}))},isLinked:!1,isPostSection:!0},r.a.createElement(y.a,{mt:"2"},b.map((function(e){var t=e.user.name.firstName+" "+e.user.name.lastName;return r.a.createElement(v.a,{key:e._id,borderTop:"1px",borderColor:"gray.200",mb:"4",pt:"4"},r.a.createElement(E.a,{mb:"2"},r.a.createElement(S.a,{size:"md",name:t,src:e.user.avatar,mr:"4"}),r.a.createElement(v.a,null,r.a.createElement(O.a,{fontWeight:"bold"},t),r.a.createElement(O.a,{fontWeight:"light",fontSize:"sm",mb:"2"},"@",e.user.username),r.a.createElement(O.a,{fontFamily:"body"},e.content))))}))))))},$e=a(188),Qe=a(336),Ke=function(e){var t=Object(n.useContext)(ft),a=Object(m.a)(t,1)[0].token,c=e.onClose,l=e.handleIsSubmitting,o=e.profile,d=e.updateProfile,f=Object(g.f)(),b=o._id,p=o.avatar,E=o.username,h=o.name,v=o.location,O=o.email,y=o.contactNumber,j=o.bio,x=Object(n.useState)(),C=Object(m.a)(x,2),w=C[0],S=C[1],k={avatar:p,username:E,name:{firstName:h.firstName,lastName:h.lastName},location:v||"",email:O,contactNumber:y,bio:j||""},q=H.e().shape({username:H.g().matches(/^\S*$/,"Invalid username").required("Required"),name:H.e().shape({firstName:H.g().required("Required"),lastName:H.g().required("Required")}).required("Required"),location:H.g(),email:H.g().email("Invalid email").required("Required"),contactNumber:H.g().matches(/^(09|\+639)\d{9}$/,"Enter valid phone number").required("Required"),bio:H.g()}),N=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,o,s,m,p,E,g,h,v,O,y,j,x,C;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in l(!0),n=new FormData,t)if("name"===r)n.append(r,JSON.stringify(t[r]));else if("avatar"===r)for(o=t[r].length,s=0;s<o;s++)n.append(r,t[r][s]);else n.append(r,t[r]);return e.prev=3,e.next=6,M.a.patch("/api/users/".concat(b,"/editUser"),n,{headers:{Authorization:"Bearer "+a,"Content-Type":"multipart/form-data; boundary=<calculated when request is sent>"}});case 6:m=e.sent,p=m.data,E=p.user,d(E),g=E.name,h=E.username,v=E.email,O=E.photo,y=JSON.parse(localStorage.getItem("user")),j=y.user,x=Object(u.a)(Object(u.a)({},j),{},{name:g,username:h,email:v,photo:O}),C=Object(u.a)(Object(u.a)({},y),{},{user:x}),localStorage.setItem("user",JSON.stringify(C)),l(!1),c(),f.push("".concat(h)),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),S({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 24:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{message:w}),r.a.createElement(G.d,{initialValues:k,validationSchema:q,onSubmit:N},(function(e){return r.a.createElement("div",null,r.a.createElement(G.c,{id:"editProfileForm"},r.a.createElement(he,{control:"image",label:"Change Avatar",name:"avatar",type:"file",accept:"image/*",form:e}),r.a.createElement(he,{control:"input",label:"Username",name:"username"}),r.a.createElement(he,{control:"input",label:"First Name",name:"name.firstName"}),r.a.createElement(he,{control:"input",label:"Last Name",name:"name.lastName"}),r.a.createElement(he,{control:"input",label:"Location",name:"location"}),r.a.createElement(he,{control:"input",label:"Email",name:"email"}),r.a.createElement(he,{control:"input",type:"tel",label:"Contact number",name:"contactNumber"}),r.a.createElement(he,{control:"textarea",label:"Bio",name:"bio"})))})))},Xe={username:"",name:{firstName:"",lastName:""},photo:null,email:"",location:"",contactNumber:"",bio:"",donationCount:0,requestCount:0,posts:[]},Ze=function(){var e=Object(g.g)().username,t=Object(h.a)(),a=t.isOpen,c=t.onOpen,l=t.onClose,o=Object(n.useState)(!1),d=Object(m.a)(o,2),f=d[0],b=d[1],p=Object(n.useState)(!0),y=Object(m.a)(p,2),k=y[0],q=y[1],N=Object(n.useState)(),z=Object(m.a)(N,2),I=z[0],F=z[1],D=Object(n.useState)(Xe),R=Object(m.a)(D,2),P=R[0],L=R[1],T=Object(n.useState)(P.posts),W=Object(m.a)(T,2),A=W[0],B=W[1],V=P.name.firstName+" "+P.name.lastName;return Object(n.useEffect)((function(){(function(){var t=Object(s.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.a.get("/api/users/".concat(e));case 3:a=t.sent,n=a.data,L((function(e){return Object(u.a)(Object(u.a)({},e),n.user)})),B(n.user.posts),q(!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),F({title:"Error",description:t.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}})()()}),[e]),r.a.createElement("div",null,r.a.createElement(_,{message:I}),r.a.createElement(We,{title:"Profile",icon:w.k,hasBackButton:!0}),k?r.a.createElement(E.a,{justify:"center",pt:"8"},r.a.createElement($e.a,{thickness:"6px",speed:"0.65s",emptyColor:"gray.200",color:"primary.600",size:"xl"})):r.a.createElement(v.a,{mx:{base:"0",sm:"4"},mb:{base:"24",md:"2"},shadow:"sm",bg:"white",rounded:"lg"},r.a.createElement(E.a,{justify:"flex-end"},r.a.createElement(C.a,{onClick:c,variant:"ghost",icon:w.i,size:"lg",m:"2"})),r.a.createElement(E.a,{pb:"4",borderBottom:"4px",borderColor:"gray.200",mb:"4",flexDirection:"column",justify:"center",align:"center"},r.a.createElement(S.a,{size:"2xl",src:P.photo,name:V,mb:"2"}),r.a.createElement(O.a,{fontSize:"2xl",fontWeight:"semibold"},V),r.a.createElement(O.a,{fontWeight:"light"},"@",P.username),r.a.createElement(E.a,{px:"8",py:"4",justify:"center"},r.a.createElement(O.a,{textAlign:"center"},P.bio)),r.a.createElement(E.a,{flexDirection:"column",mt:"2"},r.a.createElement(E.a,{align:"center",justify:"center"},r.a.createElement(v.a,{as:w.f,color:"primary.600",size:"6"}),r.a.createElement(O.a,{ml:"2"},P.location||"---")),r.a.createElement(E.a,{align:"center",justify:"center"},r.a.createElement(v.a,{as:w.j,color:"primary.600",size:"6"}),r.a.createElement(O.a,{ml:"2"},P.email||"---")),r.a.createElement(E.a,{align:"center",justify:"center"},r.a.createElement(v.a,{as:w.s,color:"primary.600",size:"6"}),r.a.createElement(O.a,{ml:"2"},P.contactNumber||"---"))),r.a.createElement(Qe.b,null,r.a.createElement(Qe.a,{d:"flex",p:"4",flexDirection:"column",justifyContent:"center",alignItems:"center"},r.a.createElement(Qe.d,null,P.donationGiven),r.a.createElement(Qe.c,{color:"primary.600"},"Donations")),r.a.createElement(Qe.a,{d:"flex",p:"4",flexDirection:"column",justifyContent:"center",alignItems:"center"},r.a.createElement(Qe.d,null,P.donationRequested),r.a.createElement(Qe.c,{color:"primary.600"},"Requests")))),r.a.createElement(Ie,{posts:A,createPost:function(e){B((function(t){return[e].concat(Object(ke.a)(t))}))}})),r.a.createElement(j.a,{isOpen:a,onClose:l},r.a.createElement(j.g,null),r.a.createElement(j.d,null,r.a.createElement(j.f,null,"Edit Profile"),r.a.createElement(j.c,null),r.a.createElement(j.b,null,r.a.createElement(Ke,{onClose:l,handleIsSubmitting:b,profile:P,updateProfile:function(e){L((function(t){return Object(u.a)(Object(u.a)({},t),e)}))}})),r.a.createElement(j.e,null,r.a.createElement(x.a,{variant:"ghost",mr:3,onClick:l},"Cancel"),r.a.createElement(x.a,{variantColor:"cyan",type:"submit",isLoading:f,form:"editProfileForm"},"Save")))))},et=a(34),tt=a(337),at=function(){var e=Object(n.useContext)(Ae),t=e.post,a=e.filteredPost,c=Object(m.a)(t,1)[0],l=Object(m.a)(a,2),o=(l[0],l[1]),i=Object(n.useState)(""),s=Object(m.a)(i,2),u=s[0],d=s[1],f=Object(n.useState)("title"),b=Object(m.a)(f,2),p=b[0],E=b[1],h=Object(g.f)(),O=r.a.forwardRef((function(e,t){var a=e.isChecked,n=e.isDisabled,c=(e.value,Object(Y.a)(e,["isChecked","isDisabled","value"]));return r.a.createElement(x.a,Object.assign({ref:t,size:"sm",variant:"ghost",variantColor:a?"cyan":"gray","aria-checked":a,role:"radio",isDisabled:n},c))}));return r.a.createElement(v.a,{p:"4",pos:"sticky",top:"0",h:"100vh"},r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),""===u)return null;var t=c.filter((function(e){var t=e.user.name.firstName+" "+e.user.name.lastName;return"title"===p?-1!==e.title.toLowerCase().indexOf(u.toLowerCase()):"author"===p?-1!==t.toLowerCase().indexOf(u.toLowerCase()):"tags"===p&&!0===e.tags.map((function(e){return e.toLowerCase()===u.toLowerCase()})).includes(!0)}));o(t),h.push("/search")},onReset:function(){d(""),E("")}},r.a.createElement(se.a,null,r.a.createElement(me.a,{children:r.a.createElement(et.a,{name:"search",color:"primary.600"})}),r.a.createElement(K.a,{placeholder:"Search Donasource",onChange:function(e){return d(e.target.value)},name:"search",value:u,type:"text",size:"md",focusBorderColor:"primary.600"})),r.a.createElement(tt.a,{d:"flex",mt:"2",defautlValue:"title",onChange:function(e){return E(e)},value:p},r.a.createElement(O,{m:"0",value:"title"},"Title"),r.a.createElement(O,{m:"0",value:"author"},"Author"),r.a.createElement(O,{m:"0",value:"tags"},"Tags")),r.a.createElement(x.a,{variantColor:"cyan",type:"submit"},"Search")))},nt=function(e){var t=e.handleIsSubmitting,a=e.login,n=H.e().shape({email:H.g().email("Invalid email").required("Required"),password:H.g().required("Required")}),c=function(){var e=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(!0),a(n),t(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(G.d,{initialValues:{email:"",password:""},validationSchema:n,onSubmit:c},(function(e){return r.a.createElement("div",null,r.a.createElement(G.c,{id:"loginform"},r.a.createElement(he,{control:"input",type:"email",label:"Email",name:"email",placeholder:"Enter email"}),r.a.createElement(he,{control:"password",label:"Password",name:"password"})))}))},rt=function(e){var t=e.handleIsSubmitting,a=e.signup,n=H.e().shape({username:H.g().matches(/^\S*$/,"Invalid username").required("Required"),firstName:H.g().required("Required"),lastName:H.g().required("Required"),email:H.g().email("Invalid email").required("Required"),contactNumber:H.g().matches(/^(09|\+639)\d{9}$/,"Enter a valid phone number").required("Required"),password:H.g().required("Required"),repassword:H.g().oneOf([H.f("password")],"Password does not match").required("Required")}),c=function(){var e=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(!0),a(n),t(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(G.d,{initialValues:{username:"",firstName:"",lastName:"",email:"",contactNumber:"",password:"",repassword:""},validationSchema:n,onSubmit:c},(function(e){return r.a.createElement("div",null,r.a.createElement(G.c,{id:"signupform"},r.a.createElement(he,{control:"input",label:"Username",name:"username"}),r.a.createElement(he,{control:"input",label:"First Name",name:"firstName"}),r.a.createElement(he,{control:"input",label:"Last Name",name:"lastName"}),r.a.createElement(he,{control:"input",type:"email",label:"Email",name:"email",placeholder:"Enter email"}),r.a.createElement(he,{control:"input",type:"tel",label:"Contact number",name:"contactNumber"}),r.a.createElement(he,{control:"password",label:"Password",name:"password"}),r.a.createElement(he,{control:"password",name:"repassword",placeholder:"Enter password again"})))}))},ct=function(e){var t=e.login,a=e.signup,c=Object(n.useState)(!0),l=Object(m.a)(c,2),o=l[0],i=l[1],s=Object(n.useState)(!1),u=Object(m.a)(s,2),d=u[0],f=u[1],b=function(e){f(e)},p=function(){i(!o)};return r.a.createElement(E.a,{bg:"primary.600",h:o?"100vh":"full",minH:"100vh",flexDirection:{base:"column-reverse",lg:"row"},justify:{base:"center",lg:"space-evenly"},align:{base:"center",lg:"center"},p:"2"},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{bg:"white",shadow:"md",rounded:"lg",py:"12",px:"10"},r.a.createElement(O.a,{fontSize:"3xl",fontWeight:"bold",mb:"4"},"Login"),r.a.createElement(nt,{handleIsSubmitting:b,login:t}),r.a.createElement(E.a,{justify:"flex-end",mt:"8"},r.a.createElement(x.a,{mr:"2",onClick:p},"Sign up"),r.a.createElement(x.a,{type:"submit",variantColor:"cyan",form:"loginform",isLoading:d},"Log in"))),r.a.createElement(v.a,{w:{base:"xs",lg:"lg"}},r.a.createElement(O.a,{fontSize:"5xl",textAlign:{base:"center",lg:"left"},fontWeight:"extrabold",color:"secondary.100"},"Donasource"),r.a.createElement(O.a,{d:{base:"none",lg:"block"},fontSize:"lg",color:"white"},"Donasource is a web application that connects people who need help and those people who can help by posting their needs or what they are willing to donate."))):r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{bg:"white",shadow:"md",rounded:"lg",py:"12",px:"10",maxh:"100vh"},r.a.createElement(O.a,{fontSize:"3xl",fontWeight:"bold",mb:"4"},"Sign up"),r.a.createElement(rt,{handleIsSubmitting:b,signup:a}),r.a.createElement(E.a,{justify:"flex-end",mt:"8"},r.a.createElement(x.a,{mr:"2",onClick:p},"Log in"),r.a.createElement(x.a,{type:"submit",variantColor:"cyan",form:"signupform",isLoading:d},"Sign up"))),r.a.createElement(v.a,{w:{base:"xs",lg:"lg"}},r.a.createElement(O.a,{d:{base:"block",lg:"none"},fontSize:"5xl",textAlign:"center",fontWeight:"extrabold",color:"secondary.100"},"Join Us!"),r.a.createElement(O.a,{d:{base:"none",lg:"block"},fontSize:"5xl",fontWeight:"extrabold",color:"secondary.100"},"Join Us and be part of a community that helps one another."))))},lt=function(){var e=Object(n.useContext)(Ae).filteredPost,t=Object(m.a)(e,1)[0],a=Object(n.useState)(!1),c=Object(m.a)(a,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){o(!0),setTimeout((function(){o(!1)}),500)}),[t]),r.a.createElement("div",null,r.a.createElement(We,{title:"Search results:",icon:w.t,hasBackButton:!0}),l?r.a.createElement(E.a,{justify:"center",pt:"8"},r.a.createElement($e.a,{thickness:"6px",speed:"0.65s",emptyColor:"gray.200",color:"primary.600",size:"xl"})):0===t.length?r.a.createElement(E.a,{align:"center",py:"8",flexDirection:"column"},r.a.createElement(v.a,{as:w.g,size:"20"}),r.a.createElement(O.a,{fontWeight:"bold",fontSize:"lg"},"No results found."),r.a.createElement(O.a,null,"We cannot find the post you are looking for. Try searching with another term.")):r.a.createElement(y.a,{mb:{base:"16",md:"4"},px:{base:"0",sm:"4"}},t.map((function(e){return r.a.createElement(Ne,{key:e._id,data:e,isLinked:!0})}))))},ot=function(e){var t=e.notif,a=e.seenNotif,n=t._id,c=t.user,l=t.type,o=t.postId,i=t.date,s=t.title,m=t.seen,u=c.avatar,d=c.name,f=c.username,b=d.firstName+" "+d.lastName,p=new Date,g=new Date(i),h=p.getTime()-g.getTime(),y=Math.floor(h/864e5),j=Math.floor(h/36e5),x=Math.floor(h/6e4),C=Math.floor(h/1e3);return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.b,{to:"/profile/post/".concat(o),onClick:function(){return a(n)}},r.a.createElement(E.a,{pl:"4",py:"4",align:"center",bg:"like"!==l||m?"comment"!==l||m?"donate"!==l||m?"accept"!==l||m?"reject"!==l||m?"none":"red.100":"green.100":"yellow.100":"blue.100":"cyan.100",mx:"4",rounded:"lg"},r.a.createElement(k.b,{to:"/".concat(f)},r.a.createElement(S.a,{name:"Bullet Pua",src:u})),r.a.createElement(v.a,{ml:"4"},r.a.createElement(O.a,null,r.a.createElement("b",null,b+" "),"like"===l?"liked your posts: ":"comment"===l?"commented on your post: ":"donate"===l?"donated on your post: ":"accept"===l?"accepted your request on post: ":"reject"===l?"rejected your request on post: ":"",r.a.createElement("b",null,'"',s,'"')),r.a.createElement(O.a,{fontSize:"sm",color:"gray.700"},j>=24?"".concat(y,"d ago"):x>=60?"".concat(j,"hr ago"):C>=60?"".concat(x,"min ago"):"".concat(C," sec ago"))))),r.a.createElement(T.a,null))},it=["January","February","March","April","May","June","July","August","September","October","November","December"],st=function(){var e=Object(n.useContext)(ft),t=Object(m.a)(e,1)[0].user._id,a=Object(n.useState)([]),c=Object(m.a)(a,2),l=c[0],o=c[1],u=Object(n.useState)(!0),d=Object(m.a)(u,2),f=d[0],b=d[1],p=Object(n.useState)(),g=Object(m.a)(p,2),h=g[0],y=g[1],j=function(){var e=Object(s.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/api/users/".concat(t,"/notifications/").concat(a));case 3:n=e.sent,n.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),y({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var a,n,r,c,l,s,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/api/users/".concat(t,"/notifications"));case 3:a=e.sent,n=a.data,r=[],c=new Date,l=Math.floor(c.getTime()/864e5),s=0,m=0,n.notifications.forEach((function(e){var t=new Date(e.date),a=Math.floor(t.getTime()/864e5),n=a===l?"Today":a===l-1?"Yesterday":"".concat(it[t.getMonth()]," ").concat(t.getDate());m!==a?(r.push({label:n,contents:[e]}),s+=1,m=a):r[s-1].contents.push(e)})),o(r),b(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),alert(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{message:h}),r.a.createElement(We,{title:"Notification",icon:w.b}),f?r.a.createElement(E.a,{justify:"center",pt:"8"},r.a.createElement($e.a,{thickness:"6px",speed:"0.65s",emptyColor:"gray.200",color:"primary.600",size:"xl"})):0===l.length?r.a.createElement(E.a,{align:"center",py:"8",flexDirection:"column"},r.a.createElement(v.a,{as:w.c,size:"20"}),r.a.createElement(O.a,{fontWeight:"bold",fontSize:"lg"},"No notifications yet"),r.a.createElement(O.a,null,"Stay tuned! Notifications about your activity will show up here.")):r.a.createElement(v.a,{mx:{base:"0",sm:"4"},mb:{base:"24",md:"2"},rounded:"lg",bg:"white",shadow:"sm",pb:"2"},l.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{ml:"6",fontSize:"sm",fontWeight:"semibold",pt:"4",pb:"2",color:"gray.800"},e.label),r.a.createElement(T.a,null),e.contents.map((function(e){return r.a.createElement(ot,{key:e._id,notif:e,seenNotif:j})})))}))))},mt=a(338),ut=function(e){var t=e.avail,a=e.accept,c=e.reject,l=t._id,o=t.user,i=t.post,s=t.reason,u=t.date,d=t.items,f=o.avatar,b=o.name,p=o.username,g=i._id,h=i.title,y=b.firstName+" "+b.lastName,j=new Date,C=new Date(u),q=j.getTime()-C.getTime(),N=Math.floor(q/864e5),I=Math.floor(q/36e5),F=Math.floor(q/6e4),D=Math.floor(q/1e3),R=Object(n.useState)(!1),P=Object(m.a)(R,2),L=P[0],W=P[1],A=Object(n.useState)(!1),M=Object(m.a)(A,2),B=M[0],_=M[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{pt:"4",px:"6"},r.a.createElement(E.a,{align:"center",rounded:"lg",pb:"4"},r.a.createElement(k.b,{to:"/".concat(p)},r.a.createElement(S.a,{name:y,src:f})),r.a.createElement(v.a,{ml:"4"},r.a.createElement(O.a,null,r.a.createElement("b",null,y+" "),"requests on your donation:",r.a.createElement(k.b,{to:"/post/".concat(g)},r.a.createElement("b",null,' "'.concat(h,'"')))),r.a.createElement(O.a,{fontSize:"sm",color:"gray.700"},I>=24?"".concat(N,"d ago"):F>=60?"".concat(I,"hr ago"):D>=60?"".concat(F,"min ago"):"".concat(D," sec ago")))),r.a.createElement(v.a,{p:"2",bg:"blue.100",rounded:"lg",mb:"2"},r.a.createElement(mt.a,{startingHeight:32,isOpen:L,ml:"4",mt:"2"},r.a.createElement(O.a,{fontWeight:"bold"},"Items requested:"),d.map((function(e){return r.a.createElement(E.a,{ml:"4",align:"center"},r.a.createElement(v.a,{as:w.d,mr:"2"}),r.a.createElement(O.a,{fontSize:"sm"},e.itemId.name),r.a.createElement(z.a,{ml:"2",variantColor:"orange"},e.amountRequested))})),r.a.createElement(T.a,null),r.a.createElement(O.a,{mt:"2",fontWeight:"bold"},"Reason:"),r.a.createElement(O.a,{ml:"4",fontSize:"sm"},s)),r.a.createElement(x.a,{ml:"4",mt:"1",size:"sm",variant:"ghost",variantColor:"blue",onClick:function(){return W(!L)}},"Show ",L?"Less":"More")),r.a.createElement(E.a,{justify:"flex-end"},r.a.createElement(x.a,{size:"sm",isLoading:B,onClick:function(){return c(l,_)}},"Reject"),r.a.createElement(x.a,{size:"sm",isLoading:B,onClick:function(){return a(l,_)},variantColor:"cyan",ml:"2"},"Accept"))),r.a.createElement(T.a,null))},dt=function(){var e=Object(n.useContext)(ft),t=Object(m.a)(e,1)[0],a=t.user,c=t.token,l=a._id,o=Object(n.useState)([]),u=Object(m.a)(o,2),d=u[0],f=u[1],b=Object(n.useState)(!0),p=Object(m.a)(b,2),g=p[0],h=p[1],y=Object(n.useState)(),j=Object(m.a)(y,2),x=j[0],C=j[1],S=function(){var e=Object(s.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,M.a.patch("/api/users/".concat(l,"/avails/").concat(t),{response:"ACCEPT"},{headers:{Authorization:"Bearer "+c}});case 4:n=e.sent,r=n.data,f((function(e){return Object(ke.a)(r.avails)})),a(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),C({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(s.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,M.a.patch("/api/users/".concat(l,"/avails/").concat(t),{response:"REJECT"},{headers:{Authorization:"Bearer "+c}});case 4:n=e.sent,r=n.data,f((function(e){return Object(ke.a)(r.avails)})),a(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),C({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/api/users/".concat(l,"/avails"));case 3:t=e.sent,a=t.data,f((function(e){return[].concat(Object(ke.a)(e),Object(ke.a)(a.avails))})),h(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),C({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0}),h(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{message:x}),r.a.createElement(We,{title:"Avails",icon:w.o}),g?r.a.createElement(E.a,{justify:"center",pt:"8"},r.a.createElement($e.a,{thickness:"6px",speed:"0.65s",emptyColor:"gray.200",color:"primary.600",size:"xl"})):0===d.length?r.a.createElement(E.a,{align:"center",py:"8",flexDirection:"column"},r.a.createElement(v.a,{as:w.q,size:"20"}),r.a.createElement(O.a,{fontWeight:"bold",fontSize:"lg"},"No one has requested yet."),r.a.createElement(O.a,null,"You can post more donations to get more request.")):r.a.createElement(v.a,{mx:{base:"0",sm:"4"},mb:{base:"24",md:"2"},rounded:"lg",bg:"white",shadow:"sm",pb:"2"},r.a.createElement(T.a,null),d.map((function(e){return r.a.createElement(ut,{avail:e,accept:S,reject:k})}))))},ft=r.a.createContext(null),bt=function(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),o=Object(m.a)(l,2),u=o[0],d=o[1],h=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.post("/api/login",t);case 3:a=e.sent,n=a.data,r={user:n.user,token:n.token},c(r),localStorage.setItem("user",JSON.stringify(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.post("/api/signup",t);case 3:a=e.sent,a.data,d({title:"Success",description:"You have successfully created your account.",status:"success",duration:2e3,isClosable:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d({title:"Error",description:e.t0.response.data.message,status:"error",duration:2e3,isClosable:!0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useLayoutEffect)((function(){c(JSON.parse(localStorage.getItem("user")))}),[]),r.a.createElement(b.a,{theme:f},r.a.createElement(p.a,null),r.a.createElement(ft.Provider,{value:[a,c]},r.a.createElement(_,{message:u}),a?r.a.createElement("div",null,r.a.createElement(Le,{title:"Donasource"}),r.a.createElement(E.a,{justify:{base:"center",xl:"space-evenly"}},r.a.createElement(Ve,null,r.a.createElement(Ue,{variant:"side"})),r.a.createElement(Be,null,r.a.createElement(Je,null,r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/",component:_e}),r.a.createElement(g.a,{path:"/search",component:lt}),r.a.createElement(g.a,{path:"/notification",component:st}),r.a.createElement(g.a,{path:"/avails",component:dt}),r.a.createElement(g.a,{exact:!0,path:"/:username",component:Ze}),r.a.createElement(g.a,{path:"/:username/post/:id",component:Ye}))),r.a.createElement(Ue,{variant:"bottom",d:{base:"flex",md:"none"}}),r.a.createElement(Ge,null,r.a.createElement(at,null))))):r.a.createElement(ct,{login:h,signup:v})))};a(310);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k.a,null,r.a.createElement(bt,null))),document.getElementById("root"))}},[[200,1,2]]]);
//# sourceMappingURL=main.5ffa29da.chunk.js.map